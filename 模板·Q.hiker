海阔视界规则分享，当前分享的是：小程序￥home_rule_v2￥base64://@模板·Q@eyJsYXN0X2NoYXB0ZXJfcnVsZSI6IiIsInRpdGxlIjoi5qih5p2/wrdRIiwiYXV0aG9yIjoi5Y+R57Kq5raC5aKZIiwidXJsIjoiaGlrZXI6Ly9lbXB0eSMjZnlwYWdlIiwidmVyc2lvbiI6MjUwOTA1MDAsImNvbF90eXBlIjoidGV4dF9jZW50ZXJfMSIsImNsYXNzX25hbWUiOiIiLCJ0eXBlIjoidG9vbCIsImNsYXNzX3VybCI6IiIsImFyZWFfbmFtZSI6IiIsImFyZWFfdXJsIjoiIiwic29ydF9uYW1lIjoiIiwieWVhcl9uYW1lIjoiIiwic29ydF91cmwiOiIiLCJ5ZWFyX3VybCI6IiIsImZpbmRfcnVsZSI6ImpzOlxuYWRkTGlzdGVuZXIoXCJvbkNsb3NlXCIsICQudG9TdHJpbmcoKCkgPT4ge1xuICAgIFtcInRlbXBsYXRlLXVybFwiLCBcInNlYXJjaC11cmxcIiwgXCJwYWdlcy11bmZvbGRcIl0uZm9yRWFjaChjbGVhck15VmFyKTtcbn0pKTtcbmNvbnN0IGlzVW5mb2xkZWQgPSBnZXRNeVZhcigncGFnZXMtdW5mb2xkJywgJ2ZhbHNlJykgPT09ICd0cnVlJ1xubGV0IGQyID0gW3tcbiAgICBkZXNjOiBcIui+k+WFpeWIhuexu+aIluivpuaDhemhtemTvuaOpea1i+ivleWMuemFjVwiLFxuICAgIGNvbF90eXBlOiBcImlucHV0XCIsXG4gICAgdXJsOiBcImlucHV0XCIsXG4gICAgdGl0bGU6IFwi5rWL6K+VXCIsXG4gICAgZXh0cmE6IHtcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBnZXRNeVZhcigndGVtcGxhdGUtdXJsJywgXCJcIiksXG4gICAgICAgIG9uQ2hhbmdlOiBcInB1dE15VmFyKCd0ZW1wbGF0ZS11cmwnLGlucHV0KVwiXG4gICAgfVxufSwge1xuICAgIGRlc2M6IFwi6L6T5YWl5pCc57Si6ZO+5o6l77yMKirkuLrlhbPplK7lrZfljaDkvY3nrKZcIixcbiAgICBjb2xfdHlwZTogXCJpbnB1dFwiLFxuICAgIHVybDogXCJpbnB1dFwiLFxuICAgIHRpdGxlOiBcIua1i+ivleaQnOe0olwiLFxuICAgIGV4dHJhOiB7XG4gICAgICAgIHRpdGxlVmlzaWJsZTogZmFsc2UsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZ2V0VmFyKFwic2VhcmNoLXVybFwiKSxcbiAgICAgICAgb25DaGFuZ2U6IFwicHV0VmFyKCdzZWFyY2gtdXJsJyxpbnB1dClcIlxuICAgIH1cbn0sIHtcbiAgICBkZXNjOiBcIui+k+WFpeaQnOe0ouWFs+mUruivjea1i+ivleWMuemFjVwiLFxuICAgIGNvbF90eXBlOiBcImlucHV0XCIsXG4gICAgdXJsOiAkLnRvU3RyaW5nKCgpID0+IGBoaWtlcjovL3NlYXJjaD9zPSR7aW5wdXR9JnJ1bGU9JHtNWV9SVUxFLnRpdGxlfWApXG59LCB7XG4gICAgdGl0bGU6IFwi55Sf5oiQ6KeE5YiZXCIsXG4gICAgY29sX3R5cGU6IFwidGV4dF8yXCIsXG4gICAgdXJsOiAkKFwiXCIsIFwi6K+36L6T5YWl6KeE5YiZ5ZCNXCIpLmlucHV0KCgpID0+IHtcbiAgICAgICAgY29uc3QgdXJsID0gZ2V0TXlWYXIoJ3RlbXBsYXRlLXVybCcsIFwiXCIpO1xuICAgICAgICBpZiAoIXVybCB8fCAhaW5wdXQpIHJldHVybiBcInRvYXN0Oi8v6K+35YWI6L6T5YWl6ZO+5o6l5ZKM6KeE5YiZ5ZCNXCI7XG4gICAgICAgIGNvbnN0IHJ1bGUgPSB7XG4gICAgICAgICAgICB0aXRsZTogaW5wdXQsXG4gICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgIHNlYXJjaF91cmw6IGdldFZhcihcInNlYXJjaC11cmxcIiksXG4gICAgICAgICAgICBncm91cDogXCLmtYvor5VcIixcbiAgICAgICAgICAgIHVhOiBcIm1vYmlsZVwiLFxuICAgICAgICAgICAgZmluZF9ydWxlOiBNWV9SVUxFLmRldGFpbF9maW5kX3J1bGUsXG4gICAgICAgICAgICBkZXRhaWxfZmluZF9ydWxlOiBNWV9SVUxFLmRldGFpbF9maW5kX3J1bGUsXG4gICAgICAgICAgICBzZWFyY2hGaW5kOiBNWV9SVUxFLmRldGFpbF9maW5kX3J1bGUsXG4gICAgICAgICAgICB2ZXJzaW9uOiAwLFxuICAgICAgICAgICAgY29sX3R5cGU6IFwibW92aWVfM1wiLFxuICAgICAgICAgICAgZGV0YWlsX2NvbF90eXBlOiBcIm1vdmllXzFcIixcbiAgICAgICAgICAgIHNkZXRhaWxfY29sX3R5cGU6IFwibW92aWVfMVwiLFxuICAgICAgICAgICAgc2RldGFpbF9maW5kX3J1bGU6IFwiKlwiXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBg5rW36ZiU6KeG55WM6KeE5YiZ5YiG5Lqr77yM5b2T5YmN5YiG5Lqr55qE5piv77ya5bCP56iL5bqP77+laG9tZV9ydWxl77+lJHtKU09OLnN0cmluZ2lmeShydWxlKX1gO1xuICAgIH0pXG59LCB7XG4gICAgdGl0bGU6ICfop4bpopHmlZnnqIsnLFxuICAgIGNvbF90eXBlOiAndGV4dF8yJyxcbiAgICB1cmw6IFwidmlkZW86Ly9odHRwczovL3d3dy5iaWxpYmlsaS5jb20vdmlkZW8vQlYxZE00eTFnN3JlXCJcbn0sIHtcbiAgICB0aXRsZTogaXNVbmZvbGRlZCA/ICfngrnmiJHmlLbnvKnmqKHmnb/liJfooagnIDogJ+eCueaIkeWxleW8gOaooeadv+WIl+ihqCcsXG4gICAgY29sX3R5cGU6ICd0ZXh0X2NlbnRlcl8xJyxcbiAgICB1cmw6ICQoXCIjbm9Mb2FkaW5nI1wiKS5sYXp5UnVsZSgoaXNVbmZvbGRlZCkgPT4ge1xuICAgICAgICBwdXRNeVZhcigncGFnZXMtdW5mb2xkJywgaXNVbmZvbGRlZCA/ICdmYWxzZScgOiAndHJ1ZScpO1xuICAgICAgICByZWZyZXNoUGFnZShmYWxzZSk7XG4gICAgICAgIHJldHVybiBgdG9hc3Q6Ly8ke2lzVW5mb2xkZWQgPyAn5pS257ypJyA6ICflsZXlvIAnfeaIkOWKn2A7XG4gICAgfSwgaXNVbmZvbGRlZClcbn0sIHtcbiAgICB0aXRsZTogJ+a1i+ivleaPkOekuu+8mummlumhtemTvuaOpemcgOaUuemhteeggeS4umZ5cGFnZe+8jOa1i+ivlemAmui/h+WQjuWhq+WlveWQjeensOeUn+aIkOinhOWIme+8jOivpue7huaVmeeoi+WPguiAg+S4iuaWuemTvuaOpScsXG4gICAgY29sX3R5cGU6ICdyaWNoX3RleHQnXG59XVxuXG5pZiAoaXNVbmZvbGRlZCkge1xuICAgIGQyLnB1c2goe1xuICAgICAgICB0aXRsZTogJ+eCueWHu+aooeadv+WPr+afpeeci+S7o+egge+8micsXG4gICAgICAgIGNvbF90eXBlOiAncmljaF90ZXh0J1xuICAgIH0pO1xuXG4gICAgY29uc3QgdmFsaWRQYWdlcyA9IE1ZX1JVTEUucGFnZUxpc3QuZmlsdGVyKHBhZ2UgPT5cbiAgICAgICAgcGFnZS5uYW1lICE9PSAnI01hcHBpbmcnICYmIHBhZ2UubmFtZSAhPT0gJyNhdXRvJ1xuICAgICk7XG5cbiAgICB2YWxpZFBhZ2VzLmZvckVhY2gocGFnZSA9PiB7XG4gICAgICAgIGQyLnB1c2goe1xuICAgICAgICAgICAgdGl0bGU6IHBhZ2UubmFtZSxcbiAgICAgICAgICAgIGNvbF90eXBlOiAndGV4dF8yJyxcbiAgICAgICAgICAgIHVybDogJCgpLnJ1bGUocGFnZSA9PiBzZXRSZXN1bHQoW3tcbiAgICAgICAgICAgICAgICB0aXRsZTogcGFnZS5ydWxlLFxuICAgICAgICAgICAgICAgIGNvbF90eXBlOiAnbG9uZ190ZXh0J1xuICAgICAgICAgICAgfV0pLCBwYWdlKVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbnNldFJlc3VsdChkMik7Iiwic2VhcmNoX3VybCI6Imhpa2VyOi8vZW1wdHkjKiojZnlwYWdlLmpzOiBsZXQgc3VybCA9ICBnZXRWYXIoXCJzZWFyY2gtdXJsXCIp77yb77ybbGV0IGluc3BsaXRzPWlucHV0LnNwbGl0KFwiI1wiKe+8m++8m2xldCB1cmwgPSBzdXJsLnJlcGxhY2UoYmFzZTY0RGVjb2RlKFwiS2lvPVwiKSwgaW5zcGxpdHNbMV0pLnJlcGxhY2UoYmFzZTY0RGVjb2RlKFwiWm5sd1lXZGxcIiksIGluc3BsaXRzWzJdKe+8m++8m3VybO+8m++8myIsImdyb3VwIjoiKu+4j+KDo+W3peWFtyIsInNlYXJjaEZpbmQiOiJqczpcbnZhciBkID0gW11cbnZhciBodG1sID0gZ2V0UmVzQ29kZSgpXG4kLnJlcXVpcmUoJ2hpa2VyOi8vcGFnZS95em0/cnVsZT3mqKHmnb/Ct1EnKVxuJC5yZXF1aXJlKFwiaGlrZXI6Ly9wYWdlL2F1dG8/cnVsZT3mqKHmnb/Ct1FcIikuYXV0b1BhZ2UoaHRtbCkiLCJkZXRhaWxfY29sX3R5cGUiOiJtb3ZpZV8zIiwiZGV0YWlsX2ZpbmRfcnVsZSI6ImpzOlxuJC5yZXF1aXJlKFwiaGlrZXI6Ly9wYWdlL2F1dG8/cnVsZT3mqKHmnb/Ct1FcIikuYXV0b1BhZ2UoZ2V0UmVzQ29kZSgpKSIsInNkZXRhaWxfY29sX3R5cGUiOiJtb3ZpZV8xIiwic2RldGFpbF9maW5kX3J1bGUiOiIqIiwidWEiOiJhdXRvIiwicHJlUnVsZSI6IiIsInBhZ2VzIjoiW3tcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCLkuIDnuqdzdHVpLXZvZGxpc3RcIixcInBhdGhcIjpcInN0dWktdm9kbGlzdFwiLFwicnVsZVwiOlwidmFyIGQgPSBbXVxcbk1ZX1JVTEUudXJsLm1hdGNoKC9meXBhZ2UvKVswXTtcXG5zZXRSZXN1bHQoXFxuICBwZGZhKGdldFJlc0NvZGUoKSwgJy5zdHVpLXZvZGxpc3QmJmxpJykubWFwKChsaXN0KSA9PiAoe1xcbiAgICB0aXRsZTogcGRmaChsaXN0LCAnYSYmdGl0bGUnKSxcXG4gICAgZGVzYzogcGRmaChsaXN0LCAnLnBpYy10ZXh0JiZUZXh0JyksXFxuICAgIGltZzogcGQobGlzdCwgJy5sYXp5bG9hZHx8YSYmZGF0YS1vcmlnaW5hbCcpICsgJ0BSZWZlcmVyPScsXFxuICAgIHVybDogcGQobGlzdCwgJ2EmJmhyZWYnKSArICcjaW1tZXJzaXZlVGhlbWUjJyxcXG4gIH0pKVxcbik7XFxuXCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCLkuoznuqcuYlwiLFwicGF0aFwiOlwiLmJcIixcInJ1bGVcIjpcInZhciBkID0gW107XFxudmFyIGh0bWwgPSBnZXRSZXNDb2RlKCk7XFxuaWYgKGh0bWwuaW5kZXhPZign5qOA5rWL5LitJykgIT0gLTEpIHtcXG4gICAgaHRtbCA9IHJlcXVlc3QoTVlfVVJMICsgJz9idHdhZicgKyBodG1sLm1hdGNoKC9idHdhZiguKj8pXFxcXFxcXCIvKVsxXSwge30pO1xcbn1cXG5kLnB1c2goe1xcbiAgICB0aXRsZTogcGRmaChodG1sLCAnLnN0dWktY29udGVudF9fZGV0YWlsLS1oMSYmVGV4dCcpXFxuICAgICAgICAucmVwbGFjZSgn5Zyw5Yy6JywgJ1xcXFxu5Zyw5Yy6JylcXG4gICAgICAgIC5yZXBsYWNlKCfkuLvmvJQnLCAnXFxcXG7kuLvmvJQnKSxcXG4gICAgZGVzYzogcGRmaChodG1sLCAnLmRlc2N8fC5kZXRhaWwtY29udGVudCYmVGV4dCcpLFxcbiAgICBwaWNfdXJsOiBwZChodG1sLCAnLmxhenlsb2FkJiZkYXRhLW9yaWdpbmFsJyksXFxuICAgIHVybDogTVlfVVJMLFxcbiAgICBjb2xfdHlwZTogJ21vdmllXzFfdmVydGljYWxfcGljX2JsdXInXFxufSk7XFxudmFyIOe6v+i3ryA9ICdib2R5JiYuYidcXG52YXIg6YCJ6ZuGID0g57q/6LevXFxudmFyIOe6v+i3r+WQjSA9ICdoMyYmVGV4dCdcXG52YXIg6YCJ6ZuG5YiX6KGoID0gJ3VsJiZsaSdcXG5ldmFsKEpTT04ucGFyc2UocmVxdWVzdCgnaGlrZXI6Ly9wYWdlL2Vyamk/cnVsZT3mqKHmnb/Ct1EnKSkucnVsZSlcXG5zZXRSZXN1bHQoZCk7XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCLmkJzntKJzdHVpLXZvZGxpc3RfX21lZGlhXCIsXCJwYXRoXCI6XCJzdHVpLXZvZGxpc3RfX21lZGlhXCIsXCJydWxlXCI6XCJ2YXIgZCA9IFtdO1xcbnZhciBsaXN0ID0gcGRmYShnZXRSZXNDb2RlKCksICcuc3R1aS12b2RsaXN0X19tZWRpYSYmbGknKTtcXG5sb2coJ+aQnOe0oue7k+aenCcpXFxubG9nKGxpc3QpXFxuaWYgKGxpc3QubGVuZ3RoID09IDApIHRocm93IFxcXCLmkJzntKLkuLrnqbrvvIzlj6/og73ljLnphY3plJnor69cXFwiXFxuZm9yICh2YXIgaiBpbiBsaXN0KSB7XFxuICAgIGQucHVzaCh7XFxuICAgICAgICB0aXRsZTogcGRmaChsaXN0W2pdLCAnYSYmdGl0bGUnKSxcXG4gICAgICAgIGRlc2M6IHBkZmgobGlzdFtqXSwgJy5waWMtdGV4dCYmVGV4dCcpLFxcbiAgICAgICAgaW1nOiBwZChsaXN0W2pdLCAnYSYmZGF0YS1vcmlnaW5hbCcpLFxcbiAgICAgICAgY29udGVudDogcGRmaChsaXN0W2pdLCAnLmRldGFpbC0taDMmJlRleHQnKSxcXG4gICAgICAgIHVybDogcGQobGlzdFtqXSwgJ2EmJmhyZWYnKSsnI2ltbWVyc2l2ZVRoZW1lIydcXG4gICAgfSk7XFxufVxcbnNldFJlc3VsdChkKTtcIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIuS4gOe6p215dWktdm9kbGlzdFwiLFwicGF0aFwiOlwibXl1aS12b2RsaXN0XCIsXCJydWxlXCI6XCJ2YXIgZCA9IFtdXFxuTVlfUlVMRS51cmwubWF0Y2goL2Z5cGFnZS8pWzBdXFxudmFyIGxpc3QgPSBwZGZhKGdldFJlc0NvZGUoKSwgJy5teXVpLXZvZGxpc3QmJmxpJylcXG5mb3IgKHZhciBqIGluIGxpc3QpIHtcXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBwZGZoKGxpc3Rbal0sICdoNCYmVGV4dCcpLFxcbiAgICAgICAgZGVzYzogcGRmaChsaXN0W2pdLCAnLnBpYy10YWd8fC5waWMtdGV4dCYmVGV4dCcpLFxcbiAgICAgICAgaW1nOiBwZChsaXN0W2pdLCAnLmxhenlsb2FkJiZkYXRhLW9yaWdpbmFsJyksXFxuICAgICAgICB1cmw6IHBkKGxpc3Rbal0sICdhJiZocmVmJykucmVwbGFjZSgndm9kcGxheScsJ3ZvZGRldGFpbCcpICsgJyNpbW1lcnNpdmVUaGVtZSMnXFxuICAgIH0pXFxufVxcbnNldFJlc3VsdChkKVwifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwi5LqM57qnbmF2LXRhYnNcIixcInBhdGhcIjpcIm5hdi10YWJzXCIsXCJydWxlXCI6XCJ2YXIgZCA9IFtdO1xcbnZhciBodG1sID0gZ2V0UmVzQ29kZSgpO1xcblxcbmQucHVzaCh7XFxuICAgIHRpdGxlOiBwZGZoKGh0bWwsICcuZGF0YSYmVGV4dCcpXFxuICAgICAgICAucmVwbGFjZSgn5Zyw5Yy677yaJywgJyAgJylcXG4gICAgICAgIC5yZXBsYWNlKCflubTku73vvJonLCAnICAnKSArICdcXFxcbicgK1xcbiAgICAgICAgcGRmaChodG1sLCAnLmRhdGEsMSYmVGV4dCcpXFxuICAgICAgICAuc3Vic3RyaW5nKDAsIDE1KSArICdcXFxcbicgK1xcbiAgICAgICAgcGRmaChodG1sLCAnLmRhdGEsMiYmVGV4dCcpLFxcbiAgICBkZXNjOiBwZGZoKGh0bWwsICcuZGF0YSwzJiZUZXh0JyksXFxuICAgIGltZzogcGQoaHRtbCwgJy5sYXp5bG9hZCYmZGF0YS1vcmlnaW5hbCcpLFxcbiAgICB1cmw6IE1ZX1VSTCxcXG4gICAgY29sX3R5cGU6ICdtb3ZpZV8xX3ZlcnRpY2FsX3BpY19ibHVyJ1xcbn0pO1xcbnZhciDnur/ot68gPSAnLm5hdi10YWJzJiZhJ1xcbnZhciDpgInpm4YgPSAnLnRhYi1jb250ZW50JiYubXl1aS1jb250ZW50X19saXN0fHwuc3R1aS1jb250ZW50X19wbGF5bGlzdCdcXG52YXIg57q/6Lev5ZCNID0gJ1RleHQnXFxudmFyIOmAiembhuWIl+ihqCA9ICd1bCYmbGknXFxuZXZhbChKU09OLnBhcnNlKHJlcXVlc3QoJ2hpa2VyOi8vcGFnZS9lcmppP3J1bGU95qih5p2/wrdRJykpLnJ1bGUpXFxuc2V0UmVzdWx0KGQpO1wifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwi5pCc57SibXl1aS12b2RsaXN0X19tZWRpYVwiLFwicGF0aFwiOlwibXl1aS12b2RsaXN0X19tZWRpYVwiLFwicnVsZVwiOlwidmFyIGQgPSBbXTtcXG52YXIgbGlzdCA9IHBkZmEoZ2V0UmVzQ29kZSgpLCAnI3NlYXJjaExpc3QmJmxpJyk7XFxuaWYgKGxpc3QubGVuZ3RoID09IDApIHRocm93IFxcXCLmkJzntKLkuLrnqbrvvIzlj6/og73ljLnphY3plJnor69cXFwiXFxuZm9yICh2YXIgaiBpbiBsaXN0KSB7XFxuICAgIGQucHVzaCh7XFxuICAgICAgICB0aXRsZTogcGRmaChsaXN0W2pdLCAnYSYmdGl0bGUnKSxcXG4gICAgICAgIGRlc2M6IHBkZmgobGlzdFtqXSwgJy5waWMtdGV4dCYmVGV4dCcpLFxcbiAgICAgICAgcGljX3VybDogcGQobGlzdFtqXSwgJ2EmJmRhdGEtb3JpZ2luYWwnKSxcXG4gICAgICAgIGNvbnRlbnQ6IHBkZmgobGlzdFtqXSwgJy5kZXRhaWwtLWg0JiZUZXh0JyksXFxuICAgICAgICB1cmw6IHBkKGxpc3Rbal0sICdhJiZocmVmJykrJyNpbW1lcnNpdmVUaGVtZSMnXFxuICAgIH0pXFxufVxcbnNldFJlc3VsdChkKVwifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwi5LiA57qndm9kbGlzdFwiLFwicGF0aFwiOlwidm9kbGlzdFwiLFwicnVsZVwiOlwidmFyIGQgPSBbXTtcXG5NWV9SVUxFLnVybC5tYXRjaCgvZnlwYWdlLylbMF1cXG52YXIgbGlzdCA9IHBkZmEoZ2V0UmVzQ29kZSgpLCAnLnZvZGxpc3QmJmxpJyk7XFxuZm9yICh2YXIgaiBpbiBsaXN0KSB7XFxuICBkLnB1c2goe1xcbiAgICAgICB0aXRsZTogcGRmaChsaXN0W2pdLCAnYSYmdGl0bGUnKSxcXG4gICAgICAgZGVzYzogcGRmaChsaXN0W2pdLCAnYSYmVGV4dCcpLFxcbiAgICAgICBwaWNfdXJsOiBwZChsaXN0W2pdLCAnLmxhenlsb2FkJiZkYXRhLW9yaWdpbmFsJykrJ0BSZWZlcmVyPScsXFxuICAgICAgIHVybDogcGQobGlzdFtqXSwnYSYmaHJlZicpICsgJyNpbW1lcnNpdmVUaGVtZSMnXFxuICB9KTtcXG59XFxuc2V0UmVzdWx0KGQpO1wifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwi5LqM57qnbW8tcGxheS1sb2FkXCIsXCJwYXRoXCI6XCJtby1wbGF5LWxvYWRcIixcInJ1bGVcIjpcInZhciBkID0gW107XFxudmFyIGh0bWwgPSBnZXRSZXNDb2RlKCk7XFxuXFxuZC5wdXNoKHtcXG4gICAgdGl0bGU6IHBkZmgoaHRtbCwgJy52aWRlby1pbmZvLWl0ZW1zLDImJlRleHQnKVxcbiAgLnJlcGxhY2UoJ+WIhuexu3wnLCAnJylcXG4gIC5yZXBsYWNlKCflnLDljLrvvJonLCAnJylcXG4gIC5yZXBsYWNlKCflubTku73vvJonLCAnICcpLnN1YnN0cmluZygwLCAxOCkgKyAnXFxcXG4nICsgJ1xcXFxuJyArIFxcbiAgcGRmaChodG1sLCAnLnZpZGVvLWluZm8taXRlbXMsMSYmVGV4dCcpLnN1YnN0cmluZygwLCAxOCksXFxuICAgIHBpY191cmw6IHBkKGh0bWwsICcubGF6eWxvYWQmJmRhdGEtc3JjJyksXFxuICAgIHVybDogTVlfVVJMLFxcbiAgICBjb2xfdHlwZTogJ21vdmllXzFfdmVydGljYWxfcGljX2JsdXInXFxufSk7XFxuXFxudmFyIOe6v+i3ryA9ICdib2R5JiYubW9kdWxlLXRhYi1jb250ZW50JiYubW9kdWxlLXRhYi1pdGVtJ1xcbnZhciDpgInpm4YgPSAnYm9keSYmLnNvcnQtaXRlbSdcXG52YXIg57q/6Lev5ZCNID0gJ3NwYW4mJlRleHQnXFxudmFyIOmAiembhuWIl+ihqCA9ICdib2R5JiZhJ1xcbmV2YWwoSlNPTi5wYXJzZShyZXF1ZXN0KCdoaWtlcjovL3BhZ2UvZXJqaT9ydWxlPeaooeadv8K3UScpKS5ydWxlKVxcbnNldFJlc3VsdChkKTtcIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIuS6jOe6p25hdi10YWJzMVwiLFwicGF0aFwiOlwibmF2LXRhYnMxXCIsXCJydWxlXCI6XCJ2YXIgZCA9IFtdO1xcbnZhciBodG1sID0gZ2V0UmVzQ29kZSgpO1xcblxcbmQucHVzaCh7XFxuICAgIHRpdGxlOiBwZGZoKGh0bWwsICdwLDEmJlRleHQnKVxcbiAgICAgICAgLnJlcGxhY2UoJ+exu+Wei++8micsICcnKVxcbiAgICAgICAgLnJlcGxhY2UoJ+WcsOWMuu+8micsICcgJylcXG4gICAgICAgIC5yZXBsYWNlKCflubTku73vvJonLCAnJylcXG4gICAgICAgIC5yZXBsYWNlKCfor63oqIDvvJonLCAnJykgK1xcbiAgICAgICAgJ1xcXFxuXFxcXG4nICsgcGRmaChodG1sLCAncCw0JiZUZXh0JylcXG4gICAgICAgIC5zdWJzdHJpbmcoMCwgMzApLFxcbiAgICBkZXNjOiBwZGZoKGh0bWwsICdwLDImJlRleHQnKSxcXG4gICAgcGljX3VybDogcGQoaHRtbCwgJy5sYXp5bG9hZCYmZGF0YS1vcmlnaW5hbCcpLFxcbiAgICB1cmw6IE1ZX1VSTCxcXG4gICAgY29sX3R5cGU6ICdtb3ZpZV8xX3ZlcnRpY2FsX3BpY19ibHVyJ1xcbn0pO1xcblxcbnZhciDnur/ot68gPSAnLm5hdi10YWJzJiZhJ1xcbnZhciDpgInpm4YgPSAnYm9keSYmLnN0dWktY29udGVudF9fcGxheWxpc3QnXFxudmFyIOe6v+i3r+WQjSA9ICdhJiZUZXh0J1xcbnZhciDpgInpm4bliJfooaggPSAndWwmJmxpJ1xcbmV2YWwoSlNPTi5wYXJzZShyZXF1ZXN0KCdoaWtlcjovL3BhZ2UvZXJqaT9ydWxlPeaooeadv8K3UScpKS5ydWxlKVxcbnNldFJlc3VsdChkKTtcIn0se1wiY29sX3R5cGVcIjpcImZsZXhfYnV0dG9uXCIsXCJuYW1lXCI6XCLlrprkvY3kuoznuqdcIixcInBhdGhcIjpcImVyamlcIixcInJ1bGVcIjpcIigoKSA9PiB7XFxuICAgICBkID0gdHlwZW9mIGQgPT09ICd1bmRlZmluZWQnID8gW10gOiBkXFxuICAgIHZhciB0YWJzID0gcGRmYShodG1sLCDnur/ot68pLm1hcChkYXRhID0+IHtcXG4gICAgbGV0IHRhYlRleHQgPSBwZGZoKGRhdGEsIOe6v+i3r+WQjSk7XFxuICAgIHJldHVybiAodHlwZW9mIOaOkumZpCAhPT0gJ3VuZGVmaW5lZCcgJiYg5o6S6ZmkKSA/XFxuICAgICAgICB0YWJUZXh0LnJlcGxhY2UobmV3IFJlZ0V4cCjmjpLpmaQsIFxcXCJnXFxcIiksIFxcXCJcXFwiKSA6XFxuICAgICAgICB0YWJUZXh0O1xcbn0pO1xcblxcbnZhciBsaXN0cyA9IHBkZmEoaHRtbCwg6YCJ6ZuGKS5tYXAoZGF0YSA9PiBwZGZhKGRhdGEsIOmAiembhuWIl+ihqCkpO1xcbmFkZExpc3RlbmVyKFxcXCJvbkNsb3NlXFxcIiwgJC50b1N0cmluZygoKSA9PiBjbGVhck15VmFyKFxcXCJsaXN0c1xcXCIpKSk7XFxuc3RvcmFnZTAucHV0TXlWYXIoXFxcImxpc3RzXFxcIiwgbGlzdHMpO1xcblxcbmlmICh0eXBlb2YgbGF6eSA9PT0gJ3VuZGVmaW5lZCcpIHtcXG4gICAgbGF6eSA9ICQoJycpLmxhenlSdWxlKCgpID0+IHtcXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgdmFyIGh0bWwgPSBKU09OLnBhcnNlKHJlcXVlc3QoaW5wdXQpLm1hdGNoKC9yIHBsYXllcl8uKj89KC4qPyk8LylbMV0pXFxuICAgICAgICAgICAgdmFyIHVybCA9IGh0bWwudXJsXFxuICAgICAgICAgICAgaWYgKGh0bWwuZW5jcnlwdCA9PSAnMScpIHtcXG4gICAgICAgICAgICAgICAgdXJsID0gdW5lc2NhcGUodXJsKTtcXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGh0bWwuZW5jcnlwdCA9PSAnMicpIHtcXG4gICAgICAgICAgICAgICAgdXJsID0gdW5lc2NhcGUoYmFzZTY0RGVjb2RlKHVybCkpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBpZiAoL20zdTh8bXA0Ly50ZXN0KHVybCkpIHtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVybFxcbiAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgIHJldHVybiAndmlkZW86Ly8nICsgaW5wdXRcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9IGNhdGNoIChlKSB7XFxuICAgICAgICAgICAgcmV0dXJuICd2aWRlbzovLycgKyBpbnB1dFxcbiAgICAgICAgfVxcbiAgICB9KVxcbn1cXG5cXG5jb25zdCBjdXJyZW50TGluZSA9IGdldE15VmFyKE1ZX1VSTCwgJzAnKTtcXG52YXIgc29ydE9yZGVyID0gZ2V0TXlWYXIoTVlfVVJMICsgXFxcIueroOiKguaOkuW6j1xcXCIsICcjMWFhZDE5XFxcIj7mraPluo8nKTtcXG52YXIgc29ydExhYmVsID0gc29ydE9yZGVyID09ICcjRkYwMDAwXFxcIj7lgJLluo8nID9cXG4gICAgJyMxYWFkMTlcXFwiPuato+W6jycgOiAnI0ZGMDAwMFxcXCI+5YCS5bqPJztcXG52YXIgc29ydFRpdGxlID0gJ+KAnOKAnOKAneKAnTxiPjxzcGFuIHN0eWxlPVxcXCJjb2xvcjrmjpLluo88L3NwYW4+PC9iPic7XFxuXFxudmFyIFRW5o6o6YCBID0gKHRhYnMsIGxpc3RzLCBkKSA9PiAkLnRvU3RyaW5nKCh0YWJzLCBsaXN0cywgZCkgPT4ge1xcbiAgICB2YXIg5o6o6YCBID0ge1xcbiAgICAgICAgXFxcIm5hbWVcXFwiOiBnZXRQYWdlVGl0bGUoKSxcXG4gICAgICAgIFxcXCJjb250ZW50XFxcIjogZC5kZXNjLFxcbiAgICAgICAgXFxcInBpY1xcXCI6IGQuaW1nIHx8IGQucGljX3VybCxcXG4gICAgICAgIFxcXCJmcm9tXFxcIjogdGFicy5qb2luKCckJCQnKSxcXG4gICAgICAgIFxcXCJ1cmxcXFwiOiBzdG9yYWdlMC5nZXRNeVZhcihcXFwibGlzdHNcXFwiKS5tYXAobGkgPT4gbGkubWFwKGxpMSA9PiBwZGZoKGxpMSwgJ1RleHQnKSArICckJyArIHBkKGxpMSwgJ2EmJmhyZWYnKSkuam9pbignIycpKS5qb2luKCckJCQnKVxcbiAgICB9O1xcbiAgICByZXR1cm4gXFxcImhpa2VyOi8vcGFnZS9wdXNoP3J1bGU9WFlR5o6o6YCBJnB1c2h1cmw9XFxcIiArIGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeSjmjqjpgIEpKTtcXG59LCB0YWJzLCBsaXN0cywgZCk7XFxuXFxuZC5wdXNoKHtcXG4gICAgdGl0bGU6ICfigJzigJzigJ3igJ08Yj48c3BhbiBzdHlsZT1cXFwiY29sb3I6ICcgKyBzb3J0T3JkZXIgKyAnPC9zcGFuPjwvYj4nLFxcbiAgICB1cmw6ICQoXFxcIiNub0xvYWRpbmcjXFxcIikubGF6eVJ1bGUoKHRhYnMsIHNvcnRUaXRsZSwgbGF6eSwgZCwgVFbmjqjpgIEpID0+IHtcXG4gICAgICAgIGNvbnN0IGxpc3RzID0gc3RvcmFnZTAuZ2V0TXlWYXIoXFxcImxpc3RzXFxcIik7XFxuICAgICAgICBjb25zdCBjdXJyZW50TGluZSA9IGdldE15VmFyKE1ZX1VSTCwgJzAnKTtcXG4gICAgICAgIGNvbnN0IHNvcnRPcmRlciA9IGdldE15VmFyKE1ZX1VSTCArIFxcXCLnq6DoioLmjpLluo9cXFwiLCAnIzFhYWQxOVxcXCI+5q2j5bqPJyk7XFxuICAgICAgICBjb25zdCBuZXdMYWJlbCA9IHNvcnRPcmRlciA9PSAnI0ZGMDAwMFxcXCI+5YCS5bqPJyA/XFxuICAgICAgICAgICAgJyMxYWFkMTlcXFwiPuato+W6jycgOiAnI0ZGMDAwMFxcXCI+5YCS5bqPJztcXG5cXG4gICAgICAgIHVwZGF0ZUl0ZW0oe1xcbiAgICAgICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgICAgIGlkOiBNWV9VUkwgKyBcXFwiX+aOkuW6j1xcXCIsXFxuICAgICAgICAgICAgICAgIGxvbmdDbGljazogW3tcXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcXFwiVFZib3jmjqjpgIFcXFwiLFxcbiAgICAgICAgICAgICAgICAgICAganM6IFRW5o6o6YCBKHRhYnMsIGxpc3RzLCBkKVxcbiAgICAgICAgICAgICAgICB9XVxcbiAgICAgICAgICAgIH0sXFxuICAgICAgICAgICAgdGl0bGU6IHNvcnRUaXRsZS5yZXBsYWNlKCfmjpLluo8nLCBuZXdMYWJlbClcXG4gICAgICAgIH0pO1xcblxcbiAgICAgICAgbGV0IGNoYXB0ZXJzID0gbGlzdHNbY3VycmVudExpbmVdO1xcbiAgICAgICAgaWYgKHNvcnRPcmRlciA9PSAnIzFhYWQxOVxcXCI+5q2j5bqPJykge1xcbiAgICAgICAgICAgIGNoYXB0ZXJzLnJldmVyc2UoKTtcXG4gICAgICAgIH1cXG5cXG4gICAgICAgIGxldCBjaGFwdGVySXRlbXMgPSBjaGFwdGVycy5tYXAoZGF0YSA9PiAoe1xcbiAgICAgICAgICAgIHRpdGxlOiBwZGZoKGRhdGEsICdhJiZUZXh0JyksXFxuICAgICAgICAgICAgdXJsOiBwZChkYXRhLCAnYSYmaHJlZicpICsgbGF6eSxcXG4gICAgICAgICAgICBjb2xfdHlwZTogY2hhcHRlcnMubGVuZ3RoID4gMyA/ICd0ZXh0XzQnIDogJ3RleHRfMicsXFxuICAgICAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICAgICAgY2xzOiBNWV9VUkwgKyBcXFwiX+mAiembhlxcXCIsXFxuICAgICAgICAgICAgICAgIGlkOiBwZChkYXRhLCAnYSYmaHJlZicpXFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSkpO1xcblxcbiAgICAgICAgZGVsZXRlSXRlbUJ5Q2xzKE1ZX1VSTCArIFxcXCJf6YCJ6ZuGXFxcIik7XFxuICAgICAgICBhZGRJdGVtQmVmb3JlKE1ZX1VSTCArIFxcXCJmb290ZXJcXFwiLCBjaGFwdGVySXRlbXMpO1xcbiAgICAgICAgcHV0TXlWYXIoTVlfVVJMICsgXFxcIueroOiKguaOkuW6j1xcXCIsIG5ld0xhYmVsKTtcXG4gICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgIH0sIHRhYnMsIHNvcnRUaXRsZSwgbGF6eSwgZFswXSwgVFbmjqjpgIEpLFxcbiAgICBjb2xfdHlwZTogJ2ZsZXhfYnV0dG9uJyxcXG4gICAgZXh0cmE6IHtcXG4gICAgICAgIGlkOiBNWV9VUkwgKyBcXFwiX+aOkuW6j1xcXCIsXFxuICAgICAgICBsb25nQ2xpY2s6IFt7XFxuICAgICAgICAgICAgdGl0bGU6IFxcXCJUVmJveOaOqOmAgVxcXCIsXFxuICAgICAgICAgICAganM6IFRW5o6o6YCBKHRhYnMsIGxpc3RzLCBkWzBdKVxcbiAgICAgICAgfV1cXG4gICAgfVxcbn0pO1xcblxcblxcbnRhYnMuZm9yRWFjaCgodGFiTmFtZSwgaWQpID0+IHtcXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBjdXJyZW50TGluZSA9PSBpZCA/IGDigJzigJwke3RhYk5hbWV94oCd4oCdYCA6IHRhYk5hbWUsXFxuICAgICAgICB1cmw6ICQoXFxcIiNub0xvYWRpbmcjXFxcIikubGF6eVJ1bGUoKOe6v+i3r+WIl+ihqCwgbGF6eSwgaWQpID0+IHtcXG4gICAgICAgICAgICBjb25zdCBsaXN0cyA9IHN0b3JhZ2UwLmdldE15VmFyKFxcXCJsaXN0c1xcXCIpO1xcbiAgICAgICAgICAgIOe6v+i3r+WIl+ihqC5mb3JFYWNoKChuYW1lLCB4aWQpID0+IHVwZGF0ZUl0ZW0oe1xcbiAgICAgICAgICAgICAgICB0aXRsZTogaWQgPT0geGlkID8gYOKAnOKAnCR7bmFtZX3igJ3igJ1gIDogbmFtZSxcXG4gICAgICAgICAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICAgICAgICAgIGlkOiBgJHtNWV9VUkx9X+e6v+i3ryR7eGlkfWBcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH0pKTtcXG5cXG4gICAgICAgICAgICBwdXRNeVZhcihNWV9VUkwsIGlkKTtcXG4gICAgICAgICAgICBsZXQgY2hhcHRlcnMgPSBsaXN0c1tnZXRNeVZhcihNWV9VUkwsICcwJyldO1xcbiAgICAgICAgICAgIGlmIChnZXRNeVZhcihNWV9VUkwgKyBcXFwi56ug6IqC5o6S5bqPXFxcIiwgJyMxYWFkMTlcXFwiPuato+W6jycpID09ICcjRkYwMDAwXFxcIj7lgJLluo8nKSB7XFxuICAgICAgICAgICAgICAgIGNoYXB0ZXJzLnJldmVyc2UoKTtcXG4gICAgICAgICAgICB9XFxuXFxuICAgICAgICAgICAgbGV0IGNoYXB0ZXJJdGVtcyA9IGNoYXB0ZXJzLm1hcChkYXRhID0+ICh7XFxuICAgICAgICAgICAgICAgIHRpdGxlOiBwZGZoKGRhdGEsICdhJiZUZXh0JyksXFxuICAgICAgICAgICAgICAgIHVybDogcGQoZGF0YSwgJ2EmJmhyZWYnKSArIGxhenksXFxuICAgICAgICAgICAgICAgIGNvbF90eXBlOiBjaGFwdGVycy5sZW5ndGggPiAzID8gJ3RleHRfNCcgOiAndGV4dF8yJyxcXG4gICAgICAgICAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICAgICAgICAgIGNsczogTVlfVVJMICsgXFxcIl/pgInpm4ZcXFwiLFxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHBkKGRhdGEsICdhJiZocmVmJylcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH0pKTtcXG5cXG4gICAgICAgICAgICBkZWxldGVJdGVtQnlDbHMoTVlfVVJMICsgXFxcIl/pgInpm4ZcXFwiKTtcXG4gICAgICAgICAgICBhZGRJdGVtQmVmb3JlKE1ZX1VSTCArIFxcXCJmb290ZXJcXFwiLCBjaGFwdGVySXRlbXMpO1xcbiAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgICAgICB9LCB0YWJzLCBsYXp5LCBpZCksXFxuICAgICAgICBjb2xfdHlwZTogJ2ZsZXhfYnV0dG9uJyxcXG4gICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgaWQ6IGAke01ZX1VSTH1f57q/6LevJHtpZH1gXFxuICAgICAgICB9XFxuICAgIH0pO1xcbn0pO1xcblxcbmxldCBjdXJyZW50Q2hhcHRlcnMgPSBsaXN0c1tjdXJyZW50TGluZV07XFxuaWYgKHNvcnRPcmRlciA9PSAnI0ZGMDAwMFxcXCI+5YCS5bqPJykge1xcbiAgICBjdXJyZW50Q2hhcHRlcnMucmV2ZXJzZSgpO1xcbn1cXG5cXG5jdXJyZW50Q2hhcHRlcnMuZm9yRWFjaChkYXRhID0+IHtcXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBwZGZoKGRhdGEsICdhJiZUZXh0JyksXFxuICAgICAgICB1cmw6IHBkKGRhdGEsICdhJiZocmVmJykgKyBsYXp5LFxcbiAgICAgICAgY29sX3R5cGU6IGN1cnJlbnRDaGFwdGVycy5sZW5ndGggPiAzID8gJ3RleHRfNCcgOiAndGV4dF8yJyxcXG4gICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgY2xzOiBNWV9VUkwgKyBcXFwiX+mAiembhlxcXCIsXFxuICAgICAgICAgICAgaWQ6IHBkKGRhdGEsICdhJiZocmVmJylcXG4gICAgICAgIH1cXG4gICAgfSk7XFxufSk7XFxuXFxuc2V0TGFzdENoYXB0ZXJSdWxlKCdqczonICsgJC50b1N0cmluZygo6YCJ6ZuGLCDpgInpm4bliJfooagpID0+XFxuICAgIHNldFJlc3VsdCgn5pu05paw6IezOiDnrKwnICtcXG4gICAgICAgIHBkZmEoZ2V0UmVzQ29kZSgpLCDpgInpm4YpLm1hcChkID0+XFxuICAgICAgICAgICAgcGRmYShkLCDpgInpm4bliJfooagpLmxlbmd0aFxcbiAgICAgICAgKS5zb3J0KChhLCBiKSA9PiBiIC0gYSlbMF0gKyBcXFwi6ZuGXFxcIiksIOmAiembhiwg6YCJ6ZuG5YiX6KGoKSk7XFxuXFxuZC5wdXNoKHtcXG4gICAgY29sX3R5cGU6IFxcXCJiaWdfYmxhbmtfYmxvY2tcXFwiLFxcbiAgICBleHRyYToge1xcbiAgICAgICAgaWQ6IE1ZX1VSTCArIFxcXCJmb290ZXJcXFwiXFxuICAgIH1cXG59KVxcbnNldFJlc3VsdChkKVxcbn0pKClcIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIuS6jOe6p3BsYXlfc291cmNlX3RhYlwiLFwicGF0aFwiOlwicGxheV9zb3VyY2VfdGFiXCIsXCJydWxlXCI6XCJ2YXIgZCA9IFtdO1xcbnZhciBodG1sID0gZ2V0UmVzQ29kZSgpO1xcblxcbmQucHVzaCh7XFxuICAgIHRpdGxlOiBwZGZoKGh0bWwsICcucmVtYXJrcyYmVGV4dCcpICtcXG4gICAgICAgICdcXFxcbicgKyBwZGZoKGh0bWwsICcucy10b3AtaW5mby1kZXRhaWwmJmEmJlRleHQnKSArXFxuICAgICAgICBwZGZoKGh0bWwsICcucy10b3AtaW5mby1kZXRhaWwmJmEsMSYmVGV4dCcpICtcXG4gICAgICAgIHBkZmgoaHRtbCwgJy5zLXRvcC1pbmZvLWRldGFpbCYmYSwyJiZUZXh0JykgK1xcbiAgICAgICAgJ1xcXFxu4oCc4oCc566A5LuL77ya5LiN6IO955So5bCx5Yig5o6J5ZCn4oCd4oCdJyxcXG4gICAgZGVzYzogcGRmaChodG1sLCAnLmRlc2NfdHh0JiZUZXh0Jykuc3Vic3RyaW5nKDAsIDIwKSxcXG4gICAgaW1nOiBwZChodG1sLCAnLmltZy1jb3Zlcnx8LnZvZC1kZXRhaWwtYmomJnNyYycpLFxcbiAgICB1cmw6IE1ZX1VSTCxcXG4gICAgY29sX3R5cGU6ICdtb3ZpZV8xX3ZlcnRpY2FsX3BpY19ibHVyJ1xcbn0pO1xcbnZhciDnur/ot68gPSAnLnBsYXlfc291cmNlX3RhYiYmYSdcXG52YXIg6YCJ6ZuGID0gJ2JvZHkmJi5wbGF5ZXJfbGlzdHx8I3BsYXlsaXN0Ym94fHwjcGxheXN4J1xcbnZhciDnur/ot6/lkI0gPSAnYSYmVGV4dCdcXG52YXIg6YCJ6ZuG5YiX6KGoID0gJ3VsJiZsaSdcXG5ldmFsKEpTT04ucGFyc2UocmVxdWVzdCgnaGlrZXI6Ly9wYWdlL2Vyamk/cnVsZT3mqKHmnb/Ct1EnKSkucnVsZSlcXG5zZXRSZXN1bHQoZCk7XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCLkuoznuqdmZWQtcGxheS1pdGVtXCIsXCJwYXRoXCI6XCJmZWQtcGxheS1pdGVtXCIsXCJydWxlXCI6XCJ2YXIgZCA9IFtdO1xcbnZhciBodG1sID0gZ2V0UmVzQ29kZSgpO1xcblxcbmQucHVzaCh7XFxuICAgIHRpdGxlOiBwZGZoKGh0bWwsICdkZCYmbGksMyYmVGV4dCcpICtcXG4gICAgICAgICdcXFxcbicgKyBwZGZoKGh0bWwsICdkZCYmbGksNCYmVGV4dCcpXFxuICAgICAgICAuc3Vic3RyaW5nKDAsIDE1KSArICdcXFxcbicgK1xcbiAgICAgICAgcGRmaChodG1sLCAnZGQmJmxpLDUmJlRleHQnKVxcbiAgICAgICAgLnN1YnN0cmluZygwLCAxNSksXFxuICAgIGRlc2M6IHBkZmgoaHRtbCwgJ2RkJiZsaSw2JiZUZXh0Jykuc3Vic3RyaW5nKDAsIDI1KSxcXG4gICAgcGljX3VybDogcGQoaHRtbCwgJy5mZWQtbGF6eSYmZGF0YS1vcmlnaW5hbCcpLFxcbiAgICB1cmw6IE1ZX1VSTCxcXG4gICAgY29sX3R5cGU6ICdtb3ZpZV8xX3ZlcnRpY2FsX3BpYydcXG59KTtcXG52YXIg57q/6LevID0gJ2JvZHkmJi5mZWQtZHJvcC1idG5zJ1xcbnZhciDpgInpm4YgPSAnYm9keSYmLmZlZC1wbGF5LWl0ZW0nXFxudmFyIOe6v+i3r+WQjSA9ICdhJiZUZXh0J1xcbnZhciDpgInpm4bliJfooaggPSAnYm9keSYmLmZlZC1idG5zLWluZm8nXFxuZXZhbChKU09OLnBhcnNlKHJlcXVlc3QoJ2hpa2VyOi8vcGFnZS9lcmppP3J1bGU95qih5p2/wrdRJykpLnJ1bGUpXFxuc2V0UmVzdWx0KGQpO1wifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwi5pCc57SiZGxcIixcInBhdGhcIjpcImRsXCIsXCJydWxlXCI6XCJ2YXIgZCA9IFtdO1xcbnZhciBsaXN0ID0gcGRmYShnZXRSZXNDb2RlKCksICdib2R5JiZkbCcpO1xcbmxvZygn5pCc57Si57uT5p6cJylcXG5sb2cobGlzdClcXG5pZiAobGlzdC5sZW5ndGggPT0gMCkgdGhyb3cgXFxcIuaQnOe0ouS4uuepuu+8jOWPr+iDveWMuemFjemUmeivr1xcXCJcXG5mb3IgKHZhciBqIGluIGxpc3QpIHtcXG4gIGQucHVzaCh7XFxuICAgICAgIHRpdGxlOiBwZGZoKGxpc3Rbal0sICdoMSYmVGV4dCcpLFxcbiAgICAgICBkZXNjOiBwZGZoKGxpc3Rbal0sICcuZmVkLWxpc3QtcmVtYXJrcyYmVGV4dCcpLFxcblxcdCAgICBjb250ZW50OiBwZGZoKGxpc3Rbal0sICcuZmVkLXBhcnQtZXNhbi0tc3BhbiYmVGV4dCcpLFxcbiAgICAgICBpbWc6IHBkKGxpc3Rbal0sICdhJiZkYXRhLW9yaWdpbmFsJyksXFxuICAgICAgIHVybDogcGQobGlzdFtqXSwgJ2EmJmhyZWYnKVxcbiAgfSk7XFxufVxcbnNldFJlc3VsdChkKVwifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwiI01hcHBpbmdcIixcInBhdGhcIjpcIk1hcHBpbmdcIixcInJ1bGVcIjpcImpzOlxcbiQuZXhwb3J0cyA9IHtcXG4gICAgXFxcImhvbWVcXFwiOiBbe1xcbiAgICAgICAgICAgIGtleXM6IFtcXFwiIGIgXFxcIl0sXFxuICAgICAgICAgICAgdXJsOiBcXFwiLmJcXFwiLFxcbiAgICAgICAgICAgIC8vICAgICBhbGxLZXk6IHRydWUsXFxuICAgICAgICB9LFxcbiAgICAgICAge1xcbiAgICAgICAgICAgIGtleXM6IFtcXFwibmF2LXRhYnNcXFwiXSxcXG4gICAgICAgICAgICB1cmw6IFxcXCJuYXYtdGFic1xcXCIsXFxuICAgICAgICB9LFxcbiAgICAgICAge1xcbiAgICAgICAgICAgIGtleXM6IFtcXFwibXl1aS1jb250ZW50X19saXN0XFxcIl0sXFxuICAgICAgICAgICAgdXJsOiBcXFwibXl1aS1jb250ZW50X19saXN0XFxcIixcXG4gICAgICAgIH0sXFxuICAgICAgICB7XFxuICAgICAgICAgICAga2V5czogW1xcXCJuYXYtdGFic1xcXCIsIFxcXCJzdHVpLWNvbnRlbnRfX3BsYXlsaXN0XFxcIl0sXFxuICAgICAgICAgICAgdXJsOiBcXFwibmF2LXRhYnMxXFxcIixcXG4gICAgICAgICAgICBhbGxLZXk6IHRydWUsXFxuICAgICAgICB9LFxcbiAgICAgICAge1xcbiAgICAgICAgICAgIGtleXM6IFtcXFwiaDNcXFwiLCBcXFwic3R1aS1jb250ZW50X19wbGF5bGlzdFxcXCJdLFxcbiAgICAgICAgICAgIHVybDogXFxcImgzXFxcIixcXG4gICAgICAgICAgICBhbGxLZXk6IHRydWUsXFxuICAgICAgICB9LFxcbiAgICAgICAge1xcbiAgICAgICAgICAgIGtleXM6IFtcXFwibXl1aS12b2RsaXN0IFxcXCJdLFxcbiAgICAgICAgICAgIHVybDogXFxcIm15dWktdm9kbGlzdFxcXCIsXFxuICAgICAgICB9LFxcbiAgICAgICAge1xcbiAgICAgICAgICAgIGtleXM6IFtcXFwibW8tbW92cy1pdGVtXFxcIl0sXFxuICAgICAgICAgICAgdXJsOiBcXFwibW8tbW92cy1pdGVtXFxcIixcXG4gICAgICAgIH0sXFxuICAgICAgICB7XFxuICAgICAgICAgICAga2V5czogW1xcXCJtb2R1bGUtdGFiLWl0ZW1cXFwiXSxcXG4gICAgICAgICAgICB1cmw6IFxcXCJtb2R1bGUtdGFiLWl0ZW1cXFwiLFxcbiAgICAgICAgICAgIC8vICAgICBhbGxLZXk6IHRydWUsXFxuICAgICAgICB9LHtcXG4gICAgICAgICAgICBrZXlzOiBbXFxcInktcGxheUxpc3RcXFwiXSxcXG4gICAgICAgICAgICB1cmw6IFxcXCJ5LXBsYXlMaXN0XFxcIixcXG4gICAgICAgIH0sXFxuICAgICAgICB7XFxuICAgICAgICAgICAga2V5czogW1xcXCJzdHVpLXZvZGxpc3QgXFxcIl0sXFxuICAgICAgICAgICAgdXJsOiBcXFwic3R1aS12b2RsaXN0XFxcIixcXG4gICAgICAgICAgICAvLyAgICAgYWxsS2V5OiB0cnVlLFxcbiAgICAgICAgfSxcXG4gICAgICAgIHtcXG4gICAgICAgICAgICBrZXlzOiBbXFxcInBsYXlfc291cmNlX3RhYlxcXCJdLFxcbiAgICAgICAgICAgIHVybDogXFxcInBsYXlfc291cmNlX3RhYlxcXCIsXFxuICAgICAgICB9LFxcbiAgICAgICAge1xcbiAgICAgICAgICAgIGtleXM6IFtcXFwiZmVkLXBsYXktaXRlbVxcXCJdLFxcbiAgICAgICAgICAgIHVybDogXFxcImZlZC1wbGF5LWl0ZW1cXFwiLFxcbiAgICAgICAgfSxcXG4gICAgICAgIHtcXG4gICAgICAgICAgICBrZXlzOiBbXFxcIm1vZHVsZS1pdGVtXFxcIl0sXFxuICAgICAgICAgICAgdXJsOiBcXFwibW9kdWxlLWl0ZW1zXFxcIixcXG4gICAgICAgIH0sXFxuICAgICAgICB7XFxuICAgICAgICAgICAga2V5czogW1xcXCJ2b2RsaXN0IFxcXCIsIFxcXCJsYXp5bG9hZFxcXCJdLFxcbiAgICAgICAgICAgIHVybDogXFxcInZvZGxpc3RcXFwiLFxcbiAgICAgICAgICAgIGFsbEtleTogdHJ1ZSxcXG4gICAgICAgIH0sXFxuICAgICAgICB7XFxuICAgICAgICAgICAga2V5czogW1xcXCJtby1wbGF5LWxvYWRcXFwiXSxcXG4gICAgICAgICAgICB1cmw6IFxcXCJtby1wbGF5LWxvYWRcXFwiLFxcbiAgICAgICAgfSxcXG4gICAgICAgIHtcXG4gICAgICAgICAgICBrZXlzOiBbXFxcImZlZC1saXN0LXRpdGxlXFxcIl0sXFxuICAgICAgICAgICAgdXJsOiBcXFwiZmVkLWxpc3QtdGl0bGVcXFwiLFxcbiAgICAgICAgICAgIC8vYWxsS2V5OiB0cnVlLFxcbiAgICAgICAgfSxcXG4gICAgICAgIHtcXG4gICAgICAgICAgICBrZXlzOiBbXFxcInBhY2steWtwYWNrXFxcXFxcXCJcXFwiXSxcXG4gICAgICAgICAgICB1cmw6IFxcXCJwYWNrLXlrcGFja1xcXCIsXFxuICAgICAgICB9LFxcbiAgICAgICAgLypcXG4gICAgICAgICAgICAgICAge1xcbiAgICAgICAgICAgICAgICAgICAga2V5czogW1xcXCJpdGVtXFxcIl0sXFxuICAgICAgICAgICAgICAgICAgICB1cmw6IFxcXCJpdGVtXFxcIixcXG4gICAgICAgICAgICAgICAgfSwqL1xcbiAgICAgICAge1xcbiAgICAgICAgICAgIGtleXM6IFtcXFwiZGF0YV9saXN0XFxcIl0sXFxuICAgICAgICAgICAgdXJsOiBcXFwiZGF0YV9saXN0XFxcIixcXG4gICAgICAgIH0sXFxuICAgIF0sXFxuICAgIFxcXCJzZWFyY2hcXFwiOiBbe1xcbiAgICAgICAgICAgIGtleXM6IFtcXFwic3R1aS12b2RsaXN0X19tZWRpYVxcXCJdLFxcbiAgICAgICAgICAgIHVybDogXFxcInN0dWktdm9kbGlzdF9fbWVkaWFcXFwiLFxcbiAgICAgICAgfSxcXG4gICAgICAgIHtcXG4gICAgICAgICAgICBrZXlzOiBbXFxcIm15dWktdm9kbGlzdF9fbWVkaWFcXFwiXSxcXG4gICAgICAgICAgICB1cmw6IFxcXCJteXVpLXZvZGxpc3RfX21lZGlhXFxcIixcXG4gICAgICAgIH0sXFxuICAgICAgICB7XFxuICAgICAgICAgICAga2V5czogW1xcXCJtb2R1bGUtc2VhcmNoLWl0ZW1cXFwiXSxcXG4gICAgICAgICAgICB1cmw6IFxcXCJtb2R1bGUtc2VhcmNoLWl0ZW1cXFwiLFxcbiAgICAgICAgfSxcXG4gICAgICAgIHtcXG4gICAgICAgICAgICBrZXlzOiBbXFxcInN0dWktdm9kbGlzdCBcXFwiXSxcXG4gICAgICAgICAgICB1cmw6IFxcXCJzdHVpLXZvZGxpc3RcXFwiLFxcbiAgICAgICAgICAgIC8vICAgICBhbGxLZXk6IHRydWUsXFxuICAgICAgICB9LFxcbiAgICAgICAge1xcbiAgICAgICAgICAgIGtleXM6IFtcXFwiZGwgXFxcIl0sXFxuICAgICAgICAgICAgdXJsOiBcXFwiZGxcXFwiLFxcbiAgICAgICAgICAgIGFsbEtleTogdHJ1ZSxcXG4gICAgICAgIH0sXFxuICAgICAgICB7XFxuICAgICAgICAgICAga2V5czogW1xcXCJtb2R1bGUtaXRlbXNcXFwiXSxcXG4gICAgICAgICAgICB1cmw6IFxcXCJtb2R1bGUtaXRlbXNcXFwiLFxcbiAgICAgICAgfSxcXG4gICAgXVxcbn1cIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIiNhdXRvXCIsXCJwYXRoXCI6XCJhdXRvXCIsXCJydWxlXCI6XCJqczpcXG5mdW5jdGlvbiBnZXRQYWdlU291cmNlKGtleSkge1xcbiAgICBsZXQgc3JjID0gcmVxdWVzdChcXFwiaGlrZXI6Ly9wYWdlL1xcXCIgKyBrZXkgKyBcXFwiP3J1bGU95qih5p2/wrdRXFxcIik7XFxuICAgIHNyYyA9IEpTT04ucGFyc2Uoc3JjKS5ydWxlO1xcbiAgICByZXR1cm4gc3JjO1xcbn1cXG5jb25zdCBzb3VyY2VNYXAgPSAkLnJlcXVpcmUoXFxcImhpa2VyOi8vcGFnZS9NYXBwaW5nP3J1bGU95qih5p2/wrdRXFxcIik7XFxuXFxuZnVuY3Rpb24gYXV0b1BhZ2UoaHRtbHNyYywgdHlwZSkge1xcbiAgICBsZXQgcGFnZVJ1bGVzID0gW10sXFxuICAgICAgICBodG1sU291cmNlID0gaHRtbHNyYyxcXG4gICAgICAgIHBhZ2VUeXBlLFxcbiAgICAgICAgbU1hcHBpbmc7XFxuICAgIGlmICh0eXBlICE9PSB1bmRlZmluZWQpIHtcXG4gICAgICAgIHBhZ2VUeXBlID0gdHlwZTtcXG4gICAgfSBlbHNlIHtcXG4gICAgICAgIHBhZ2VUeXBlID0gTVlfVFlQRTtcXG4gICAgfVxcbiAgICBtTWFwcGluZyA9IHNvdXJjZU1hcFtwYWdlVHlwZV07XFxuICAgIGlmIChtTWFwcGluZyA9PT0gdW5kZWZpbmVkIHx8ICFBcnJheS5pc0FycmF5KG1NYXBwaW5nKSkge1xcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxcXCLkuI3lrZjlnKhcXFwiICsgcGFnZVR5cGUgKyBcXFwi57G75Z6L55qE5qih5p2/XFxcIik7XFxuICAgIH1cXG4gICAgZm9yIChsZXQgaXRlbSBvZiBtTWFwcGluZykge1xcbiAgICAgICAgaWYgKGl0ZW0uYWxsS2V5KSB7XFxuICAgICAgICAgICAgaWYgKGl0ZW0ua2V5cy5ldmVyeShrZXkgPT4gaHRtbFNvdXJjZS5pbmNsdWRlcyhrZXkpKSkge1xcbiAgICAgICAgICAgICAgICBwYWdlUnVsZXMucHVzaChpdGVtKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgIGlmIChpdGVtLmtleXMuc29tZShrZXkgPT4gaHRtbFNvdXJjZS5pbmNsdWRlcyhrZXkpKSkge1xcbiAgICAgICAgICAgICAgICBwYWdlUnVsZXMucHVzaChpdGVtKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgIH1cXG4gICAgaWYocGFnZVJ1bGVzLmxlbmd0aCA9PSAwKSB7XFxuICAgICAgICBsb2coXFxcIuaaguaXoOWQiOmAgueahOaooeadv1xcXCIpO1xcbiAgICB9XFxuICAgIGZvciAobGV0IHBhZ2VSdWxlIG9mIHBhZ2VSdWxlcykge1xcbiAgICAgICAgbG9nKFxcXCLmraPlnKjljLnphY3vvJpcXFwiICsgcGFnZVJ1bGUudXJsKTtcXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgZXZhbC5jYWxsKG51bGwsIFxcXCI7KGZ1bmN0aW9uKCl7XFxcIiArIGdldFBhZ2VTb3VyY2UocGFnZVJ1bGUudXJsKSArIFxcXCJ9KSgpXFxcIik7XFxuICAgICAgICAgICAgbG9nKFxcXCLljLnphY3mqKHmnb/miJDlip/vvIzmraPlnKjnu5PmnZ/ljLnphY3ov5vnqItcXFwiKTtcXG4gICAgICAgICAgICBicmVhaztcXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcXG4gICAgICAgICAgICBsb2coXFxcIuWMuemFjeaooeadv+mUmeivr1xcXCIpO1xcbiAgICAgICAgICAgIGxvZyhlLnRvU3RyaW5nKCkpXFxuICAgICAgICAgICAgbG9nKFxcXCLmraPlnKjljLnphY3kuIvkuIDkuKrmqKHmnb8uLi4uLi5cXFwiKVxcbiAgICAgICAgICAgIGlmIChwYWdlUnVsZS51cmwgPT0gcGFnZVJ1bGVzW3BhZ2VSdWxlcy5sZW5ndGggLSAxXS51cmwpIHtcXG4gICAgICAgICAgICAgICAgbG9nKFxcXCLlt7LljLnphY3liLDmnIDlkI7kuIDkuKrmqKHmnb/vvIzmmoLml6DlkIjpgILnmoTmqKHmnb9cXFwiKTtcXG4gICAgICAgICAgICAgICAgc2V0UmVzdWx0KFtdKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgIH1cXG5cXG59XFxuJC5leHBvcnRzLmF1dG9QYWdlID0gYXV0b1BhZ2U7XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCLkuIDnuqdwYWNrLXlrcGFja1wiLFwicGF0aFwiOlwicGFjay15a3BhY2tcIixcInJ1bGVcIjpcInZhciBkID1bXTtcXG5NWV9SVUxFLnVybC5tYXRjaCgvZnlwYWdlLylbMF1cXG52YXIgbGlzdCA9IHBkZmEoZ2V0UmVzQ29kZSgpLCAnYm9keSYmLnBhY2steWtwYWNrJyk7XFxuZm9yICh2YXIgaiBpbiBsaXN0KSB7XFxuICBkLnB1c2goe1xcbiAgICAgICB0aXRsZTogcGRmaChsaXN0W2pdLCAnYSYmdGl0bGUnKSxcXG4gICAgICAgZGVzYzogcGRmaChsaXN0W2pdLCAnc3BhbiwtMSYmVGV4dCcpLFxcbiAgICAgICBpbWc6IHBkKGxpc3Rbal0sICcuZWNsYXp5JiZkYXRhLW9yaWdpbmFsJykrJ0BSZWZlcmVyPScsXFxuICAgICAgIHVybDogcGQobGlzdFtqXSwnYSYmaHJlZicpKyAnI2ltbWVyc2l2ZVRoZW1lIydcXG4gIH0pO1xcbn1cXG5zZXRSZXN1bHQoZCk7XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCLkuIDnuqdtb2R1bGUtaXRlbXNcIixcInBhdGhcIjpcIm1vZHVsZS1pdGVtc1wiLFwicnVsZVwiOlwiTVlfUlVMRS51cmwubWF0Y2goL2Z5cGFnZS8pWzBdXFxudmFyIGQgPSBbXVxcbnZhciBsaXN0ID0gcGRmYShnZXRSZXNDb2RlKCksICdib2R5JiYubW9kdWxlLWl0ZW0nKTtcXG5mb3IgKHZhciBqIGluIGxpc3QpIHtcXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBwZGZoKGxpc3Rbal0sICdzdHJvbmd8fGEmJlRleHR8fHRpdGxlJyksXFxuICAgICAgICBkZXNjOiBwZGZoKGxpc3Rbal0sICcubW9kdWxlLWl0ZW0tdGV4dHx8Lm1vZHVsZS1pdGVtLW5vdGUmJlRleHQnKSxcXG4gICAgICAgIHBpY191cmw6IHBkKGxpc3Rbal0sICdpbWd8fC5sYXp5JiZkYXRhLXNyY3x8ZGF0YS1vcmlnaW5hbHx8c3JjJykgKyAnQFJlZmVyZXI9JyxcXG4gICAgICAgIHVybDogcGQobGlzdFtqXSwgJ2EmJmhyZWYnKSArIFxcXCIjaW1tZXJzaXZlVGhlbWUjXFxcIlxcbiAgICB9KTtcXG59XFxuc2V0UmVzdWx0KGQpO1wifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwi5LqM57qnbW9kdWxlLXRhYi1pdGVtXCIsXCJwYXRoXCI6XCJtb2R1bGUtdGFiLWl0ZW1cIixcInJ1bGVcIjpcInZhciBkID0gW107XFxudmFyIGh0bWwgPSBnZXRSZXNDb2RlKCk7XFxuXFxudHJ5IHtcXG4gICAgdmFyIHRpdGxlID0gcGRmYShodG1sLCAnYm9keS0tYSYmLnRhZy1saW5rJyk7XFxufSBjYXRjaCAoZSkge1xcbiAgICB2YXIgdGl0bGUgPSAnJztcXG59XFxudmFyIFQgPSBbXTtcXG5mb3IgKHZhciBpIGluIHRpdGxlKSB7XFxuICAgIFQucHVzaChwZGZoKHRpdGxlW2ldLCAnYSYmVGV4dCcpKVxcbn1cXG5cXG5kLnB1c2goe1xcbiAgICB0aXRsZTogVC5qb2luKCcgICcpICsgJ1xcXFxuJyArXFxuICAgICAgICBwZGZoKGh0bWwsICcudmlkZW8taW5mby1pdGVtcywxJiZUZXh0JylcXG4gICAgICAgIC5zcGxpdCgnLycpLmpvaW4oJyAgJylcXG4gICAgICAgIC5zdWJzdHJpbmcoMCwgMjApICsgJ1xcXFxuJyArXFxuICAgICAgICBwZGZoKGh0bWwsICcudmlkZW8taW5mby1pdGVtcyYmVGV4dCcpXFxuICAgICAgICAuc3BsaXQoJy8nKS5qb2luKCcgICcpXFxuICAgICAgICAuc3Vic3RyaW5nKDAsIDIwKSxcXG4gICAgZGVzYzogcGRmaChodG1sLCAnLnZpZGVvLWluZm8taXRlbXMsMiYmVGV4dCcpLFxcbiAgICBpbWc6IHBkKGh0bWwsICcubGF6eWxvYWQmJmRhdGEtb3JpZ2luYWx8fGRhdGEtc3JjfHxzcmMnKSxcXG4gICAgdXJsOiBNWV9VUkwsXFxuICAgIGNvbF90eXBlOiAnbW92aWVfMV92ZXJ0aWNhbF9waWNfYmx1cidcXG59KTtcXG52YXIg57q/6LevID0gJ2JvZHkmJi5tb2R1bGUtdGFiLWl0ZW0nXFxudmFyIOmAiembhiA9ICdib2R5JiYuc2Nyb2xsLWJveC15fHwubW9kdWxlLWxpc3QnXFxudmFyIOe6v+i3r+WQjSA9ICdzcGFuJiZUZXh0J1xcbnZhciDpgInpm4bliJfooaggPSAnYm9keSYmYSdcXG5ldmFsKEpTT04ucGFyc2UocmVxdWVzdCgnaGlrZXI6Ly9wYWdlL2Vyamk/cnVsZT3mqKHmnb/Ct1EnKSkucnVsZSlcXG5zZXRSZXN1bHQoZCk7XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCLmkJzntKJtb2R1bGUtc2VhcmNoLWl0ZW1cIixcInBhdGhcIjpcIm1vZHVsZS1zZWFyY2gtaXRlbVwiLFwicnVsZVwiOlwidmFyIGQgPSBbXTtcXG52YXIgbGlzdCA9IHBkZmEoZ2V0UmVzQ29kZSgpLCAnYm9keSYmLm1vZHVsZS1zZWFyY2gtaXRlbScpO1xcbmxvZygn5pCc57Si57uT5p6cJylcXG5sb2cobGlzdClcXG5pZiAobGlzdC5sZW5ndGggPT0gMCkgdGhyb3cgXFxcIuaQnOe0ouS4uuepuu+8jOWPr+iDveWMuemFjemUmeivr1xcXCJcXG5mb3IgKHZhciBqIGluIGxpc3QpIHtcXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBwZGZoKGxpc3Rbal0sICdoMyYmVGV4dCcpLFxcbiAgICAgICAgZGVzYzogcGRmaChsaXN0W2pdLCAnLnZpZGVvLXNlcmlhbCYmVGV4dCcpLFxcbiAgICAgICAgY29udGVudDogcGRmaChsaXN0W2pdLCAnLnZpZGVvLWluZm8tYXV4JiZUZXh0JyksXFxuICAgICAgICBpbWc6IHBkKGxpc3Rbal0sICdpbWcmJmRhdGEtb3JpZ2luYWx8fGRhdGEtc3JjJyksXFxuICAgICAgICB1cmw6IHBkKGxpc3Rbal0sICcudmlkZW8tc2VyaWFsJiZocmVmJykgKyAnI2ltbWVyc2l2ZVRoZW1lIydcXG4gICAgfSk7XFxufVxcbnNldFJlc3VsdChkKVwifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwi5LiA57qnaXRlbVwiLFwicGF0aFwiOlwiaXRlbVwiLFwicnVsZVwiOlwidmFyIGQgPSBbXTtcXG5NWV9SVUxFLnVybC5tYXRjaCgvZnlwYWdlLylbMF1cXG52YXIgbGlzdCA9IHBkZmEoZ2V0UmVzQ29kZSgpLCAnYm9keSYmLml0ZW0nKTtcXG5mb3IgKGxldCBpIGluIGxpc3QpIHtcXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBwZGZoKGxpc3RbaV0sICdpbWcmJmFsdCcpLFxcbiAgICAgICAgZGVzYzogcGRmaChsaXN0W2ldLCAncCYmVGV4dCcpLFxcbiAgICAgICAgcGljX3VybDogcGQobGlzdFtpXSwgJ2ltZyYmc3JjJyksXFxuICAgICAgICB1cmw6IHBkKGxpc3RbaV0sICdhJiZocmVmJyksXFxuICAgICAgICBjb2xfdHlwZTogJ21vdmllXzMnXFxuICAgIH0pXFxufVxcbnNldFJlc3VsdChkKVwifSx7XCJuYW1lXCI6XCLkuIDnuqdkYXRhX2xpc3RcIixcInBhdGhcIjpcImRhdGFfbGlzdFwiLFwicnVsZVwiOlwidmFyIGQgPSBbXTtcXG5NWV9SVUxFLnVybC5tYXRjaCgvZnlwYWdlLylbMF1cXG52YXIgbGlzdCA9IHBkZmEoZ2V0UmVzQ29kZSgpLCAnI2RhdGFfbGlzdCYmbGknKTtcXG5mb3IgKGxldCBpIGluIGxpc3QpIHtcXG4gICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBwZGZoKGxpc3RbaV0sICdhJiZ0aXRsZScpLFxcbiAgICAgICAgZGVzYzogcGRmaChsaXN0W2ldLCAnZW0mJlRleHQnKSxcXG4gICAgICAgIHBpY191cmw6IHBkKGxpc3RbaV0sICdpbWcmJmRhdGEtc3JjJyksXFxuICAgICAgICB1cmw6IHBkKGxpc3RbaV0sICdhJiZocmVmJyksXFxuICAgICAgICBjb2xfdHlwZTogJ21vdmllXzMnXFxuICAgIH0pXFxufVxcbnNldFJlc3VsdChkKVwifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwi5LqM57qnaDNcIixcInBhdGhcIjpcImgzXCIsXCJydWxlXCI6XCJ2YXIgZCA9IFtdO1xcbnZhciBodG1sID0gZ2V0UmVzQ29kZSgpO1xcbmlmIChodG1sLmluZGV4T2YoJ+ajgOa1i+S4rScpICE9IC0xKSB7XFxuICAgIGh0bWwgPSByZXF1ZXN0KE1ZX1VSTCArICc/YnR3YWYnICsgaHRtbC5tYXRjaCgvYnR3YWYoLio/KVxcXFxcXFwiLylbMV0pO1xcbn1cXG5kLnB1c2goe1xcbiAgICB0aXRsZTogcGRmaChodG1sLCAnLmRhdGEsMiYmVGV4dCcpXFxuICAgICAgICAucmVwbGFjZSgn57G75Z6L77yaJywgJycpXFxuICAgICAgICAucmVwbGFjZSgn5Zyw5Yy677yaJywgJycpXFxuICAgICAgICAucmVwbGFjZSgn5bm05Lu977yaJywgJyAnKVxcbiAgICAgICAgLnN1YnN0cmluZygwLCAxOCkgKyAnXFxcXG4nICtcXG4gICAgICAgIHBkZmgoaHRtbCwgJy5kYXRhLDEmJlRleHQnKVxcbiAgICAgICAgLnN1YnN0cmluZygwLCAxNSkgKyAnXFxcXG4nICtcXG4gICAgICAgIHBkZmgoaHRtbCwgJy5kYXRhJiZUZXh0JylcXG4gICAgICAgIC5zdWJzdHJpbmcoMCwgMTUpLFxcbiAgICBkZXNjOiBwZGZoKGh0bWwsICcuZGV0YWlsLXNrZXRjaHx8LmRhdGEsM3x8I2Rlc2MmJlRleHQnKSxcXG4gICAgaW1nOiBwZChodG1sLCAnLmxhenlsb2FkJiZkYXRhLW9yaWdpbmFsJyksXFxuICAgIHVybDogTVlfVVJMLFxcbiAgICBjb2xfdHlwZTogJ21vdmllXzFfdmVydGljYWxfcGljX2JsdXInXFxufSk7XFxuXFxudmFyIOe6v+i3ryA9ICdib2R5JiYuc3R1aS1wYW5uZWw6aGFzKC5zdHVpLWNvbnRlbnRfX3BsYXlsaXN0KSdcXG52YXIg6YCJ6ZuGID0gJ2JvZHkmJi5zdHVpLWNvbnRlbnRfX3BsYXlsaXN0J1xcbnZhciDnur/ot6/lkI0gPSAnaDMmJlRleHQnXFxudmFyIOmAiembhuWIl+ihqCA9ICd1bCYmbGknXFxuZXZhbChKU09OLnBhcnNlKHJlcXVlc3QoJ2hpa2VyOi8vcGFnZS9lcmppP3J1bGU95qih5p2/wrdRJykpLnJ1bGUpXFxuc2V0UmVzdWx0KGQpO1wifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwi5LiA57qnZmVkLWxpc3QtdGl0bGVcIixcInBhdGhcIjpcImZlZC1saXN0LXRpdGxlXCIsXCJydWxlXCI6XCJ2YXIgZCA9IFtdO1xcbk1ZX1JVTEUudXJsLm1hdGNoKC9meXBhZ2UvKVswXVxcbnZhciBsaXN0ID0gcGRmYShnZXRSZXNDb2RlKCksICcuZmVkLWxpc3QtaW5mbyYmbGknKTtcXG5mb3IgKHZhciBqIGluIGxpc3QpIHtcXG4gIGQucHVzaCh7XFxuICAgICAgIHRpdGxlOiBwZGZoKGxpc3Rbal0sICcuZmVkLWxpc3QtdGl0bGUmJlRleHQnKSxcXG4gICAgICAgZGVzYzogcGRmaChsaXN0W2pdLCAnLmZlZC10ZXh0LWNlbnRlciYmVGV4dCcpLFxcbiAgICAgICBpbWc6IHBkKGxpc3Rbal0sICdhJiZkYXRhLW9yaWdpbmFsJykrJ0BSZWZlcmVyPScsXFxuICAgICAgIHVybDogcGQobGlzdFtqXSwgJ2EmJmhyZWYnKVxcbiAgfSk7XFxufVxcbnNldFJlc3VsdChkKVwifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwi5LqM57qnbXl1aS1jb250ZW50X19saXN0XCIsXCJwYXRoXCI6XCJteXVpLWNvbnRlbnRfX2xpc3RcIixcInJ1bGVcIjpcInZhciBkID0gW107XFxudmFyIGh0bWwgPSBnZXRSZXNDb2RlKCk7XFxuXFxuZC5wdXNoKHtcXG4gICAgdGl0bGU6IHBkZmgoaHRtbCwgJy5kYXRhLDAmJlRleHQnKVxcbiAgICAgICAgLnJlcGxhY2UoJ+WcsOWMuu+8micsICcgICcpXFxuICAgICAgICAucmVwbGFjZSgn5bm05Lu977yaJywgJyAgJykgKyAnXFxcXG4nICtcXG4gICAgICAgIHBkZmgoaHRtbCwgJy5kYXRhLDEmJlRleHQnKVxcbiAgICAgICAgLnN1YnN0cmluZygwLCAxNSkgKyAnXFxcXG4nICtcXG4gICAgICAgIHBkZmgoaHRtbCwgJy5kYXRhLDImJlRleHQnKSxcXG4gICAgZGVzYzogcGRmaChodG1sLCAnLmRhdGEsMyYmVGV4dCcpLFxcbiAgICBwaWNfdXJsOiBwZChodG1sLCAnLmxhenlsb2FkJiZkYXRhLW9yaWdpbmFsJyksXFxuICAgIHVybDogTVlfVVJMLFxcbiAgICBjb2xfdHlwZTogJ21vdmllXzFfdmVydGljYWxfcGljX2JsdXInXFxufSk7XFxudmFyIOe6v+i3ryA9ICdib2R5JiYubXl1aS1wYW5lbC1ib3g6aGFzKC5teXVpLWNvbnRlbnRfX2xpc3QpJ1xcbnZhciDpgInpm4YgPSAnYm9keSYmLm15dWktY29udGVudF9fbGlzdCdcXG52YXIg57q/6Lev5ZCNID0gJ2gzJiZUZXh0J1xcbnZhciDpgInpm4bliJfooaggPSAndWwmJmxpJ1xcbmV2YWwoSlNPTi5wYXJzZShyZXF1ZXN0KCdoaWtlcjovL3BhZ2UvZXJqaT9ydWxlPeaooeadv8K3UScpKS5ydWxlKVxcbnNldFJlc3VsdChkKTtcIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIuWKqOaAgeWIhuexu1wiLFwicGF0aFwiOlwiZHRmbFwiLFwicnVsZVwiOlwiLy8g6YWN572u5bi46YePXFxuY29uc3QgQ09ORklHID0ge1xcbiAgICBJTklUX0NBVEU6IEFycmF5KDIwKS5maWxsKFxcXCIwXFxcIiksXFxuICAgIEZPTERfREVGQVVMVDogXFxcIjBcXFwiLFxcbiAgICBGT0xEX0lDT05TOiB7XFxuICAgICAgICBvcGVuOiAn4oioJyxcXG4gICAgICAgIGNsb3NlOiAn4oinJ1xcbiAgICB9LFxcbiAgICBDT0xPUlM6IHtcXG4gICAgICAgIGZvbGQ6IFxcXCIjRkYwMDAwXFxcIixcXG4gICAgICAgIHVuZm9sZDogXFxcIiMxYWFkMTlcXFwiLFxcbiAgICAgICAgY2F0ZWdvcnk6IOWIhuexu+minOiJsiB8fCBcXFwiIzEyYjY2OFxcXCJcXG4gICAgfVxcbn07XFxuXFxuLy8g6I635Y+W5YiG57G75pWw5o2uXFxuZnVuY3Rpb24gZ2V0Q2F0ZWdvcmllcygpIHtcXG4gICAgY29uc3QgYmFzZUNhdGVzID0gcGRmYShodG1sLCDlpKfnsbvlrprkvY0pO1xcbiAgICByZXR1cm4gdHlwZW9mIOaLvOaOpeWIhuexuyAhPT0gJ3VuZGVmaW5lZCcgJiYg5ou85o6l5YiG57G7IFxcbiAgICAgICAgPyBiYXNlQ2F0ZXMuY29uY2F0KHBkZmEoaHRtbCwg5ou85o6l5YiG57G7KSlcXG4gICAgICAgIDogYmFzZUNhdGVzO1xcbn1cXG5cXG4vLyDliJvlu7rliIbnsbvmjInpkq5cXG5mdW5jdGlvbiBjcmVhdGVDYXRlZ29yeUJ1dHRvbihpdGVtLCBrZXksIGluZGV4LCByZXNldE90aGVycywgY3VycmVudFNlbGVjdGVkKSB7XFxuICAgIGxldCB0aXRsZSA9IHBkZmgoaXRlbSwg5YiG57G75qCH6aKYKTtcXG4gICAgXFxuICAgIC8vIOWuieWFqOajgOafpeaOkumZpOWPmOmHj1xcbiAgICBpZiAodHlwZW9mIOaOkumZpCAhPT0gJ3VuZGVmaW5lZCcgJiYg5o6S6ZmkKSB7XFxuICAgICAgICB0aXRsZSA9IHRpdGxlLnJlcGxhY2UobmV3IFJlZ0V4cCjmjpLpmaQsIFxcXCJnXFxcIiksIFxcXCJcXFwiKTtcXG4gICAgfVxcbiAgICBcXG4gICAgY29uc3QgaXNTZWxlY3RlZCA9IGtleS50b1N0cmluZygpID09PSBjdXJyZW50U2VsZWN0ZWRbaW5kZXhdO1xcbiAgICBjb25zdCBkaXNwbGF5VGl0bGUgPSBpc1NlbGVjdGVkID8gYOKAnOKAnOKAneKAnSR7dGl0bGUuZm9udGNvbG9yKENPTkZJRy5DT0xPUlMuY2F0ZWdvcnkpfWAgOiB0aXRsZTtcXG4gICAgXFxuICAgIHJldHVybiB7XFxuICAgICAgICB0aXRsZTogZGlzcGxheVRpdGxlLFxcbiAgICAgICAgdXJsOiAkKHBkKGl0ZW0sIOWIhuexu+mTvuaOpSkgKyAnI25vTG9hZGluZyMnKS5sYXp5UnVsZSgocGFyYW1zKSA9PiB7XFxuICAgICAgICAgICAgY29uc3QgbmV3Q2F0ZSA9IHBhcmFtcy5jdXJyZW50U2VsZWN0ZWQubWFwKChjLCBpKSA9PiBcXG4gICAgICAgICAgICAgICAgcGFyYW1zLnJlc2V0T3RoZXJzIFxcbiAgICAgICAgICAgICAgICAgICAgPyAoaSA9PT0gcGFyYW1zLmluZGV4ID8gcGFyYW1zLmtleS50b1N0cmluZygpIDogXFxcIjBcXFwiKVxcbiAgICAgICAgICAgICAgICAgICAgOiAoaSA9PT0gcGFyYW1zLmluZGV4ID8gcGFyYW1zLmtleS50b1N0cmluZygpIDogYylcXG4gICAgICAgICAgICApO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIHB1dE15VmFyKE1ZX1JVTEUudGl0bGUsIEpTT04uc3RyaW5naWZ5KG5ld0NhdGUpKTtcXG4gICAgICAgICAgICBwdXRNeVZhcihNWV9SVUxFLnVybCwgaW5wdXQpO1xcbiAgICAgICAgICAgIHJlZnJlc2hQYWdlKHRydWUpO1xcbiAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgICAgICB9LCB7IFxcbiAgICAgICAgICAgIGN1cnJlbnRTZWxlY3RlZDogY3VycmVudFNlbGVjdGVkLCBcXG4gICAgICAgICAgICBpbmRleDogaW5kZXgsIFxcbiAgICAgICAgICAgIGtleToga2V5LCBcXG4gICAgICAgICAgICByZXNldE90aGVyczogcmVzZXRPdGhlcnMgXFxuICAgICAgICB9KSxcXG4gICAgICAgIGNvbF90eXBlOiAnc2Nyb2xsX2J1dHRvbicsXFxuICAgIH07XFxufVxcblxcbi8vIOWIm+W7uuaKmOWPoOaMiemSrlxcbmZ1bmN0aW9uIGNyZWF0ZUZvbGRCdXR0b24oY3VycmVudEZvbGRTdGF0ZSkge1xcbiAgICBjb25zdCBpc0ZvbGRlZCA9IGN1cnJlbnRGb2xkU3RhdGUgPT09ICcxJztcXG4gICAgY29uc3QgaWNvbiA9IGlzRm9sZGVkID8gQ09ORklHLkZPTERfSUNPTlMub3BlbiA6IENPTkZJRy5GT0xEX0lDT05TLmNsb3NlO1xcbiAgICBjb25zdCBjb2xvciA9IGlzRm9sZGVkID8gQ09ORklHLkNPTE9SUy5mb2xkIDogQ09ORklHLkNPTE9SUy51bmZvbGQ7XFxuICAgIFxcbiAgICByZXR1cm4ge1xcbiAgICAgICAgdGl0bGU6IGDigJzigJzigJ3igJ08Yj4ke2ljb24uZm9udGNvbG9yKGNvbG9yKX08L2I+YCxcXG4gICAgICAgIHVybDogJCgpLmxhenlSdWxlKChmKSA9PiB7XFxuICAgICAgICAgICAgcHV0TXlWYXIoTVlfUlVMRS5ncm91cCwgZiA9PT0gJzEnID8gJzAnIDogJzEnKTtcXG4gICAgICAgICAgICByZWZyZXNoUGFnZShmYWxzZSk7XFxuICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIjtcXG4gICAgICAgIH0sIGN1cnJlbnRGb2xkU3RhdGUpLFxcbiAgICAgICAgY29sX3R5cGU6ICdzY3JvbGxfYnV0dG9uJyxcXG4gICAgfTtcXG59XFxuXFxuLy8g5Li75Ye95pWwXFxuZnVuY3Rpb24gYnVpbGRDYXRlZ29yeVVJKCkge1xcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcXG4gICAgY29uc3QgY2F0ZWdvcmllcyA9IGdldENhdGVnb3JpZXMoKTtcXG4gICAgY29uc3QgZm9sZFN0YXRlID0gZ2V0TXlWYXIoTVlfUlVMRS5ncm91cCwgQ09ORklHLkZPTERfREVGQVVMVCk7XFxuICAgIGNvbnN0IGN1cnJlbnRDYXRlID0gSlNPTi5wYXJzZShnZXRNeVZhcihNWV9SVUxFLnRpdGxlLCBKU09OLnN0cmluZ2lmeShDT05GSUcuSU5JVF9DQVRFKSkpO1xcbiAgICBcXG4gICAgaWYgKHBhcnNlSW50KE1ZX1BBR0UpID09PSAxKSB7XFxuICAgICAgICByZXN1bHQucHVzaChjcmVhdGVGb2xkQnV0dG9uKGZvbGRTdGF0ZSkpO1xcbiAgICAgICAgXFxuICAgICAgICBjYXRlZ29yaWVzLmZvckVhY2goKGNhdGVnb3J5LCBpbmRleCkgPT4ge1xcbiAgICAgICAgICAgIGNvbnN0IHN1YkNhdGVnb3JpZXMgPSBwZGZhKGNhdGVnb3J5LCDlsI/nsbvlrprkvY0pO1xcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCB8fCBmb2xkU3RhdGUgPT09ICcxJykge1xcbiAgICAgICAgICAgICAgICBzdWJDYXRlZ29yaWVzLmZvckVhY2goKGl0ZW0sIGtleSkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goY3JlYXRlQ2F0ZWdvcnlCdXR0b24oaXRlbSwga2V5LGluZGV4LGluZGV4ID09PSAwLGN1cnJlbnRDYXRlKSk7XFxuICAgICAgICAgICAgICAgIH0pO1xcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh7IGNvbF90eXBlOiBcXFwiYmxhbmtfYmxvY2tcXFwiIH0pO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0pO1xcbiAgICB9XFxuICAgIHJldHVybiByZXN1bHQ7XFxufVxcbnNldFByZVJlc3VsdChidWlsZENhdGVnb3J5VUkoKSk7XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCLlh73mlbBcIixcInBhdGhcIjpcImp4aHNcIixcInJ1bGVcIjpcImNvbnN0IGZmID0gcHQgPT4ge1xcbiAgICB2YXIgY291bnQgPSAweDA7XFxuICAgIHZhciBiYXNlID0gMHgwO1xcbiAgICBmb3IgKHZhciBpID0gMHgwOyBpIDwgcHQubGVuZ3RoOyBpICs9IDB4NCkge1xcbiAgICAgICAgY291bnQgKz0gcGFyc2VJbnQocHRbaV0gKyBwdFtpICsgMHgxXSArIHB0W2kgKyAweDJdICsgcHRbaSArIDB4M10sIDB4MTApO1xcbiAgICAgICAgY291bnQgJT0gMHg0MDBhO1xcbiAgICB9XFxuICAgIGJhc2UgPSBjb3VudCAlIDB4YTtcXG4gICAgdmFyIHBhcmFtID0gMHgwO1xcbiAgICBmb3IgKHZhciBhID0gMHgwOyBhIDwgcHQubGVuZ3RoOyBhKyspIHtcXG4gICAgICAgIHBhcmFtICs9IHB0LmNoYXJDb2RlQXQoYSkgKiAoYSArIGJhc2UpO1xcbiAgICAgICAgcGFyYW0gJT0gY291bnQ7XFxuICAgIH1cXG4gICAgcmV0dXJuIHBhcmFtICsgJyc7XFxufVxcblxcblxcbmNvbnN0IHR0ID0gcyA9PiB7XFxuICAgIGZvciAodmFyIHQgPSAweDE5NWMsIGkgPSAweDAsIGxlbmd0aCA9IHNrLmxlbmd0aDsgbGVuZ3RoID4gaTsgKytpKSB7XFxuICAgICAgICB0ICs9ICh0IDw8IDB4NSkgKyBzay5jaGFyQXQoaSkuY2hhckNvZGVBdCgpO1xcbiAgICB9XFxuICAgIHJldHVybiAoMHg3ZmZmZmZmZiAmIHQpICsgJyc7XFxufVxcblxcbnZhciBzc3l6ID0gKGltZywgdHlwZSkgPT4ge1xcbiAgICBjb25zdCBNQVAgPSB7XFxuICAgICAgICBudW06IHtcXG4gICAgICAgICAgICAnYSc6ICc0JywgJ2InOiAnNicsICdkJzogJzAnLCAnZSc6ICc5JywgJ2cnOiAnOScsXFxuICAgICAgICAgICAgJ2knOiAnMScsICdsJzogJzEnLCAnbSc6ICczJywgJ3MnOiAnNScsICd0JzogJzcnLFxcbiAgICAgICAgICAgICdvJzogJzAnLCAncSc6ICc5JywgJ3UnOiAnNCcsICd6JzogJzInXFxuICAgICAgICB9LFxcbiAgICAgICAgYWxwaGE6IHtcXG4gICAgICAgICAgICAnNCc6ICdhJywgJzYnOiAnYicsICc5JzogJ3EnLCAnMSc6ICdsJywgJzMnOiAnbScsXFxuICAgICAgICAgICAgJzUnOiAncycsICc3JzogJ3QnLCAnMCc6ICdvJywgJzInOiAneidcXG4gICAgICAgIH1cXG4gICAgfTtcXG5cXG4gICAgY29uc3QgY3VycmVudE1hcCA9IE1BUFt0eXBlXSB8fCB7fTtcXG4gICAgXFxuICAgIGNvbnN0IG9jclJlc3VsdCA9IHJlcXVlc3QoJ2h0dHBzOi8vYXBpLm5uLmNpL29jci9iNjQvdGV4dCcsIHtcXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxcbiAgICAgICAgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9LFxcbiAgICAgICAgYm9keTogY29udmVydEJhc2U2NEltYWdlKGltZykuc3BsaXQoJywnKVsxXVxcbiAgICB9KS5zcGxpdCgnJylcXG4gICAgbG9nKG9jclJlc3VsdClcXG4gICAgY29uc3QgcmVzdWx0ID0gW107XFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2NyUmVzdWx0Lmxlbmd0aDsgaSsrKSB7XFxuICAgICAgICBsZXQgY2hhciA9IG9jclJlc3VsdFtpXTtcXG4gICAgICAgIHJlc3VsdC5wdXNoKGN1cnJlbnRNYXBbY2hhcl0gfHwgY2hhcik7XFxuICAgIH1cXG4gICAgcmV0dXJuIHJlc3VsdC5qb2luKCcnKVxcbn1cIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIuS6jOe6p21vLW1vdnMtaXRlbVwiLFwicGF0aFwiOlwibW8tbW92cy1pdGVtXCIsXCJydWxlXCI6XCJ2YXIgZCA9IFtdO1xcbnZhciBodG1sID0gZ2V0UmVzQ29kZSgpO1xcbmQucHVzaCh7XFxuICAgIHRpdGxlOiAn5YiG57G777yaJyArIHBkZmgoaHRtbCwgJy5tby1jb2xzLWxheXMmJmxpLDItLXNwYW4mJlRleHQnKSArXFxuICAgICAgICAnIHwgJyArIHBkZmgoaHRtbCwgJy5tby1jb2xzLWxheXMmJmxpLDMtLXNwYW4mJlRleHQnKSArXFxuICAgICAgICAnIHwgJyArIHBkZmgoaHRtbCwgJy5tby1jb2xzLWxheXMmJmxpLDQtLXNwYW4mJlRleHQnKSArXFxuICAgICAgICAnXFxcXG4nICsgcGRmaChodG1sLCAnLm1vLWNvbHMtbGF5cyYmbGkmJlRleHQnKVxcbiAgICAgICAgLnN1YnN0cmluZygwLCAxNSkgK1xcbiAgICAgICAgJ1xcXFxuJyArIHBkZmgoaHRtbCwgJy5tby1jb2xzLWxheXMmJmxpLDEmJlRleHQnKVxcbiAgICAgICAgLnN1YnN0cmluZygwLCAxNSksXFxuICAgIGRlc2M6ICfmm7TmlrDml7bpl7TvvJonICsgcGRmaChodG1sLCAnLm1vLWNvbHMtbGF5cyYmbGksNSYmVGV4dCcpLnN1YnN0cmluZygwLCAxNSksXFxuICAgIGltZzogcGQoaHRtbCwgJy5tby1zaXR1LXBpY3MmJmRhdGEtb3JpZ2luYWwnKSxcXG4gICAgdXJsOiBNWV9VUkwsXFxuICAgIGNvbF90eXBlOiAnbW92aWVfMV92ZXJ0aWNhbF9waWNfYmx1cidcXG59KTtcXG5cXG52YXIg57q/6LevID0gJ2JvZHkmJi5tby1tb3ZzLWJ0bnMnXFxudmFyIOmAiembhiA9ICdib2R5JiYubW8tbW92cy1pdGVtJ1xcbnZhciDnur/ot6/lkI0gPSAnVGV4dCdcXG52YXIg6YCJ6ZuG5YiX6KGoID0gJ3VsJiZsaSdcXG5ldmFsKEpTT04ucGFyc2UocmVxdWVzdCgnaGlrZXI6Ly9wYWdlL2Vyamk/cnVsZT3mqKHmnb/Ct1EnKSkucnVsZSlcXG5zZXRSZXN1bHQoZCk7XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCLmlbDlrZfpqozor4HnoIFcIixcInBhdGhcIjpcInl6bVwiLFwicnVsZVwiOlwid2hpbGUgKC/ovpPlhaXpqozor4HnoIF857O757uf5a6J5YWo6aqM6K+BLy50ZXN0KGh0bWwpKSB7XFxuICAgIGxldCBoZWFkZXJzID0ge1xcbiAgICAgICAgXFxcIlVzZXItQWdlbnRcXFwiOiBNT0JJTEVfVUEsXFxuICAgICAgICBcXFwiUmVmZXJlclxcXCI6IE1ZX1VSTFxcbiAgICB9XFxuICAgIGV2YWwoSlNPTi5wYXJzZShyZXF1ZXN0KCdoaWtlcjovL3BhZ2Uvanhocz9ydWxlPeaooeadv8K3UScpKS5ydWxlKTtcXG4gICAgbGV0IHZjb2RlID0gc3N5eihNWV9IT01FICsgJy9pbmRleC5waHAvdmVyaWZ5L2luZGV4Lmh0bWw/JywgJ251bScpO1xcbiAgICBmZXRjaChNWV9IT01FICsgaHRtbC5tYXRjaCgvXFxcXC9pbmRleC5waHAuKj92ZXJpZnk9LylbMF0gKyB2Y29kZSwge1xcbiAgICAgICAgaGVhZGVyczogaGVhZGVycyxcXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnXFxuICAgIH0pXFxuICAgIHZhciB5eiA9IHR5cGVvZih0cnVlX3VybCkgIT0gJ3VuZGVmaW5lZCcgJiYgdHJ1ZV91cmwgIT0gJycgPyB0cnVlX3VybCA6IE1ZX1VSTFxcbiAgICBsb2coTVlfVFlQRSlcXG4gICAgaHRtbCA9IHJlcXVlc3QoeXosIHtcXG4gICAgICAgIC8vICAgaGVhZGVyczogaGVhZGVyc1xcbiAgICB9KVxcbn1cXG5pZiAoL+mikee5geaTjeS9nC8udGVzdChodG1sKSkge1xcbiAgICBkLnB1c2goe1xcbiAgICB0aXRsZTogJ+e9keermeaQnOe0ouaXtumXtOmXtOmalCcsXFxuICAgIGRlc2M6IFxcXCLkuIvmi4nph43or5VcXFwiXFxufSlcXG59XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCLkuoznuqd5LXBsYXlMaXN0XCIsXCJwYXRoXCI6XCJ5LXBsYXlMaXN0XCIsXCJydWxlXCI6XCJqczpcXG52YXIgZCA9IFtdO1xcbnZhciBodG1sID0gZ2V0UmVzQ29kZSgpXFxuXFxuZC5wdXNoKHtcXG4gICAgdGl0bGU6IHBkZmgoaHRtbCwgJy5tb2R1bGUtaW5mby1pdGVtLDMmJlRleHQnKVxcbiAgICAgICAgLnN1YnN0cmluZygwLCAxOCkgK1xcbiAgICAgICAgJ1xcXFxuJyArXFxuICAgICAgICBwZGZoKGh0bWwsICcubW9kdWxlLWluZm8taXRlbSwxJiZUZXh0JylcXG4gICAgICAgIC5zdWJzdHJpbmcoMCwgMTgpICtcXG4gICAgICAgICdcXFxcbicgK1xcbiAgICAgICAgcGRmaChodG1sLCAnLm1vZHVsZS1pbmZvLWl0ZW0sNCYmVGV4dCcpLFxcbiAgICBpbWc6IHBkKGh0bWwsICcubGF6eWxvYWQmJmRhdGEtb3JpZ2luYWx8fHNyYycpICtcXG4gICAgICAgICdAUmVmZXJlcj0nLFxcbiAgICB1cmw6IE1ZX1VSTCxcXG4gICAgZGVzYzogcGRmaChodG1sLCAnLm1vZHVsZS1pbmZvLWl0ZW0sNXx8Lm1vZHVsZS1pbmZvLWl0ZW0mJlRleHQnKSxcXG4gICAgY29sX3R5cGU6ICdtb3ZpZV8xX3ZlcnRpY2FsX3BpY19ibHVyJ1xcbn0pO1xcblxcbnZhciDnur/ot68gPSAnI3ktcGxheUxpc3QmJnNwYW4nXFxudmFyIOmAiembhiA9ICdib2R5JiYubW9kdWxlLXBsYXktbGlzdCdcXG52YXIg57q/6Lev5ZCNID0gJ1RleHQnXFxudmFyIOmAiembhuWIl+ihqCA9ICdib2R5JiZhJ1xcbmV2YWwoSlNPTi5wYXJzZShyZXF1ZXN0KCdoaWtlcjovL3BhZ2UvZXJqaT9ydWxlPeaooeadv8K3UScpKS5ydWxlKVxcbnNldFJlc3VsdChkKTtcIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcImF1dG8xXCIsXCJwYXRoXCI6XCJhdXRvMVwiLFwicnVsZVwiOlwiLy8g57yT5a2Y5a+56LGh77yI6Leo6K+35rGC5oyB5LmF5YyW77yJXFxyXFxuY29uc3QgdGVtcGxhdGVDYWNoZSA9IHtcXHJcXG4gICAgZ2V0KHBhZ2VUeXBlKSB7XFxyXFxuICAgICAgICByZXR1cm4gZ2V0VmFyKGBjYWNoZV8ke3BhZ2VUeXBlfWApO1xcclxcbiAgICB9LFxcclxcbiAgICBzZXQocGFnZVR5cGUsIHRlbXBsYXRlTmFtZSkge1xcclxcbiAgICAgICAgcHV0VmFyKGBjYWNoZV8ke3BhZ2VUeXBlfWAsIHRlbXBsYXRlTmFtZSk7XFxyXFxuICAgIH0sXFxyXFxuICAgIGNsZWFyKHBhZ2VUeXBlKSB7XFxyXFxuICAgICAgICBwdXRWYXIoYGNhY2hlXyR7cGFnZVR5cGV9YCwgJycpO1xcclxcbiAgICB9XFxyXFxufTtcXHJcXG5cXHJcXG4vLyAxLiDlrprkuYnkuIDnuqfpobXpnaLop4TliJlcXHJcXG5jb25zdCBwcmltYXJ5UnVsZXMgPSB7XFxyXFxuICAgIFxcXCJzdHVpLXZvZGxpc3RcXFwiOiB7XFxyXFxuICAgICAgICBsaXN0OiBcXFwiLnN0dWktdm9kbGlzdCYmbGlcXFwiLFxcclxcbiAgICAgICAgdGl0bGU6IFxcXCJhJiZ0aXRsZVxcXCIsXFxyXFxuICAgICAgICBkZXNjOiBcXFwiLnBpYy10ZXh0JiZUZXh0XFxcIixcXHJcXG4gICAgICAgIGltZzogXFxcIi5sYXp5bG9hZHx8YSYmZGF0YS1vcmlnaW5hbFxcXCIsXFxyXFxuICAgICAgICB1cmw6IFxcXCJhJiZocmVmXFxcIlxcclxcbiAgICB9LFxcclxcbiAgICBcXFwibXl1aS12b2RsaXN0XFxcIjoge1xcclxcbiAgICAgICAgbGlzdDogXFxcIi5teXVpLXZvZGxpc3QmJmxpXFxcIixcXHJcXG4gICAgICAgIHRpdGxlOiBcXFwiaDQmJlRleHRcXFwiLFxcclxcbiAgICAgICAgZGVzYzogXFxcIi5waWMtdGFnfHwucGljLXRleHQmJlRleHRcXFwiLFxcclxcbiAgICAgICAgaW1nOiBcXFwiLmxhenlsb2FkJiZkYXRhLW9yaWdpbmFsXFxcIixcXHJcXG4gICAgICAgIHVybDogXFxcImEmJmhyZWZcXFwiXFxyXFxuICAgIH0sXFxyXFxuICAgIFxcXCJ2b2RsaXN0XFxcIjoge1xcclxcbiAgICAgICAgbGlzdDogXFxcIi52b2RsaXN0JiZsaVxcXCIsXFxyXFxuICAgICAgICB0aXRsZTogXFxcImEmJnRpdGxlXFxcIixcXHJcXG4gICAgICAgIGRlc2M6IFxcXCJhJiZUZXh0XFxcIixcXHJcXG4gICAgICAgIGltZzogXFxcIi5sYXp5bG9hZCYmZGF0YS1vcmlnaW5hbFxcXCIsXFxyXFxuICAgICAgICB1cmw6IFxcXCJhJiZocmVmXFxcIlxcclxcbiAgICB9LFxcclxcbiAgICBcXFwicGFjay15a3BhY2tcXFwiOiB7XFxyXFxuICAgICAgICBsaXN0OiBcXFwiYm9keSYmLnBhY2steWtwYWNrXFxcIixcXHJcXG4gICAgICAgIHRpdGxlOiBcXFwiYSYmdGl0bGVcXFwiLFxcclxcbiAgICAgICAgZGVzYzogXFxcInNwYW4sLTEmJlRleHRcXFwiLFxcclxcbiAgICAgICAgaW1nOiBcXFwiLmVjbGF6eSYmZGF0YS1vcmlnaW5hbFxcXCIsXFxyXFxuICAgICAgICB1cmw6IFxcXCJhJiZocmVmXFxcIlxcclxcbiAgICB9LFxcclxcbiAgICBcXFwibW9kdWxlLWl0ZW1zXFxcIjoge1xcclxcbiAgICAgICAgbGlzdDogXFxcImJvZHkmJi5tb2R1bGUtaXRlbVxcXCIsXFxyXFxuICAgICAgICB0aXRsZTogXFxcInN0cm9uZ3x8YSYmVGV4dHx8dGl0bGVcXFwiLFxcclxcbiAgICAgICAgZGVzYzogXFxcIi5tb2R1bGUtaXRlbS10ZXh0fHwubW9kdWxlLWl0ZW0tbm90ZSYmVGV4dFxcXCIsXFxyXFxuICAgICAgICBpbWc6IFxcXCJpbWd8fC5sYXp5JiZkYXRhLXNyY3x8ZGF0YS1vcmlnaW5hbHx8c3JjXFxcIixcXHJcXG4gICAgICAgIHVybDogXFxcImEmJmhyZWZcXFwiXFxyXFxuICAgIH0sXFxyXFxuICAgIFxcXCJmZWQtbGlzdC10aXRsZVxcXCI6IHtcXHJcXG4gICAgICAgIGxpc3Q6IFxcXCIuZmVkLWxpc3QtaW5mbyYmbGlcXFwiLFxcclxcbiAgICAgICAgdGl0bGU6IFxcXCIuZmVkLWxpc3QtdGl0bGUmJlRleHRcXFwiLFxcclxcbiAgICAgICAgZGVzYzogXFxcIi5mZWQtdGV4dC1jZW50ZXImJlRleHRcXFwiLFxcclxcbiAgICAgICAgaW1nOiBcXFwiYSYmZGF0YS1vcmlnaW5hbFxcXCIsXFxyXFxuICAgICAgICB1cmw6IFxcXCJhJiZocmVmXFxcIlxcclxcbiAgICB9LFxcclxcbiAgICBcXFwiZGF0YV9saXN0XFxcIjoge1xcclxcbiAgICAgICAgbGlzdDogXFxcIiNkYXRhX2xpc3QmJmxpXFxcIixcXHJcXG4gICAgICAgIHRpdGxlOiBcXFwiYSYmdGl0bGVcXFwiLFxcclxcbiAgICAgICAgZGVzYzogXFxcImVtJiZUZXh0XFxcIixcXHJcXG4gICAgICAgIGltZzogXFxcImltZyYmZGF0YS1zcmNcXFwiLFxcclxcbiAgICAgICAgdXJsOiBcXFwiYSYmaHJlZlxcXCJcXHJcXG4gICAgfVxcclxcbn07XFxyXFxuXFxyXFxuLy8gMi4g5Yib5bu65qih5p2/5aSE55CG5Ye95pWwXFxyXFxuZnVuY3Rpb24gY3JlYXRlUHJpbWFyeVRlbXBsYXRlKGNvbmZpZykge1xcclxcbiAgICByZXR1cm4ge1xcclxcbiAgICAgICAgbGlzdDogY29uZmlnLmxpc3QsXFxyXFxuICAgICAgICBnZXREYXRhKGl0ZW0pIHtcXHJcXG4gICAgICAgICAgICByZXR1cm4ge1xcclxcbiAgICAgICAgICAgICAgICB0aXRsZTogcGRmaChpdGVtLCBjb25maWcudGl0bGUpLFxcclxcbiAgICAgICAgICAgICAgICBkZXNjOiBjb25maWcuZGVzYyA/IHBkZmgoaXRlbSwgY29uZmlnLmRlc2MpIDogdW5kZWZpbmVkLFxcclxcbiAgICAgICAgICAgICAgICBpbWc6IHBkKGl0ZW0sIGNvbmZpZy5pbWcpICsgXFxcIkBSZWZlcmVyPVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgIHVybDogcGQoaXRlbSwgY29uZmlnLnVybCkgKyBcXFwiI2ltbWVyc2l2ZVRoZW1lI1xcXCJcXHJcXG4gICAgICAgICAgICB9O1xcclxcbiAgICAgICAgfVxcclxcbiAgICB9O1xcclxcbn1cXHJcXG5cXHJcXG4vLyAzLiDkuIDmrKHmgKfliJvlu7rmiYDmnInkuIDnuqfmqKHmnb9cXHJcXG5jb25zdCBwcmltYXJ5VGVtcGxhdGVzID0gT2JqZWN0LmZyb21FbnRyaWVzKFxcclxcbiAgICBPYmplY3QuZW50cmllcyhwcmltYXJ5UnVsZXMpLm1hcCgoW2tleSwgY29uZmlnXSkgPT4gW2tleSwgY3JlYXRlUHJpbWFyeVRlbXBsYXRlKGNvbmZpZyldKVxcclxcbik7XFxyXFxuXFxyXFxuLy8gNC4g5aKe5by655qE6Ieq5Yqo5Yy56YWN5Ye95pWw77yI5pW05ZCI57yT5a2Y5ZKM6Ieq5Yqo6YeN6K+V77yJXFxyXFxuZnVuY3Rpb24gYXV0b1BhZ2UoaHRtbHNyYywgY3VzdG9tVGVtcGxhdGUsIHR5cGUpIHtcXHJcXG4gICAgY29uc3QgaHRtbFNvdXJjZSA9IGh0bWxzcmM7XFxyXFxuICAgIGNvbnN0IHBhZ2VUeXBlID0gdHlwZSB8fCBNWV9UWVBFO1xcclxcbiAgICBsZXQgcmVzdWx0ID0gW107XFxyXFxuICAgIGxldCBtYXRjaGVkVGVtcGxhdGVOYW1lID0gJyc7XFxyXFxuICAgIFxcclxcbiAgICAvLyAwLiDlpoLmnpzmj5Dkvpvkuoboh6rlrprkuYnmqKHmnb/vvIzkvJjlhYjlpITnkIboh6rlrprkuYnmqKHmnb9cXHJcXG4gICAgaWYgKGN1c3RvbVRlbXBsYXRlICYmIHR5cGVvZiBjdXN0b21UZW1wbGF0ZSA9PT0gJ29iamVjdCcpIHtcXHJcXG4gICAgICAgIHRyeSB7XFxyXFxuICAgICAgICAgICAgLy8g5Yib5bu65Li05pe25qih5p2/5a6e5L6LXFxyXFxuICAgICAgICAgICAgY29uc3QgdGVtcFRlbXBsYXRlID0gY3JlYXRlUHJpbWFyeVRlbXBsYXRlKGN1c3RvbVRlbXBsYXRlKTtcXHJcXG4gICAgICAgICAgICBjb25zdCBjdXN0b21JdGVtcyA9IHBkZmEoaHRtbFNvdXJjZSwgdGVtcFRlbXBsYXRlLmxpc3QpO1xcclxcbiAgICAgICAgICAgIFxcclxcbiAgICAgICAgICAgIGlmIChjdXN0b21JdGVtcy5sZW5ndGggPiAwKSB7XFxyXFxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGN1c3RvbUl0ZW1zLm1hcChpdGVtID0+IHRlbXBUZW1wbGF0ZS5nZXREYXRhKGl0ZW0pKTtcXHJcXG4gICAgICAgICAgICAgICAgbWF0Y2hlZFRlbXBsYXRlTmFtZSA9ICdjdXN0b20tdGVtcGxhdGUnO1xcclxcbiAgICAgICAgICAgICAgICBsb2coYOS9v+eUqOiHquWumuS5ieaooeadv+aIkOWKn++8jOWMuemFjeWIsCAke2N1c3RvbUl0ZW1zLmxlbmd0aH0g5Liq6aG555uuYCk7XFxyXFxuICAgICAgICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgICAgICAgICAgbG9nKGDoh6rlrprkuYnmqKHmnb/mnKrljLnphY3liLDku7vkvZXpobnnm67vvIzlsJ3or5Xoh6rliqjljLnphY0uLi5gKTtcXHJcXG4gICAgICAgICAgICB9XFxyXFxuICAgICAgICB9IGNhdGNoIChlKSB7XFxyXFxuICAgICAgICAgICAgbG9nKGDoh6rlrprkuYnmqKHmnb/lpITnkIblpLHotKU6ICR7ZS5tZXNzYWdlfe+8jOWwneivleiHquWKqOWMuemFjS4uLmApO1xcclxcbiAgICAgICAgfVxcclxcbiAgICB9XFxyXFxuICAgIFxcclxcbiAgICAvLyAxLiDlpoLmnpzoh6rlrprkuYnmqKHmnb/mnKrmj5DkvpvmiJbmnKrljLnphY3liLDpobnnm67vvIzlsJ3or5Xor7vlj5bnvJPlrZhcXHJcXG4gICAgaWYgKHJlc3VsdC5sZW5ndGggPT09IDApIHtcXHJcXG4gICAgICAgIGNvbnN0IGNhY2hlZFRlbXBsYXRlTmFtZSA9IHRlbXBsYXRlQ2FjaGUuZ2V0KHBhZ2VUeXBlKTtcXHJcXG4gICAgICAgIGlmIChjYWNoZWRUZW1wbGF0ZU5hbWUpIHtcXHJcXG4gICAgICAgICAgICB0cnkge1xcclxcbiAgICAgICAgICAgICAgICBjb25zdCBjYWNoZWRUZW1wbGF0ZSA9IHByaW1hcnlUZW1wbGF0ZXNbY2FjaGVkVGVtcGxhdGVOYW1lXTtcXHJcXG4gICAgICAgICAgICAgICAgY29uc3QgY2FjaGVkSXRlbXMgPSBwZGZhKGh0bWxTb3VyY2UsIGNhY2hlZFRlbXBsYXRlLmxpc3QpO1xcclxcbiAgICAgICAgICAgICAgICBcXHJcXG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlZEl0ZW1zLmxlbmd0aCA+IDApIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGNhY2hlZEl0ZW1zLm1hcChpdGVtID0+IGNhY2hlZFRlbXBsYXRlLmdldERhdGEoaXRlbSkpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZFRlbXBsYXRlTmFtZSA9IGNhY2hlZFRlbXBsYXRlTmFtZTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGxvZyhg5L2/55So57yT5a2Y5qih5p2/5oiQ5YqfOiAke21hdGNoZWRUZW1wbGF0ZU5hbWV9YCk7XFxyXFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYOe8k+WtmOaooeadvyAke2NhY2hlZFRlbXBsYXRlTmFtZX0g5peg5pWIYCk7XFxyXFxuICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgIGxvZyhg57yT5a2Y5qih5p2/6aqM6K+B5aSx6LSlOiAke2UubWVzc2FnZX0sIOW8gOWni+mHjeaWsOWMuemFjS4uLmApO1xcclxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZUNhY2hlLmNsZWFyKHBhZ2VUeXBlKTtcXHJcXG4gICAgICAgICAgICB9XFxyXFxuICAgICAgICB9XFxyXFxuICAgIH1cXHJcXG4gICAgXFxyXFxuICAgIC8vIDIuIOWmguaenOayoeacieS7jue8k+WtmOiOt+WPlue7k+aenO+8jOmBjeWOhuaJgOacieaooeadv+i/m+ihjOWMuemFjVxcclxcbiAgICBpZiAocmVzdWx0Lmxlbmd0aCA9PT0gMCkge1xcclxcbiAgICAgICAgbG9nKFxcXCLlvIDlp4vmqKHmnb/ljLnphY3ov4fnqIsuLi5cXFwiKTtcXHJcXG4gICAgICAgIFxcclxcbiAgICAgICAgZm9yIChsZXQgW2N1cnJlbnROYW1lLCBjb25maWddIG9mIE9iamVjdC5lbnRyaWVzKHByaW1hcnlSdWxlcykpIHtcXHJcXG4gICAgICAgICAgICB0cnkge1xcclxcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudEl0ZW1zID0gcGRmYShodG1sU291cmNlLCBjb25maWcubGlzdCk7XFxyXFxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50SXRlbXMubGVuZ3RoID4gMCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFRlbXBsYXRlID0gY3JlYXRlUHJpbWFyeVRlbXBsYXRlKGNvbmZpZyk7XFxyXFxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBjdXJyZW50SXRlbXMubWFwKGl0ZW0gPT4gY3VycmVudFRlbXBsYXRlLmdldERhdGEoaXRlbSkpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZFRlbXBsYXRlTmFtZSA9IGN1cnJlbnROYW1lO1xcclxcbiAgICAgICAgICAgICAgICAgICAgXFxyXFxuICAgICAgICAgICAgICAgICAgICAvLyDnvJPlrZjmiJDlip/ljLnphY3nmoTmqKHmnb9cXHJcXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlQ2FjaGUuc2V0KHBhZ2VUeXBlLCBtYXRjaGVkVGVtcGxhdGVOYW1lKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGxvZyhg5Yy56YWN5bm257yT5a2Y5LiA57qn5qih5p2/OiAke21hdGNoZWRUZW1wbGF0ZU5hbWV9YCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICBicmVhaztcXHJcXG4gICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgbG9nKGDlsJ3or5XmqKHmnb8gJHtjdXJyZW50TmFtZX0g5aSx6LSlOiAke2UubWVzc2FnZX1gKTtcXHJcXG4gICAgICAgICAgICB9XFxyXFxuICAgICAgICB9XFxyXFxuICAgIH1cXHJcXG4gICAgXFxyXFxuICAgIC8vIDMuIOWkhOeQhue7k+aenFxcclxcbiAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IDApIHtcXHJcXG4gICAgICAgIHNldFJlc3VsdCh0eXBlb2YgZCAhPT0gJ3VuZGVmaW5lZCc/IGQuY29uY2F0KHJlc3VsdCkgOiByZXN1bHQpO1xcclxcbiAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgbG9nKFxcXCLmsqHmnInljLnphY3liLDku7vkvZXmnInmlYjmqKHmnb9cXFwiKTtcXHJcXG4gICAgICAgIHNldFJlc3VsdChbXSk7XFxyXFxuICAgIH1cXHJcXG4gICAgXFxyXFxuICAgIHJldHVybiB7XFxyXFxuICAgICAgICB0ZW1wbGF0ZTogbWF0Y2hlZFRlbXBsYXRlTmFtZSxcXHJcXG4gICAgICAgIGl0ZW1zOiByZXN1bHRcXHJcXG4gICAgfTtcXHJcXG59XFxyXFxuLy8gNS4g5a+85Ye65o6l5Y+jXFxyXFxuJC5leHBvcnRzID0ge1xcclxcbiAgICBhdXRvUGFnZTogYXV0b1BhZ2UsXFxyXFxuICAgIGNsZWFyQ2FjaGU6IChwYWdlVHlwZSkgPT4gdGVtcGxhdGVDYWNoZS5jbGVhcihwYWdlVHlwZSB8fCBNWV9UWVBFKVxcclxcbn1cIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcImF1dG8yXCIsXCJwYXRoXCI6XCJhdXRvMlwiLFwicnVsZVwiOlwiY29uc3Qgc2Vjb25kYXJ5VGVtcGxhdGVzID0ge1xcclxcbiAgICBcXFwiLmJcXFwiOiB7XFxyXFxuICAgICAgICB0aXRsZTogXFxcIi5zdHVpLWNvbnRlbnRfX2RldGFpbC0taDEmJlRleHRcXFwiLFxcclxcbiAgICAgICAgZGVzYzogXFxcIi5kZXNjfHwuZGV0YWlsLWNvbnRlbnQmJlRleHRcXFwiLFxcclxcbiAgICAgICAgaW1nOiBcXFwiLmxhenlsb2FkJiZkYXRhLW9yaWdpbmFsXFxcIixcXHJcXG4gICAgICAgIGNvbF90eXBlOiBcXFwibW92aWVfMV92ZXJ0aWNhbF9waWNfYmx1clxcXCIsXFxyXFxuICAgICAgICDnur/ot686IFxcXCJib2R5JiYuYlxcXCIsXFxyXFxuICAgICAgICDpgInpm4Y6IFxcXCJib2R5JiYuYlxcXCIsXFxyXFxuICAgICAgICDnur/ot6/lkI06IFxcXCJoMyYmVGV4dFxcXCIsXFxyXFxuICAgICAgICDpgInpm4bliJfooag6IFxcXCJ1bCYmbGlcXFwiXFxyXFxuICAgIH0sXFxyXFxuICAgIFxcXCJuYXYtdGFic1xcXCI6IHtcXHJcXG4gICAgICAgIHRpdGxlOiBcXFwiLmRhdGEmJlRleHRcXFwiLFxcclxcbiAgICAgICAgZGVzYzogXFxcIi5kYXRhLDMmJlRleHRcXFwiLFxcclxcbiAgICAgICAgaW1nOiBcXFwiLmxhenlsb2FkJiZkYXRhLW9yaWdpbmFsXFxcIixcXHJcXG4gICAgICAgIGNvbF90eXBlOiBcXFwibW92aWVfMV92ZXJ0aWNhbF9waWNfYmx1clxcXCIsXFxyXFxuICAgICAgICDnur/ot686IFxcXCIubmF2LXRhYnMmJmFcXFwiLFxcclxcbiAgICAgICAg6YCJ6ZuGOiBcXFwiLnRhYi1jb250ZW50JiYubXl1aS1jb250ZW50X19saXN0fHwuc3R1aS1jb250ZW50X19wbGF5bGlzdFxcXCIsXFxyXFxuICAgICAgICDnur/ot6/lkI06IFxcXCJUZXh0XFxcIixcXHJcXG4gICAgICAgIOmAiembhuWIl+ihqDogXFxcInVsJiZsaVxcXCJcXHJcXG4gICAgfSxcXHJcXG4gICAgXFxcIm1vLXBsYXktbG9hZFxcXCI6IHtcXHJcXG4gICAgICAgIHRpdGxlOiBcXFwiLnZpZGVvLWluZm8taXRlbXMsMiYmVGV4dFxcXCIsXFxyXFxuICAgICAgICBpbWc6IFxcXCIubGF6eWxvYWQmJmRhdGEtc3JjXFxcIixcXHJcXG4gICAgICAgIGNvbF90eXBlOiBcXFwibW92aWVfMV92ZXJ0aWNhbF9waWNfYmx1clxcXCIsXFxyXFxuICAgICAgICDnur/ot686IFxcXCJib2R5JiYubW9kdWxlLXRhYi1jb250ZW50JiYubW9kdWxlLXRhYi1pdGVtXFxcIixcXHJcXG4gICAgICAgIOmAiembhjogXFxcImJvZHkmJi5zb3J0LWl0ZW1cXFwiLFxcclxcbiAgICAgICAg57q/6Lev5ZCNOiBcXFwic3BhbiYmVGV4dFxcXCIsXFxyXFxuICAgICAgICDpgInpm4bliJfooag6IFxcXCJib2R5JiZhXFxcIlxcclxcbiAgICB9LFxcclxcbiAgICBcXFwibmF2LXRhYnMxXFxcIjoge1xcclxcbiAgICAgICAgdGl0bGU6IFxcXCJwLDEmJlRleHRcXFwiLFxcclxcbiAgICAgICAgZGVzYzogXFxcInAsMiYmVGV4dFxcXCIsXFxyXFxuICAgICAgICBpbWc6IFxcXCIubGF6eWxvYWQmJmRhdGEtb3JpZ2luYWxcXFwiLFxcclxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJtb3ZpZV8xX3ZlcnRpY2FsX3BpY19ibHVyXFxcIixcXHJcXG4gICAgICAgIOe6v+i3rzogXFxcIi5uYXYtdGFicyYmYVxcXCIsXFxyXFxuICAgICAgICDpgInpm4Y6IFxcXCJib2R5JiYuc3R1aS1jb250ZW50X19wbGF5bGlzdFxcXCIsXFxyXFxuICAgICAgICDnur/ot6/lkI06IFxcXCJhJiZUZXh0XFxcIixcXHJcXG4gICAgICAgIOmAiembhuWIl+ihqDogXFxcInVsJiZsaVxcXCJcXHJcXG4gICAgfSxcXHJcXG4gICAgXFxcInBsYXlfc291cmNlX3RhYlxcXCI6IHtcXHJcXG4gICAgICAgIHRpdGxlOiBcXFwiLnJlbWFya3MmJlRleHRcXFwiLFxcclxcbiAgICAgICAgZGVzYzogXFxcIi5kZXNjX3R4dCYmVGV4dFxcXCIsXFxyXFxuICAgICAgICBpbWc6IFxcXCIuaW1nLWNvdmVyfHwudm9kLWRldGFpbC1iamNvdmVyfHwudm9kLWRldGFpbC1iaiYmc3JjXFxcIixcXHJcXG4gICAgICAgIGNvbF90eXBlOiBcXFwibW92aWVfMV92ZXJ0aWNhbF9waWNfYmx1clxcXCIsXFxyXFxuICAgICAgICDnur/ot686IFxcXCIucGxheV9zb3VyY2VfdGFiJiZhXFxcIixcXHJcXG4gICAgICAgIOmAiembhjogXFxcImJvZHkmJi5wbGF5ZXJfbGlzdHx8I3BsYXlsaXN0Ym94fHwjcGxheXN4XFxcIixcXHJcXG4gICAgICAgIOe6v+i3r+WQjTogXFxcImEmJlRleHRcXFwiLFxcclxcbiAgICAgICAg6YCJ6ZuG5YiX6KGoOiBcXFwidWwmJmxpXFxcIlxcclxcbiAgICB9LFxcclxcbiAgICBcXFwiZmVkLXBsYXktaXRlbVxcXCI6IHtcXHJcXG4gICAgICAgIHRpdGxlOiBcXFwiZGQmJmxpLDMmJlRleHRcXFwiLFxcclxcbiAgICAgICAgZGVzYzogXFxcImRkJiZsaSw2JiZUZXh0XFxcIixcXHJcXG4gICAgICAgIGltZzogXFxcIi5mZWQtbGF6eSYmZGF0YS1vcmlnaW5hbFxcXCIsXFxyXFxuICAgICAgICBjb2xfdHlwZTogXFxcIm1vdmllXzFfdmVydGljYWxfcGljX2JsdXJcXFwiLFxcclxcbiAgICAgICAg57q/6LevOiBcXFwiYm9keSYmLmZlZC1kcm9wLWJ0bnNcXFwiLFxcclxcbiAgICAgICAg6YCJ6ZuGOiBcXFwiYm9keSYmLmZlZC1wbGF5LWl0ZW1cXFwiLFxcclxcbiAgICAgICAg57q/6Lev5ZCNOiBcXFwiYSYmVGV4dFxcXCIsXFxyXFxuICAgICAgICDpgInpm4bliJfooag6IFxcXCJib2R5JiYuZmVkLWJ0bnMtaW5mb1xcXCJcXHJcXG4gICAgfSxcXHJcXG4gICAgXFxcIm1vZHVsZS10YWItaXRlbVxcXCI6IHtcXHJcXG4gICAgICAgIHRpdGxlOiBcXFwiLnZpZGVvLWluZm8taXRlbXMsMSYmVGV4dFxcXCIsXFxyXFxuICAgICAgICBkZXNjOiBcXFwiLnZpZGVvLWluZm8taXRlbXMsMiYmVGV4dFxcXCIsXFxyXFxuICAgICAgICBpbWc6IFxcXCIubGF6eWxvYWQmJmRhdGEtb3JpZ2luYWx8fGRhdGEtc3JjfHxzcmNcXFwiLFxcclxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJtb3ZpZV8xX3ZlcnRpY2FsX3BpY19ibHVyXFxcIixcXHJcXG4gICAgICAgIOe6v+i3rzogXFxcImJvZHkmJi5tb2R1bGUtdGFiLWl0ZW1cXFwiLFxcclxcbiAgICAgICAg6YCJ6ZuGOiBcXFwiYm9keSYmLnNjcm9sbC1ib3gteXx8Lm1vZHVsZS1saXN0XFxcIixcXHJcXG4gICAgICAgIOe6v+i3r+WQjTogXFxcInNwYW4mJlRleHRcXFwiLFxcclxcbiAgICAgICAg6YCJ6ZuG5YiX6KGoOiBcXFwiYm9keSYmYVxcXCJcXHJcXG4gICAgfSxcXHJcXG4gICAgXFxcImgzXFxcIjoge1xcclxcbiAgICAgICAgdGl0bGU6IFxcXCIuZGF0YSwyJiZUZXh0XFxcIixcXHJcXG4gICAgICAgIGRlc2M6IFxcXCIuZGV0YWlsLXNrZXRjaHx8LmRhdGEsM3x8I2Rlc2MmJlRleHRcXFwiLFxcclxcbiAgICAgICAgaW1nOiBcXFwiLmxhenlsb2FkJiZkYXRhLW9yaWdpbmFsXFxcIixcXHJcXG4gICAgICAgIGNvbF90eXBlOiBcXFwibW92aWVfMV92ZXJ0aWNhbF9waWNfYmx1clxcXCIsXFxyXFxuICAgICAgICDnur/ot686IFxcXCJib2R5JiYuc3R1aS1wYW5uZWw6aGFzKC5zdHVpLWNvbnRlbnRfX3BsYXlsaXN0KVxcXCIsXFxyXFxuICAgICAgICDpgInpm4Y6IFxcXCJib2R5JiYuc3R1aS1jb250ZW50X19wbGF5bGlzdFxcXCIsXFxyXFxuICAgICAgICDnur/ot6/lkI06IFxcXCJoMyYmVGV4dFxcXCIsXFxyXFxuICAgICAgICDpgInpm4bliJfooag6IFxcXCJ1bCYmbGlcXFwiXFxyXFxuICAgIH0sXFxyXFxuICAgIFxcXCJteXVpLWNvbnRlbnRfX2xpc3RcXFwiOiB7XFxyXFxuICAgICAgICB0aXRsZTogKGh0bWwpID0+XFxyXFxuICAgICAgICAgICAgICAgIHBkZmgoaHRtbCwgJy5kYXRhLDAmJlRleHQnKVxcclxcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgn5Zyw5Yy677yaJywgJyAgJylcXHJcXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoJ+W5tOS7ve+8micsICcgICcpICsgJ1xcXFxuJyArXFxyXFxuICAgICAgICAgICAgICAgIHBkZmgoaHRtbCwgJy5kYXRhLDEmJlRleHQnKS5zdWJzdHJpbmcoMCwgMTUpICsgJ1xcXFxuJyArXFxyXFxuICAgICAgICAgICAgICAgIHBkZmgoaHRtbCwgJy5kYXRhLDImJlRleHQnKVxcclxcbiAgICAgICAgLFxcclxcbiAgICAgICAgZGVzYzogXFxcIi5kYXRhLDMmJlRleHRcXFwiLFxcclxcbiAgICAgICAgaW1nOiBcXFwiLmxhenlsb2FkJiZkYXRhLW9yaWdpbmFsXFxcIixcXHJcXG4gICAgICAgIGNvbF90eXBlOiBcXFwibW92aWVfMV92ZXJ0aWNhbF9waWNfYmx1clxcXCIsXFxyXFxuICAgICAgICDnur/ot686IFxcXCJib2R5JiYubXl1aS1wYW5lbC1ib3g6aGFzKC5teXVpLWNvbnRlbnRfX2xpc3QpXFxcIixcXHJcXG4gICAgICAgIOmAiembhjogXFxcImJvZHkmJi5teXVpLWNvbnRlbnRfX2xpc3RcXFwiLFxcclxcbiAgICAgICAg57q/6Lev5ZCNOiBcXFwiaDMmJlRleHRcXFwiLFxcclxcbiAgICAgICAg6YCJ6ZuG5YiX6KGoOiBcXFwidWwmJmxpXFxcIlxcclxcbiAgICB9XFxyXFxufVxcclxcblxcclxcbi8vIOWIm+W7uue8k+WtmOeuoeeQhuWZqFxcclxcbmNvbnN0IHRlbXBsYXRlQ2FjaGUgPSB7XFxyXFxuICAgIGdldDogKCkgPT4ge1xcclxcbiAgICAgICAgY29uc3QgY2FjaGVLZXkgPSBgdGVtcGxhdGVfJHttZDUoTVlfSE9NRSl9YDtcXHJcXG4gICAgICAgIHJldHVybiBnZXRNeVZhcihjYWNoZUtleSk7XFxyXFxuICAgIH0sXFxyXFxuICAgIHNldDogKHRlbXBsYXRlTmFtZSkgPT4ge1xcclxcbiAgICAgICAgY29uc3QgY2FjaGVLZXkgPSBgdGVtcGxhdGVfJHttZDUoTVlfSE9NRSl9YDtcXHJcXG4gICAgICAgIHB1dE15VmFyKGNhY2hlS2V5LCB0ZW1wbGF0ZU5hbWUpO1xcclxcbiAgICAgICAgbG9nKGDnvJPlrZjmqKHmnb86ICR7dGVtcGxhdGVOYW1lfSBmb3IgJHtNWV9IT01FfWApO1xcclxcbiAgICB9LFxcclxcbiAgICBjbGVhcjogKCkgPT4ge1xcclxcbiAgICAgICAgY29uc3QgY2FjaGVLZXkgPSBgdGVtcGxhdGVfJHttZDUoTVlfSE9NRSl9YDtcXHJcXG4gICAgICAgIHJlbW92ZU15VmFyKGNhY2hlS2V5KTtcXHJcXG4gICAgICAgIGxvZyhg5riF6Zmk5qih5p2/57yT5a2YOiAke01ZX0hPTUV9YCk7XFxyXFxuICAgIH1cXHJcXG59O1xcclxcblxcclxcbmNvbnN0IGF1dG9TZWNvbmRhcnlQYWdlID0gKGh0bWxzcmMsIGxhenkpID0+IHtcXHJcXG4gICAgaWYgKHR5cGVvZiBsYXp5ID09PSAndW5kZWZpbmVkJykgbGF6eSA9IFxcXCJcXFwiO1xcclxcbiAgICBjb25zdCBodG1sU291cmNlID0gaHRtbHNyYztcXHJcXG4gICAgXFxyXFxuICAgIC8vIOWwneivleS7jue8k+WtmOiOt+WPluaooeadv1xcclxcbiAgICBjb25zdCBjYWNoZWRUZW1wbGF0ZSA9IHRlbXBsYXRlQ2FjaGUuZ2V0KCk7XFxyXFxuICAgIGlmIChjYWNoZWRUZW1wbGF0ZSAmJiBzZWNvbmRhcnlUZW1wbGF0ZXNbY2FjaGVkVGVtcGxhdGVdKSB7XFxyXFxuICAgICAgICBsb2coYOS9v+eUqOe8k+WtmOaooeadvzogJHtjYWNoZWRUZW1wbGF0ZX1gKTtcXHJcXG4gICAgICAgIHRyeSB7XFxyXFxuICAgICAgICAgICAgbGV0IGNvbmZpZyA9IHNlY29uZGFyeVRlbXBsYXRlc1tjYWNoZWRUZW1wbGF0ZV07XFxyXFxuICAgICAgICAgICAgaWYgKHByb2Nlc3NUZW1wbGF0ZShjb25maWcsIGh0bWxTb3VyY2UsIGxhenkpKSB7XFxyXFxuICAgICAgICAgICAgICAgIHJldHVybjtcXHJcXG4gICAgICAgICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZUNhY2hlLmNsZWFyKCk7XFxyXFxuICAgICAgICAgICAgfVxcclxcbiAgICAgICAgfSBjYXRjaCAoZSkge1xcclxcbiAgICAgICAgICAgIGxvZyhg57yT5a2Y5qih5p2/5aSE55CG5aSx6LSlOiAke2UubWVzc2FnZX1gKTtcXHJcXG4gICAgICAgICAgICB0ZW1wbGF0ZUNhY2hlLmNsZWFyKCk7XFxyXFxuICAgICAgICB9XFxyXFxuICAgIH1cXHJcXG4gICAgXFxyXFxuICAgIC8vIOayoeaciee8k+WtmOaIlue8k+WtmOaXoOaViO+8jOW8gOWni+WMuemFjeaooeadv1xcclxcbiAgICBmb3IgKHZhciB0ZW1wbGF0ZU5hbWUgaW4gc2Vjb25kYXJ5VGVtcGxhdGVzKSB7XFxyXFxuICAgICAgICBsb2coYOWwneivleaooeadvzogJHt0ZW1wbGF0ZU5hbWV9YCk7XFxyXFxuICAgICAgICB0cnkge1xcclxcbiAgICAgICAgICAgIGxldCBjb25maWcgPSBzZWNvbmRhcnlUZW1wbGF0ZXNbdGVtcGxhdGVOYW1lXTtcXHJcXG4gICAgICAgICAgICBpZiAocHJvY2Vzc1RlbXBsYXRlKGNvbmZpZywgaHRtbFNvdXJjZSwgbGF6eSkpIHtcXHJcXG4gICAgICAgICAgICAgICAgLy8g5Yy56YWN5oiQ5Yqf77yM57yT5a2Y5qih5p2/5ZCN56ewXFxyXFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlQ2FjaGUuc2V0KHRlbXBsYXRlTmFtZSk7XFxyXFxuICAgICAgICAgICAgICAgIHJldHVybjtcXHJcXG4gICAgICAgICAgICB9XFxyXFxuICAgICAgICB9IGNhdGNoIChlKSB7XFxyXFxuICAgICAgICAgICAgbG9nKFxcXCLlsJ3or5XkuoznuqfmqKHmnb8gXFxcIiArIHRlbXBsYXRlTmFtZSArIFxcXCIg5aSx6LSlOiBcXFwiICsgZS5tZXNzYWdlKTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgfVxcclxcbiAgICBcXHJcXG4gICAgbG9nKFxcXCLmsqHmnInljLnphY3liLDku7vkvZXkuoznuqfmqKHmnb9cXFwiKTtcXHJcXG4gICAgc2V0UmVzdWx0KFtdKTtcXHJcXG59XFxyXFxuXFxyXFxuLy8g5o+Q5Y+W5qih5p2/5aSE55CG6YC76L6R5Yiw5Y2V54us5Ye95pWwXFxyXFxuY29uc3QgcHJvY2Vzc1RlbXBsYXRlID0gKGNvbmZpZywgaHRtbFNvdXJjZSwgbGF6eSkgPT4ge1xcclxcbiAgICAvLyDojrflj5bnur/ot6/lhYPntKBcXHJcXG4gICAgdmFyIGl0ZW1zID0gcGRmYShodG1sU291cmNlLCBjb25maWcu57q/6LevKTtcXHJcXG4gICAgbG9nKGDmib7liLDnur/ot6/mlbDph486ICR7aXRlbXMubGVuZ3RofWApO1xcclxcbiAgICBcXHJcXG4gICAgaWYgKGl0ZW1zLmxlbmd0aCA+IDApIHsgIFxcclxcbiAgICAgICAgLy8g5aSE55CG57q/6Lev5ZKM6YCJ6ZuGXFxyXFxuICAgICAgICB2YXIgcmVzdWx0ID0gcHJvY2Vzc0xpbmVzQW5kRXBpc29kZXMoXFxyXFxuICAgICAgICAgICAgaHRtbFNvdXJjZSwgXFxyXFxuICAgICAgICAgICAgY29uZmlnLue6v+i3rywgXFxyXFxuICAgICAgICAgICAgY29uZmlnLue6v+i3r+WQjSwgXFxyXFxuICAgICAgICAgICAgY29uZmlnLumAiembhiwgXFxyXFxuICAgICAgICAgICAgY29uZmlnLumAiembhuWIl+ihqCxcXHJcXG4gICAgICAgICAgICBjb25maWcu5o6S6ZmkXFxyXFxuICAgICAgICApO1xcclxcbiAgICAgICAgdmFyIHRhYnMgPSByZXN1bHQudGFicztcXHJcXG4gICAgICAgIHZhciBsaXN0cyA9IHJlc3VsdC5saXN0cztcXHJcXG4gICAgICAgIFxcclxcbiAgICAgLy8gICBsb2coYOino+aekOW+l+WIsOe6v+i3r+WQjTogJHt0YWJzLmpvaW4oXFxcIiwgXFxcIil9YCk7XFxyXFxuICAgICAgICBcXHJcXG4gICAgICAgIC8vIOajgOafpee6v+i3r+WQjeaYr+WQpuWMheWQq+aXoOaViOWFs+mUruivjVxcclxcbiAgICAgICAgaWYgKHRhYnMubGVuZ3RoID4gMCkge1xcclxcbiAgICAgICAgICAgIGNvbnN0IGV4Y2x1ZGVLZXl3b3JkcyA9IFtcXFwi5Li75ryUXFxcIiwgXFxcIuexu+Wei1xcXCIsIFxcXCLlubTku71cXFwiLCBcXFwi5Zyw5Yy6XFxcIiwgXFxcIuivreiogFxcXCIsIFxcXCLlr7zmvJRcXFwiLCBcXFwi5pu05pawXFxcIiwgXFxcIueKtuaAgVxcXCIsIFxcXCLlubTku6NcXFwiXTtcXHJcXG4gICAgICAgICAgICBsZXQgaGFzSW52YWxpZExpbmVOYW1lID0gdGFicy5zb21lKHRhYk5hbWUgPT4gXFxyXFxuICAgICAgICAgICAgICAgIGV4Y2x1ZGVLZXl3b3Jkcy5zb21lKGtleXdvcmQgPT4gdGFiTmFtZS5pbmNsdWRlcyhrZXl3b3JkKSlcXHJcXG4gICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgIFxcclxcbiAgICAgICAgICAgIGlmIChoYXNJbnZhbGlkTGluZU5hbWUpIHtcXHJcXG4gICAgICAgICAgICAgICAgbG9nKGDnur/ot6/lkI3ljIXlkKvml6DmlYjlhbPplK7or406ICR7dGFicy5qb2luKFxcXCIsIFxcXCIpfWApO1xcclxcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYOe6v+i3r+WQjeWMheWQq+aXoOaViOWFs+mUruivjTogJHt0YWJzLmpvaW4oXFxcIiwgXFxcIil9YCk7XFxyXFxuICAgICAgICAgICAgfVxcclxcbiAgICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgICAgICBsb2coXFxcIuayoeacieino+aekOWIsOacieaViOeahOe6v+i3r+WQjVxcXCIpO1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgICAgXFxyXFxuICAgICAgICAvLyDmo4Dmn6XmlbTkuKrmqKHmnb/mmK/lkKbmnInmnInmlYjpgInpm4ZcXHJcXG4gICAgICAgIGxldCBoYXNWYWxpZExpc3QgPSBmYWxzZTtcXHJcXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdHMubGVuZ3RoOyBpKyspIHtcXHJcXG4gICAgICAgICAgICBpZiAobGlzdHNbaV0gJiYgbGlzdHNbaV0ubGVuZ3RoID4gMCkge1xcclxcbiAgICAgICAgICAgICAgICBoYXNWYWxpZExpc3QgPSB0cnVlO1xcclxcbiAgICAgICAgICAgICAgICBicmVhaztcXHJcXG4gICAgICAgICAgICB9XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgICBcXHJcXG4gICAgICAgIC8vIOWmguaenOaVtOS4quaooeadv+mDveayoeacieacieaViOmAiembhu+8jOi3s+i/h+i/meS4quaooeadv1xcclxcbiAgICAgICAgaWYgKCFoYXNWYWxpZExpc3QpIHtcXHJcXG4gICAgICAgICAgICBsb2coXFxcIuaJgOaciee6v+i3r+eahOmAiembhuWIl+ihqOmDveS4uuepulxcXCIpO1xcclxcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcXFwi5pW05Liq5qih5p2/55qE6YCJ6ZuG5YiX6KGo6YO95Li656m6XFxcIik7XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgICBcXHJcXG4gICAgIC8vICAgbG9nKFxcXCLmqKHmnb/mnInmlYjmgKfmo4Dmn6XpgJrov4fvvIzlvIDlp4vliJvlu7ror6bmg4XpobUuLi5cXFwiKTtcXHJcXG5cXHJcXG4gICAgICAgIC8vIOWIm+W7uuivpuaDhemhuVxcclxcbiAgICAgICAgdmFyIGQgPSBbe1xcclxcbiAgICAgICAgICAgIHRpdGxlOiAoJC50eXBlKGNvbmZpZy50aXRsZSkgPT09ICdmdW5jdGlvbicgPyBjb25maWcudGl0bGUoaHRtbFNvdXJjZSkgOiBwZGZoKGh0bWxTb3VyY2UsIGNvbmZpZy50aXRsZSkpIHx8ICfmnKrojrflj5bliLDmoIfpopgnLFxcclxcbiAgICAgICAgICAgIGRlc2M6IHBkZmgoaHRtbFNvdXJjZSwgY29uZmlnLmRlc2MpIHx8ICfml6AnLFxcclxcbiAgICAgICAgICAgIGltZzogcGQoaHRtbFNvdXJjZSwgY29uZmlnLmltZykgfHwgXFxcIlxcXCIsXFxyXFxuICAgICAgICAgICAgdXJsOiBNWV9VUkwsXFxyXFxuICAgICAgICAgICAgY29sX3R5cGU6IGNvbmZpZy5jb2xfdHlwZSB8fCBcXFwibW92aWVfMVxcXCJcXHJcXG4gICAgICAgIH1dOyBcXHJcXG4gICAgICAgIFxcclxcbiAgICAgICAgLy8g56Gu5L+dbGlzdHPooqvmraPnoa7lrZjlgqhcXHJcXG4gICAgICAgIHN0b3JhZ2UwLnB1dE15VmFyKFxcXCJsaXN0c1xcXCIsIGxpc3RzKTtcXHJcXG4gICAgXFxyXFxuICAgICAgICAvLyDmt7vliqDmjpLluo/mjInpkq5cXHJcXG4gICAgICAgIGQucHVzaChjcmVhdGVTb3J0QnV0dG9uKE1ZX1VSTCwgdGFicywgbGlzdHMsIGRbMF0sIGxhenkpKTtcXHJcXG4gICAgICAgIFxcclxcbiAgICAgICAgLy8g5re75Yqg57q/6Lev5YiH5o2i5oyJ6ZKuXFxyXFxuICAgICAgICBpZiAodGFicy5sZW5ndGggPiAwKSB7XFxyXFxuICAgICAgICAgICAgdmFyIGxpbmVCdXR0b25zID0gY3JlYXRlTGluZUJ1dHRvbnMoTVlfVVJMLCB0YWJzLCBsaXN0cywgbGF6eSk7XFxyXFxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lQnV0dG9ucy5sZW5ndGg7IGkrKykge1xcclxcbiAgICAgICAgICAgICAgICBkLnB1c2gobGluZUJ1dHRvbnNbaV0pO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICAgIFxcclxcbiAgICAgICAgLy8g5re75Yqg6YCJ6ZuG5YiX6KGoXFxyXFxuICAgICAgICB2YXIgZXBpc29kZXMgPSBjcmVhdGVFcGlzb2RlTGlzdChNWV9VUkwsIGxpc3RzLCBsYXp5KTtcXHJcXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZXBpc29kZXMubGVuZ3RoOyBqKyspIHtcXHJcXG4gICAgICAgICAgICBkLnB1c2goZXBpc29kZXNbal0pO1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgICAgXFxyXFxuICAgICAgICAvLyDorr7nva7mm7TmlrDpm4bmlbDop4TliJlcXHJcXG4gICAgICAgIHNldExhc3RFcGlzb2RlUnVsZShjb25maWcu6YCJ6ZuGLCBjb25maWcu6YCJ6ZuG5YiX6KGoKTtcXHJcXG4gICAgICAgIFxcclxcbiAgICAgICAgLy8g5re75Yqg5bqV6YOo56m655m95Z2XXFxyXFxuICAgICAgICBkLnB1c2goY3JlYXRlRm9vdGVyQmxvY2soTVlfVVJMKSk7XFxyXFxuICAgICAgICBcXHJcXG4gICAgICAgIHNldFJlc3VsdChkKTtcXHJcXG4gICAgICAgIGxvZyhcXFwi5Yy56YWN5LqM57qn5qih5p2/5oiQ5YqfXFxcIik7XFxyXFxuICAgICAgICByZXR1cm4gdHJ1ZTtcXHJcXG4gICAgfVxcclxcbiAgICByZXR1cm4gZmFsc2U7XFxyXFxufVxcclxcblxcclxcblxcclxcbmNvbnN0IGNyZWF0ZUxpbmVCdXR0b25zID0gKE1ZX1VSTCwgdGFicywgbGlzdHMsIGxhenkpID0+IHtcXHJcXG4gICAgLy8g6I635Y+W5b2T5YmN57q/6Lev5bm256Gu5L+d5pyJ5pWIXFxyXFxuICAgIGxldCBjdXJyZW50TGluZSA9IHBhcnNlSW50KGdldE15VmFyKE1ZX1VSTCwgJzAnKSkgfHwgMDtcXHJcXG4gICAgY3VycmVudExpbmUgPSBNYXRoLm1pbihjdXJyZW50TGluZSwgdGFicy5sZW5ndGggLSAxKTtcXHJcXG4gICAgXFxyXFxuICAgIHJldHVybiB0YWJzLm1hcCgodGFiTmFtZSwgaWQpID0+ICh7XFxyXFxuICAgICAgICB0aXRsZTogY3VycmVudExpbmUgPT0gaWQgPyBg4oCc4oCcJHt0YWJOYW1lfeKAneKAnWAgOiB0YWJOYW1lLFxcclxcbiAgICAgICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKCjnur/ot6/liJfooagsIGxhenksIGlkLCBNWV9VUkwpID0+IHtcXHJcXG4gICAgICAgICAgICBjb25zdCBsaXN0cyA9IHN0b3JhZ2UwLmdldE15VmFyKFxcXCJsaXN0c1xcXCIpO1xcclxcbiAgICAgICAgICAgIC8vIOehruS/nee6v+i3r0lE5pyJ5pWIXFxyXFxuICAgICAgICAgICAgY29uc3QgdmFsaWRJZCA9IE1hdGgubWluKGlkLCBsaXN0cy5sZW5ndGggLSAxKTtcXHJcXG4gICAgICAgICAgICBcXHJcXG4gICAgICAgICAgICBpZiAoIWxpc3RzW3ZhbGlkSWRdIHx8IGxpc3RzW3ZhbGlkSWRdLmxlbmd0aCA9PT0gMCkge1xcclxcbiAgICAgICAgICAgICAgICBsb2coYOmAiembhuWIl+ihqOS4jeWtmOWcqOaIluS4uuepuu+8jOe6v+i3r0lEOiAke3ZhbGlkSWR9YCk7XFxyXFxuICAgICAgICAgICAgICAgIC8vIOaYvuekuumUmeivr+aPkOekuuS9huS4jeS4reaWreaTjeS9nFxcclxcbiAgICAgICAgICAgICAgICB1cGRhdGVJdGVtKHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBg4oCc4oCcJHt0YWJOYW1lfSjml6DpgInpm4Yp4oCd4oCdYCxcXHJcXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhOiB7IGlkOiBgJHtNWV9VUkx9X+e6v+i3ryR7dmFsaWRJZH1gIH1cXHJcXG4gICAgICAgICAgICAgICAgfSk7XFxyXFxuICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxyXFxuICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgIFxcclxcbiAgICAgICAgICAgIC8vIOabtOaWsOaJgOaciee6v+i3r+aMiemSrueKtuaAgVxcclxcbiAgICAgICAgICAgIOe6v+i3r+WIl+ihqC5mb3JFYWNoKChuYW1lLCB4aWQpID0+IHtcXHJcXG4gICAgICAgICAgICAgICAgdHJ5IHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUl0ZW0oe1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB2YWxpZElkID09IHhpZCA/IGDigJzigJwke25hbWV94oCd4oCdYCA6IG5hbWUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmE6IHsgaWQ6IGAke01ZX1VSTH1f57q/6LevJHt4aWR9YCB9XFxyXFxuICAgICAgICAgICAgICAgICAgICB9KTtcXHJcXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgbG9nKFxcXCLmm7TmlrDnur/ot6/mjInpkq7plJnor686IFxcXCIgKyBlLm1lc3NhZ2UpO1xcclxcbiAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgfSk7XFxyXFxuICAgICAgICAgICAgXFxyXFxuICAgICAgICAgICAgcHV0TXlWYXIoTVlfVVJMLCB2YWxpZElkLnRvU3RyaW5nKCkpO1xcclxcbiAgICAgICAgICAgIGxldCBjaGFwdGVycyA9IGxpc3RzW3ZhbGlkSWRdO1xcclxcbiAgICAgICAgICAgIFxcclxcbiAgICAgICAgICAgIC8vIOajgOafpeaOkuW6j+eKtuaAgVxcclxcbiAgICAgICAgICAgIGNvbnN0IHNvcnRPcmRlciA9IGdldE15VmFyKE1ZX1VSTCArIFxcXCLnq6DoioLmjpLluo9cXFwiLCAnIzFhYWQxOVxcXCI+5q2j5bqPJyk7XFxyXFxuICAgICAgICAgICAgaWYgKHNvcnRPcmRlciA9PSAnI0ZGMDAwMFxcXCI+5YCS5bqPJykge1xcclxcbiAgICAgICAgICAgICAgICBjaGFwdGVycyA9IGNoYXB0ZXJzLnNsaWNlKCkucmV2ZXJzZSgpO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICBcXHJcXG4gICAgICAgICAgICAvLyDnlJ/miJDpgInpm4bpoblcXHJcXG4gICAgICAgICAgICBsZXQgY2hhcHRlckl0ZW1zID0gY2hhcHRlcnMubWFwKGRhdGEgPT4gKHtcXHJcXG4gICAgICAgICAgICAgICAgdGl0bGU6IHBkZmgoZGF0YSwgJ2EmJlRleHQnKSxcXHJcXG4gICAgICAgICAgICAgICAgdXJsOiBwZChkYXRhLCAnYSYmaHJlZicpICsgbGF6eSxcXHJcXG4gICAgICAgICAgICAgICAgY29sX3R5cGU6IGNoYXB0ZXJzLmxlbmd0aCA+IDMgPyAndGV4dF80JyA6ICd0ZXh0XzInLFxcclxcbiAgICAgICAgICAgICAgICBleHRyYTogeyBcXHJcXG4gICAgICAgICAgICAgICAgICAgIGNsczogTVlfVVJMICsgXFxcIl/pgInpm4ZcXFwiLCBcXHJcXG4gICAgICAgICAgICAgICAgICAgIGlkOiBwZChkYXRhLCAnYSYmaHJlZicpIFxcclxcbiAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgfSkpO1xcclxcbiAgICAgICAgICAgIFxcclxcbiAgICAgICAgICAgIC8vIOWFiOWIoOmZpOaXp+mAiembhiAtIOS/ruWkjeS6hui/memHjOeahHRyeS1jYXRjaOivreazlemUmeivr1xcclxcbiAgICAgICAgICAgIHRyeSB7XFxyXFxuICAgICAgICAgICAgICAgIGRlbGV0ZUl0ZW1CeUNscyhNWV9VUkwgKyBcXFwiX+mAiembhlxcXCIpO1xcclxcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgbG9nKFxcXCLliKDpmaTml6fpgInpm4bplJnor686IFxcXCIgKyBlLm1lc3NhZ2UpO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICBcXHJcXG4gICAgICAgICAgICAvLyDmt7vliqDmlrDpgInpm4ZcXHJcXG4gICAgICAgICAgICB0cnkge1xcclxcbiAgICAgICAgICAgICAgICBhZGRJdGVtQmVmb3JlKE1ZX1VSTCArIFxcXCJmb290ZXJcXFwiLCBjaGFwdGVySXRlbXMpO1xcclxcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgbG9nKFxcXCLmt7vliqDpgInpm4bplJnor686IFxcXCIgKyBlLm1lc3NhZ2UpO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICBcXHJcXG4gICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcclxcbiAgICAgICAgfSwgdGFicywgbGF6eSwgaWQsIE1ZX1VSTCksXFxyXFxuICAgICAgICBjb2xfdHlwZTogJ2ZsZXhfYnV0dG9uJyxcXHJcXG4gICAgICAgIGV4dHJhOiB7IGlkOiBgJHtNWV9VUkx9X+e6v+i3ryR7aWR9YCB9XFxyXFxuICAgIH0pKTtcXHJcXG59XFxyXFxuXFxyXFxuLy8g5LyY5YyW6YCJ6ZuG5Yy56YWN6YC76L6RXFxyXFxuY29uc3QgcHJvY2Vzc0xpbmVzQW5kRXBpc29kZXMgPSAoaHRtbCwg57q/6LevLCDnur/ot6/lkI0sIOmAiembhiwg6YCJ6ZuG5YiX6KGoLCDmjpLpmaQpID0+IHtcXHJcXG4gICAgLy8g6I635Y+W57q/6Lev5qCH562+XFxyXFxuICAgIGNvbnN0IGxpbmVFbGVtZW50cyA9IHBkZmEoaHRtbCwg57q/6LevKTtcXHJcXG4gIC8vICBsb2coYOaJvuWIsOe6v+i3r+WFg+e0oOaVsOmHjzogJHtsaW5lRWxlbWVudHMubGVuZ3RofWApO1xcclxcbiAgICBcXHJcXG4gICAgY29uc3QgdGFicyA9IFtdO1xcclxcbiAgICBjb25zdCBsaXN0cyA9IFtdO1xcclxcbiAgICBcXHJcXG4gICAgLy8g5o+Q5Y+W5pyJ5pWI55qE57q/6Lev5ZCNXFxyXFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZUVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XFxyXFxuICAgICAgICBsZXQgdGFiVGV4dCA9IHBkZmgobGluZUVsZW1lbnRzW2ldLCDnur/ot6/lkI0pO1xcclxcbiAgICAgICAgaWYgKHRhYlRleHQpIHtcXHJcXG4gICAgICAgICAgICB0YWJzLnB1c2goKHR5cGVvZiDmjpLpmaQgIT09ICd1bmRlZmluZWQnICYmIOaOkumZpCkgPyBcXHJcXG4gICAgICAgICAgICAgICAgdGFiVGV4dC5yZXBsYWNlKG5ldyBSZWdFeHAo5o6S6ZmkLCBcXFwiZ1xcXCIpLCBcXFwiXFxcIikgOiBcXHJcXG4gICAgICAgICAgICAgICAgdGFiVGV4dCk7XFxyXFxuICAgICAgICB9XFxyXFxuICAgIH1cXHJcXG4gICAgXFxyXFxuICAgIC8vIOiOt+WPluaJgOaciemAiembhuWMuuWfn1xcclxcbiAgICBjb25zdCBhbGxFcGlzb2RlU2VjdGlvbnMgPSBwZGZhKGh0bWwsIOmAiembhik7XFxyXFxuICAvLyAgbG9nKGDmib7liLDpgInpm4bljLrln5/mlbDph486ICR7YWxsRXBpc29kZVNlY3Rpb25zLmxlbmd0aH1gKTtcXHJcXG4gICAgXFxyXFxuICAgIC8vIOaPkOWPluacieaViOeahOmAiembhuWIl+ihqFxcclxcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVFbGVtZW50cy5sZW5ndGg7IGkrKykge1xcclxcbiAgICAgICAgbGV0IGVwaXNvZGVzID0gW107XFxyXFxuICAgICAgICBcXHJcXG4gICAgICAgIC8vIOWwneivleaMiemhuuW6j+WMuemFjemAiembhuWMuuWfn1xcclxcbiAgICAgICAgaWYgKGkgPCBhbGxFcGlzb2RlU2VjdGlvbnMubGVuZ3RoKSB7XFxyXFxuICAgICAgICAgICAgZXBpc29kZXMgPSBwZGZhKGFsbEVwaXNvZGVTZWN0aW9uc1tpXSwg6YCJ6ZuG5YiX6KGoKTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICAgIFxcclxcbiAgICAgICAgLy8g5aaC5p6c5oyJ6aG65bqP5pyq5om+5Yiw77yM5bCd6K+V6YCa6L+HSUTljLnphY1cXHJcXG4gICAgICAgIGlmIChlcGlzb2Rlcy5sZW5ndGggPT09IDApIHtcXHJcXG4gICAgICAgICAgICBjb25zdCBsaW5lSWQgPSBwZGZoKGxpbmVFbGVtZW50c1tpXSwgJ2EmJmlkJykgfHwgXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICBwZGZoKGxpbmVFbGVtZW50c1tpXSwgJ2EmJmRhdGEtaWQnKSB8fFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGRmaChsaW5lRWxlbWVudHNbaV0sICdkaXYmJmlkJykgfHwgXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICBwZGZoKGxpbmVFbGVtZW50c1tpXSwgJ2RpdiYmZGF0YS1pZCcpO1xcclxcbiAgICAgICAgICAgIFxcclxcbiAgICAgICAgICAgIGlmIChsaW5lSWQpIHtcXHJcXG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hlZFNlY3Rpb24gPSBhbGxFcGlzb2RlU2VjdGlvbnMuZmluZChzZWN0aW9uID0+IFxcclxcbiAgICAgICAgICAgICAgICAgICAgcGRmaChzZWN0aW9uLCAnZGl2JiZpZCcpID09PSBsaW5lSWQgfHwgXFxyXFxuICAgICAgICAgICAgICAgICAgICBwZGZoKHNlY3Rpb24sICdkaXYmJmRhdGEtaWQnKSA9PT0gbGluZUlkXFxyXFxuICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgIFxcclxcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlZFNlY3Rpb24pIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGVwaXNvZGVzID0gcGRmYShtYXRjaGVkU2VjdGlvbiwg6YCJ6ZuG5YiX6KGoKTtcXHJcXG4gICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICAgIFxcclxcbiAgICAgICAgLy8g5aaC5p6c5LuN5pyq5om+5Yiw77yM5bCd6K+V5YWo5bGA5Yy56YWNXFxyXFxuICAgICAgICBpZiAoZXBpc29kZXMubGVuZ3RoID09PSAwKSB7XFxyXFxuICAgICAgICAgICAgZXBpc29kZXMgPSBwZGZhKGh0bWwsIOmAiembhuWIl+ihqCk7XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgICBcXHJcXG4gICAgICAgIGxpc3RzLnB1c2goZXBpc29kZXMpO1xcclxcbiAgICAvLyAgICBsb2coYOe6v+i3ryAke2krMX0g5om+5Yiw6YCJ6ZuG5pWw6YePOiAke2VwaXNvZGVzLmxlbmd0aH1gKTtcXHJcXG4gICAgfVxcclxcbiAgICBcXHJcXG4gICAgLy8g5re75Yqg5riF55CG55uR5ZCs5ZmoXFxyXFxuICAgIGFkZExpc3RlbmVyKFxcXCJvbkNsb3NlXFxcIiwgJC50b1N0cmluZygoKSA9PiB7XFxyXFxuICAgICAgICBjbGVhck15VmFyKFxcXCJsaXN0c1xcXCIpO1xcclxcbiAgICB9KSk7XFxyXFxuICAgIFxcclxcbiAgICAvLyDlrZjlgqjpgInpm4bliJfooahcXHJcXG4gICAgc3RvcmFnZTAucHV0TXlWYXIoXFxcImxpc3RzXFxcIiwgbGlzdHMpO1xcclxcbiAgICBcXHJcXG4gICAgcmV0dXJuIHsgdGFicywgbGlzdHMgfTtcXHJcXG59XFxyXFxuXFxyXFxuY29uc3QgY3JlYXRlU29ydEJ1dHRvbiA9IChNWV9VUkwsIHRhYnMsIGxpc3RzLCBkLCBsYXp5KSA9PiB7XFxyXFxuICAgIGNvbnN0IFRW5o6o6YCBID0gKHRhYnMsIGxpc3RzLCBkKSA9PiAkLnRvU3RyaW5nKCh0YWJzLCBsaXN0cywgZCkgPT4ge1xcclxcbiAgICAgICAgdmFyIOaOqOmAgSA9IHtcXHJcXG4gICAgICAgICAgICBcXFwibmFtZVxcXCI6IGdldFBhZ2VUaXRsZSgpLFxcclxcbiAgICAgICAgICAgIFxcXCJjb250ZW50XFxcIjogZC5kZXNjLFxcclxcbiAgICAgICAgICAgIFxcXCJwaWNcXFwiOiBkLmltZyB8fCBkLnBpY191cmwsXFxyXFxuICAgICAgICAgICAgXFxcImZyb21cXFwiOiB0YWJzLmpvaW4oJyQkJCcpLFxcclxcbiAgICAgICAgICAgIFxcXCJ1cmxcXFwiOiBzdG9yYWdlMC5nZXRNeVZhcihcXFwibGlzdHNcXFwiKS5tYXAobGkgPT4gbGkubWFwKGxpMSA9PiBwZGZoKGxpMSwgJ1RleHQnKSArICckJyArIHBkKGxpMSwgJ2EmJmhyZWYnKSkuam9pbignIycpKS5qb2luKCckJCQnKVxcclxcbiAgICAgICAgfTtcXHJcXG4gICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9wYWdlL3B1c2g/cnVsZT1YWVHmjqjpgIEmcHVzaHVybD1cXFwiICsgZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KOaOqOmAgSkpO1xcclxcbiAgICB9LCB0YWJzLCBsaXN0cywgZCk7XFxyXFxuXFxyXFxuICAgIHJldHVybiB7XFxyXFxuICAgICAgICB0aXRsZTogJ+KAnOKAnOKAneKAnTxiPjxzcGFuIHN0eWxlPVxcXCJjb2xvcjogJyArIGdldE15VmFyKE1ZX1VSTCArIFxcXCLnq6DoioLmjpLluo9cXFwiLCAnIzFhYWQxOVxcXCI+5q2j5bqPJykgKyAnPC9zcGFuPjwvYj4nLFxcclxcbiAgICAgICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKCh0YWJzLCBsYXp5LCBkLCBUVuaOqOmAgSwgTVlfVVJMKSA9PiB7XFxyXFxuICAgICAgICAgICAgY29uc3QgbGlzdHMgPSBzdG9yYWdlMC5nZXRNeVZhcihcXFwibGlzdHNcXFwiKTtcXHJcXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50TGluZSA9IHBhcnNlSW50KGdldE15VmFyKE1ZX1VSTCwgJzAnKSkgfHwgMDtcXHJcXG4gICAgICAgICAgICBjb25zdCBzb3J0T3JkZXIgPSBnZXRNeVZhcihNWV9VUkwgKyBcXFwi56ug6IqC5o6S5bqPXFxcIiwgJyMxYWFkMTlcXFwiPuato+W6jycpO1xcclxcbiAgICAgICAgICAgIGNvbnN0IG5ld0xhYmVsID0gc29ydE9yZGVyID09ICcjRkYwMDAwXFxcIj7lgJLluo8nID8gXFxyXFxuICAgICAgICAgICAgICAgICcjMWFhZDE5XFxcIj7mraPluo8nIDogJyNGRjAwMDBcXFwiPuWAkuW6jyc7XFxyXFxuICAgICAgICAgICAgXFxyXFxuICAgICAgICAgICAgLy8g5pu05paw5o6S5bqP5oyJ6ZKu5pi+56S6XFxyXFxuICAgICAgICAgICAgdXBkYXRlSXRlbSh7XFxyXFxuICAgICAgICAgICAgICAgIGV4dHJhOiB7IFxcclxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IE1ZX1VSTCArIFxcXCJf5o6S5bqPXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgIGxvbmdDbGljazogW3sgdGl0bGU6IFxcXCJUVmJveOaOqOmAgVxcXCIsIGpzOiBUVuaOqOmAgSh0YWJzLCBsaXN0cywgZCkgfV0gXFxyXFxuICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIHRpdGxlOiAn4oCc4oCc4oCd4oCdPGI+PHNwYW4gc3R5bGU9XFxcImNvbG9yOiAnICsgbmV3TGFiZWwgKyAnPC9zcGFuPjwvYj4nXFxyXFxuICAgICAgICAgICAgfSk7XFxyXFxuICAgICAgICAgICAgXFxyXFxuICAgICAgICAgICAgLy8g6I635Y+W5b2T5YmN57q/6Lev55qE6YCJ6ZuG5bm25aSE55CG5o6S5bqPXFxyXFxuICAgICAgICAgICAgbGV0IGNoYXB0ZXJzID0gbGlzdHNbY3VycmVudExpbmVdO1xcclxcbiAgICAgICAgICAgIGlmICghY2hhcHRlcnMpIHtcXHJcXG4gICAgICAgICAgICAgICAgbG9nKFxcXCLlvZPliY3nur/ot6/pgInpm4bkuI3lrZjlnKg6IFxcXCIgKyBjdXJyZW50TGluZSk7XFxyXFxuICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxyXFxuICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgIFxcclxcbiAgICAgICAgICAgIC8vIOWIm+W7uuWJr+acrOWGjeWPjei9rOS7pemBv+WFjeS/ruaUueWOn+aVsOe7hFxcclxcbiAgICAgICAgICAgIGNoYXB0ZXJzID0gY2hhcHRlcnMuc2xpY2UoKTtcXHJcXG4gICAgICAgICAgICBpZiAoc29ydE9yZGVyID09ICcjMWFhZDE5XFxcIj7mraPluo8nKSB7XFxyXFxuICAgICAgICAgICAgICAgIGNoYXB0ZXJzLnJldmVyc2UoKTtcXHJcXG4gICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgXFxyXFxuICAgICAgICAgICAgLy8g55Sf5oiQ6YCJ6ZuG6aG5XFxyXFxuICAgICAgICAgICAgbGV0IGNoYXB0ZXJJdGVtcyA9IGNoYXB0ZXJzLm1hcChkYXRhID0+ICh7XFxyXFxuICAgICAgICAgICAgICAgIHRpdGxlOiBwZGZoKGRhdGEsICdhJiZUZXh0JyksXFxyXFxuICAgICAgICAgICAgICAgIHVybDogcGQoZGF0YSwgJ2EmJmhyZWYnKSArIGxhenksXFxyXFxuICAgICAgICAgICAgICAgIGNvbF90eXBlOiBjaGFwdGVycy5sZW5ndGggPiAzID8gJ3RleHRfNCcgOiAndGV4dF8yJyxcXHJcXG4gICAgICAgICAgICAgICAgZXh0cmE6IHsgY2xzOiBNWV9VUkwgKyBcXFwiX+mAiembhlxcXCIsIGlkOiBwZChkYXRhLCAnYSYmaHJlZicpIH1cXHJcXG4gICAgICAgICAgICB9KSk7XFxyXFxuICAgICAgICAgICAgXFxyXFxuICAgICAgICAgICAgLy8g5YWI5Yig6Zmk5pen6YCJ6ZuGXFxyXFxuICAgICAgICAgICAgdHJ5IHtcXHJcXG4gICAgICAgICAgICAgICAgZGVsZXRlSXRlbUJ5Q2xzKE1ZX1VSTCArIFxcXCJf6YCJ6ZuGXFxcIik7XFxyXFxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xcclxcbiAgICAgICAgICAgICAgICBsb2coXFxcIuWIoOmZpOaXp+mAiembhumUmeivrzogXFxcIiArIGUubWVzc2FnZSk7XFxyXFxuICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgIFxcclxcbiAgICAgICAgICAgIC8vIOa3u+WKoOaWsOmAiembhlxcclxcbiAgICAgICAgICAgIHRyeSB7XFxyXFxuICAgICAgICAgICAgICAgIGFkZEl0ZW1CZWZvcmUoTVlfVVJMICsgXFxcImZvb3RlclxcXCIsIGNoYXB0ZXJJdGVtcyk7XFxyXFxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xcclxcbiAgICAgICAgICAgICAgICBsb2coXFxcIua3u+WKoOmAiembhumUmeivrzogXFxcIiArIGUubWVzc2FnZSk7XFxyXFxuICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgIFxcclxcbiAgICAgICAgICAgIC8vIOS/neWtmOaWsOeahOaOkuW6j+eKtuaAgVxcclxcbiAgICAgICAgICAgIHB1dE15VmFyKE1ZX1VSTCArIFxcXCLnq6DoioLmjpLluo9cXFwiLCBuZXdMYWJlbCk7XFxyXFxuICAgICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIjtcXHJcXG4gICAgICAgIH0sIHRhYnMsIGxhenksIGRbMF0sIFRW5o6o6YCBLCBNWV9VUkwpLFxcclxcbiAgICAgICAgY29sX3R5cGU6ICdmbGV4X2J1dHRvbicsXFxyXFxuICAgICAgICBleHRyYTogeyBcXHJcXG4gICAgICAgICAgICBpZDogTVlfVVJMICsgXFxcIl/mjpLluo9cXFwiLFxcclxcbiAgICAgICAgICAgIGxvbmdDbGljazogW3sgdGl0bGU6IFxcXCJUVmJveOaOqOmAgVxcXCIsIGpzOiBUVuaOqOmAgSh0YWJzLCBsaXN0cywgZFswXSkgfV0gXFxyXFxuICAgICAgICB9XFxyXFxuICAgIH07XFxyXFxufVxcclxcblxcclxcbmNvbnN0IGNyZWF0ZUVwaXNvZGVMaXN0ID0gKE1ZX1VSTCwgbGlzdHMsIGxhenkpID0+IHtcXHJcXG4gICAgbGV0IGN1cnJlbnRMaW5lID0gcGFyc2VJbnQoZ2V0TXlWYXIoTVlfVVJMLCAnMCcpKSB8fCAwO1xcclxcbiAgICBcXHJcXG4gICAgLy8g56Gu5L+d5b2T5YmN57q/6Lev5pyJ5pWIXFxyXFxuICAgIGN1cnJlbnRMaW5lID0gTWF0aC5taW4oY3VycmVudExpbmUsIGxpc3RzLmxlbmd0aCAtIDEpO1xcclxcbiAgICBpZiAoIWxpc3RzW2N1cnJlbnRMaW5lXSB8fCBsaXN0c1tjdXJyZW50TGluZV0ubGVuZ3RoID09PSAwKSB7XFxyXFxuICAgICAgICBsb2coYOW9k+WJjee6v+i3ryAke2N1cnJlbnRMaW5lfSDmsqHmnInpgInpm4ZgKTtcXHJcXG4gICAgICAgIHJldHVybiBbXTtcXHJcXG4gICAgfVxcclxcbiAgICBcXHJcXG4gICAgY29uc3Qgc29ydE9yZGVyID0gZ2V0TXlWYXIoTVlfVVJMICsgXFxcIueroOiKguaOkuW6j1xcXCIsICcjMWFhZDE5XFxcIj7mraPluo8nKTtcXHJcXG4gICAgbGV0IGN1cnJlbnRDaGFwdGVycyA9IGxpc3RzW2N1cnJlbnRMaW5lXS5zbGljZSgpOyAvLyDliJvlu7rlia/mnKxcXHJcXG4gICAgXFxyXFxuICAgIGlmIChzb3J0T3JkZXIgPT0gJyNGRjAwMDBcXFwiPuWAkuW6jycpIHtcXHJcXG4gICAgICAgIGN1cnJlbnRDaGFwdGVycy5yZXZlcnNlKCk7XFxyXFxuICAgIH1cXHJcXG4gICAgXFxyXFxuICAgIHJldHVybiBjdXJyZW50Q2hhcHRlcnMubWFwKGRhdGEgPT4gKHtcXHJcXG4gICAgICAgIHRpdGxlOiBwZGZoKGRhdGEsICdhJiZUZXh0JyksXFxyXFxuICAgICAgICB1cmw6IHBkKGRhdGEsICdhJiZocmVmJykgKyBsYXp5LFxcclxcbiAgICAgICAgY29sX3R5cGU6IGN1cnJlbnRDaGFwdGVycy5sZW5ndGggPiAzID8gJ3RleHRfNCcgOiAndGV4dF8yJyxcXHJcXG4gICAgICAgIGV4dHJhOiB7IFxcclxcbiAgICAgICAgICAgIGNsczogTVlfVVJMICsgXFxcIl/pgInpm4ZcXFwiLCBcXHJcXG4gICAgICAgICAgICBpZDogcGQoZGF0YSwgJ2EmJmhyZWYnKSBcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgfSkpO1xcclxcbn1cXHJcXG5cXHJcXG5jb25zdCBzZXRMYXN0RXBpc29kZVJ1bGUgPSAo6YCJ6ZuGLCDpgInpm4bliJfooagpID0+IHtcXHJcXG4gICAgc2V0TGFzdENoYXB0ZXJSdWxlKCdqczonICsgJC50b1N0cmluZygo6YCJ6ZuGLCDpgInpm4bliJfooagpID0+IFxcclxcbiAgICAgICAgc2V0UmVzdWx0KCfmm7TmlrDoh7M6IOesrCcgKyBcXHJcXG4gICAgICAgICAgICBwZGZhKGdldFJlc0NvZGUoKSwg6YCJ6ZuGKS5tYXAoZCA9PiBcXHJcXG4gICAgICAgICAgICAgICAgcGRmYShkLCDpgInpm4bliJfooagpLmxlbmd0aFxcclxcbiAgICAgICAgICAgICkuc29ydCgoYSxiKT0+Yi1hKVswXSArIFxcXCLpm4ZcXFwiKVxcclxcbiAgICAsIOmAiembhiwg6YCJ6ZuG5YiX6KGoKSk7XFxyXFxufVxcclxcblxcclxcbmNvbnN0IGNyZWF0ZUZvb3RlckJsb2NrID0gKE1ZX1VSTCkgPT4ge1xcclxcbiAgICByZXR1cm4geyBcXHJcXG4gICAgICAgIGNvbF90eXBlOiBcXFwiYmlnX2JsYW5rX2Jsb2NrXFxcIiwgXFxyXFxuICAgICAgICBleHRyYTogeyBpZDogTVlfVVJMICsgXFxcImZvb3RlclxcXCIgfSBcXHJcXG4gICAgfTtcXHJcXG59XFxyXFxuXFxyXFxuJC5leHBvcnRzID0geyBhdXRvU2Vjb25kYXJ5UGFnZSB9XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCJnZXRhcHBhcGlcIixcInBhdGhcIjpcImdldGFwcGFwaVwiLFwicnVsZVwiOlwiY29uc3QgQUVTID0gKHN0ciwgdHlwZSkgPT4ge1xcclxcbiAgZXZhbChnZXRDcnlwdG9KUygpKTtcXHJcXG4gIGNvbnN0IGtleSA9IENyeXB0b0pTLmVuYy5VdGY4LnBhcnNlKGNvbmZpZy5rZXkpO1xcclxcbiAgY29uc3QgY2ZnID0ge1xcclxcbiAgICBpdjoga2V5LFxcclxcbiAgICBtb2RlOiBDcnlwdG9KUy5tb2RlLkNCQyxcXHJcXG4gICAgcGFkZGluZzogQ3J5cHRvSlMucGFkLlBrY3M3LFxcclxcbiAgfTtcXHJcXG4gIHJldHVybiB0eXBlXFxyXFxuICAgID8gQ3J5cHRvSlMuQUVTLmVuY3J5cHQoc3RyLCBrZXksIGNmZykudG9TdHJpbmcoKVxcclxcbiAgICA6IENyeXB0b0pTLkFFUy5kZWNyeXB0KHN0ciwga2V5LCBjZmcpLnRvU3RyaW5nKENyeXB0b0pTLmVuYy5VdGY4KTtcXHJcXG59XFxyXFxuXFxyXFxubGV0IOS4gOe6pyA9ICgpID0+IHtcXHJcXG4gICAgbGV0IHRhYnMgPSBzdG9yYWdlMC5nZXRNeVZhcigndGFicycpO1xcclxcbiAgICBpZiAoIXRhYnMpIHtcXHJcXG4gICAgICBpZiAoIXN0b3JhZ2UwLmdldE15VmFyKCd0aXRsZScpKSB7XFxyXFxuICAgICAgICBsZXQgaW5pdHVybCA9IGNvbmZpZy5pbml0P2Ake2NvbmZpZy5ob3N0fWluaXRWMTIwYDpgJHtjb25maWcuaG9zdH1pbml0VjExOWBcXHJcXG4gICAgICAgIGxldCBpbml0ID0gSlNPTi5wYXJzZShBRVMoSlNPTi5wYXJzZShwb3N0KGluaXR1cmwpKS5kYXRhKSlcXHJcXG4gICAgICAgICAgLnR5cGVfbGlzdC5tYXAoKGl0ZW0pID0+IHtcXHJcXG4gICAgICAgICAgICBjb25zdCBuZXdJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgaXRlbSk7XFxyXFxuICAgICAgICAgICAgZGVsZXRlIG5ld0l0ZW0ucmVjb21tZW5kX2xpc3Q7XFxyXFxuICAgICAgICAgICAgZGVsZXRlIG5ld0l0ZW0udHlwZV9leHRlbmQ7XFxyXFxuICAgICAgICAgICAgcmV0dXJuIG5ld0l0ZW07XFxyXFxuICAgICAgICAgIH0pXFxyXFxuICAgICAgICAgIC5zbGljZSgxKTtcXHJcXG4gICAgICAgIHN0b3JhZ2UwLnB1dE15VmFyKCd0aXRsZScsIGluaXQpO1xcclxcbiAgICAgIH1cXHJcXG4gICAgICBjb25zdCB0YWJzRGF0YSA9IHN0b3JhZ2UwLmdldE15VmFyKCd0aXRsZScpO1xcclxcbiAgICAgIGNvbnN0IG5hbWVzQW5kSWRzID0gdGFic0RhdGEubWFwKHQgPT4gdC50eXBlX25hbWUpO1xcclxcbiAgICAgIHRhYnMgPSBbXFxyXFxuICAgICAgICB7XFxyXFxuICAgICAgICAgIHRpdGxlOiAndHlwZV9pZCcsXFxyXFxuICAgICAgICAgIG5hbWVzOiBuYW1lc0FuZElkcyxcXHJcXG4gICAgICAgICAgaWRzOiB0YWJzRGF0YS5tYXAodCA9PiB0LnR5cGVfaWQudG9TdHJpbmcoKSksXFxyXFxuICAgICAgICAgIGFycjogdGFic0RhdGEubWFwKHRhYkl0ZW0gPT5cXHJcXG4gICAgICAgICAgICB0YWJJdGVtLmZpbHRlcl90eXBlX2xpc3QubWFwKCh7IGxpc3QsIG5hbWUgfSkgPT4gKHtcXHJcXG4gICAgICAgICAgICAgIGlkczogbGlzdCxcXHJcXG4gICAgICAgICAgICAgIG5hbWVzOiBsaXN0LFxcclxcbiAgICAgICAgICAgICAgdGl0bGU6IG5hbWUsXFxyXFxuICAgICAgICAgICAgfSkpXFxyXFxuICAgICAgICAgICksXFxyXFxuICAgICAgICB9LFxcclxcbiAgICAgIF07XFxyXFxuICAgICAgc3RvcmFnZTAucHV0TXlWYXIoJ3RhYnMnLCB0YWJzKTtcXHJcXG4gICAgfVxcclxcbiAgICBsZXQgZCA9IFtdO1xcclxcbiAgICBjb25zdCBnZXRSYW5nZUNvbG9ycyA9ICcjJyArICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAweDEwMDAwMDApLnRvU3RyaW5nKDE2KS5wYWRTdGFydCg2LCAnMCcpO1xcclxcbiAgICBsZXQgc2V0VGFicyA9ICh0YWJzKSA9PiB7XFxyXFxuICAgICAgaWYgKCF0YWJzKSByZXR1cm47XFxyXFxuICAgICAgZm9yIChsZXQgZGF0YSBvZiB0YWJzKSB7XFxyXFxuICAgICAgICBnZXRNeVZhcihkYXRhLnRpdGxlKSB8fCBwdXRNeVZhcihkYXRhLnRpdGxlLCBkYXRhLmlkc1swXSk7XFxyXFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubmFtZXMubGVuZ3RoOyBpKyspIHtcXHJcXG4gICAgICAgICAgZC5wdXNoKHtcXHJcXG4gICAgICAgICAgICB0aXRsZTpcXHJcXG4gICAgICAgICAgICAgIGdldE15VmFyKGRhdGEudGl0bGUpID09PSBkYXRhLmlkc1tpXVxcclxcbiAgICAgICAgICAgICAgICA/IGDigJzigJzigJ3igJ08Zm9udCBjb2xvcj1cXFwiJHtnZXRSYW5nZUNvbG9yc31cXFwiPjxiPiR7ZGF0YS5uYW1lc1tpXX08L2I+PC9mb250PmBcXHJcXG4gICAgICAgICAgICAgICAgOiBkYXRhLm5hbWVzW2ldLFxcclxcbiAgICAgICAgICAgIHVybDogJCgnI25vTG9hZGluZyMnKS5sYXp5UnVsZSgodGl0bGUsIGlkLCBkYXRhKSA9PiB7XFxyXFxuICAgICAgICAgICAgICAgIGNsZWFyTXlWYXIoTVlfUlVMRS50aXRsZSk7XFxyXFxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmFycikge1xcclxcbiAgICAgICAgICAgICAgICAgIFsnYXJlYScsICd5ZWFyJywgJ2xhbmcnLCAnY2xhc3MnXS5mb3JFYWNoKGNsZWFyTXlWYXIpO1xcclxcbiAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgIGlmIChnZXRNeVZhcih0aXRsZSkgIT09IGlkKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgcHV0TXlWYXIodGl0bGUsIGlkKTtcXHJcXG4gICAgICAgICAgICAgICAgICByZWZyZXNoUGFnZSgpO1xcclxcbiAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKCk7XFxyXFxuICAgICAgICAgICAgICAgIHJldHVybiAnaGlrZXI6Ly9lbXB0eSc7XFxyXFxuICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgZGF0YS50aXRsZSxkYXRhLmlkc1tpXSxkYXRhKSxcXHJcXG4gICAgICAgICAgICBjb2xfdHlwZTogJ3Njcm9sbF9idXR0b24nLFxcclxcbiAgICAgICAgICB9KTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICAgIGQucHVzaCh7XFxyXFxuICAgICAgICAgIGNvbF90eXBlOiAnYmxhbmtfYmxvY2snLFxcclxcbiAgICAgICAgfSk7XFxyXFxuICAgICAgICBpZiAoZGF0YS5hcnIpIHtcXHJcXG4gICAgICAgICAgc2V0VGFicyhkYXRhLmFycltkYXRhLmlkcy5pbmRleE9mKGdldE15VmFyKGRhdGEudGl0bGUpKV0pO1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgIH1cXHJcXG4gICAgfTtcXHJcXG4gICAgY29uc3QgZm9sZCA9IGdldE15VmFyKCdoZWFkZXIuZ3JvdXAnLCAnMCcpO1xcclxcbiAgICBkLnB1c2goe1xcclxcbiAgICAgIHRpdGxlOlxcclxcbiAgICAgICAgZm9sZCA9PT0gJzEnID8gJ+KAnOKAnOKAneKAnTxiPicgKyAn4oioJy5mb250Y29sb3IoJyNGRjAwMDAnKSArICc8L2I+JyA6ICfigJzigJzigJ3igJ08Yj4nICsgJ+KIpycuZm9udGNvbG9yKCcjMWFhZDE5JykgKyAnPC9iPicsXFxyXFxuICAgICAgdXJsOiAkKCcjbm9Mb2FkaW5nIycpLmxhenlSdWxlKChmb2xkKSA9PiB7XFxyXFxuICAgICAgICBwdXRNeVZhcignaGVhZGVyLmdyb3VwJywgZm9sZCA9PT0gJzEnID8gJzAnIDogJzEnKTtcXHJcXG4gICAgICAgIFsnYXJlYScsICd5ZWFyJywgJ2xhbmcnLCAnY2xhc3MnXS5mb3JFYWNoKGNsZWFyTXlWYXIpO1xcclxcbiAgICAgICAgcmVmcmVzaFBhZ2UoZmFsc2UpO1xcclxcbiAgICAgICAgcmV0dXJuICdoaWtlcjovL2VtcHR5JztcXHJcXG4gICAgICB9LCBmb2xkKSxcXHJcXG4gICAgICBjb2xfdHlwZTogJ3Njcm9sbF9idXR0b24nLFxcclxcbiAgICB9KTtcXHJcXG4gICAgc2V0VGFicyh0YWJzKTtcXHJcXG4gICAgbGV0IGJsYW5rSW5kZXggPSBkLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uY29sX3R5cGUgPT09ICdibGFua19ibG9jaycpO1xcclxcbmJsYW5rSW5kZXggPSBibGFua0luZGV4ICE9PSAtMSA/IGJsYW5rSW5kZXggOiA2XFxyXFxuICAgIHN0b3JhZ2UwLnB1dE15VmFyKCdpdGVtcycsIGZvbGQgPT09ICcwJyA/IGQuc2xpY2UoMCwgYmxhbmtJbmRleCkgOiBkKTtcXHJcXG4gICAgaWYgKE1ZX1BBR0UgPT09IDEpIHNldFByZVJlc3VsdChzdG9yYWdlMC5nZXRNeVZhcignaXRlbXMnKSk7XFxyXFxuICAgIE1ZX1VSTCA9IGJ1aWxkVXJsKGAke2NvbmZpZy5ob3N0fXR5cGVGaWx0ZXJWb2RMaXN0YCwge1xcclxcbiAgICAgIGFyZWE6IGdldE15VmFyKCdhcmVhJywgJ+WFqOmDqCcpLFxcclxcbiAgICAgIHllYXI6IGdldE15VmFyKCd5ZWFyJywgJ+WFqOmDqCcpLFxcclxcbiAgICAgIHR5cGVfaWQ6IGdldE15VmFyKCd0eXBlX2lkJywgJzEnKSxcXHJcXG4gICAgICBwYWdlOiBNWV9QQUdFLFxcclxcbiAgICAgIHNvcnQ6IGdldE15VmFyKCdzb3J0JywgJ+acgOaWsCcpLFxcclxcbiAgICAgIGxhbmc6IGdldE15VmFyKCdsYW5nJywgJ+WFqOmDqCcpLFxcclxcbiAgICAgIGNsYXNzOiBnZXRNeVZhcignY2xhc3MnLCAn5YWo6YOoJyksXFxyXFxuICAgIH0pO1xcclxcbiAgICBzZXRSZXN1bHQoXFxyXFxuICAgICAgSlNPTi5wYXJzZShBRVMoSlNPTi5wYXJzZShyZXF1ZXN0KE1ZX1VSTCkpLmRhdGEpKS5yZWNvbW1lbmRfbGlzdC5tYXAoKGl0ZW0pID0+ICh7XFxyXFxuICAgICAgICB0aXRsZTogaXRlbS52b2RfbmFtZSxcXHJcXG4gICAgICAgIGltZzogaXRlbS52b2RfcGljLFxcclxcbiAgICAgICAgZGVzYzogaXRlbS52b2RfcmVtYXJrcyxcXHJcXG4gICAgICAgIHVybDogYCR7Y29uZmlnLmhvc3R9dm9kRGV0YWlsI2ltbWVyc2l2ZVRoZW1lIz92b2RfaWQ9JHtpdGVtLnZvZF9pZH1gLFxcclxcbiAgICAgIH0pKVxcclxcbiAgICApO1xcclxcbiAgfSxcXHJcXG4gIOS6jOe6pyA9ICjop6PmnpApID0+IHtcXHJcXG4gICAgdmFyIGQgPSBbXTtcXHJcXG4gICAgdmFyIGpzb24gPSBKU09OLnBhcnNlKEFFUyhKU09OLnBhcnNlKGdldFJlc0NvZGUoKSkuZGF0YSkpO1xcclxcbiAgICBkLnB1c2goe1xcclxcbiAgICAgIHRpdGxlOiBqc29uLnZvZC52b2RfY2xhc3MsXFxyXFxuICAgICAgaW1nOiBqc29uLnZvZC52b2RfcGljLFxcclxcbiAgICAgIGRlc2M6IGpzb24udm9kLnZvZF9jb250ZW50LFxcclxcbiAgICAgIGNvbF90eXBlOiAnbW92aWVfMV92ZXJ0aWNhbF9waWNfYmx1cicsXFxyXFxuICAgIH0pO1xcclxcbiAgICBcXHJcXG4gICAgbGF6eSA9IOino+aekCA/IOino+aekCA6IChqc29uKSA9PiAkKCcnKS5sYXp5UnVsZSgoanNvbixBRVMpID0+IHtcXHJcXG4gICAgICBsb2coanNvbilcXHJcXG4gICAgICBsZXQgdXJsXFxyXFxuICAgICAgaWYgKGpzb24udXJsID09PSBqc29uLnBhcnNlX2FwaV91cmwpIHtcXHJcXG4gICAgICAgIHVybCA9IGpzb24udXJsfSBlbHNlIFxcclxcbiAgICAgICAgaWYgKC91cmw9Ly50ZXN0KGpzb24ucGFyc2VfYXBpX3VybCkpIHtcXHJcXG4gICAgICAgICAgdXJsID0gIEpTT04ucGFyc2UocmVxdWVzdChqc29uLnBhcnNlX2FwaV91cmwpKS51cmxcXHJcXG4gICAgICAgICAgfWVsc2Uge1xcclxcbiAgICAgICAgICAgIHRyeSB7XFxyXFxuICAgICAgICAgICAgICBqc29uID0gcG9zdChjb25maWcuaG9zdCArICd2b2RQYXJzZScsIHtcXHJcXG4gICAgICAgICAgICAgICAgYm9keToge1xcclxcbiAgICAgICAgICAgICAgICAgIHBhcnNlX2FwaToganNvbi5wYXJzZV9hcGlfdXJsLnNsaWNlKDAsIDMyKSxcXHJcXG4gICAgICAgICAgICAgICAgICB1cmw6IEFFUyhqc29uLnVybCwgdHJ1ZSksXFxyXFxuICAgICAgICAgICAgICAgICAgdG9rZW46IGpzb24udG9rZW4gfX0pXFxyXFxuICAgICAgICAgICAgICAgICAganNvbiA9IEpTT04ucGFyc2UoSlNPTi5wYXJzZShBRVMoSlNPTi5wYXJzZShqc29uKS5kYXRhKSkuanNvbik7XFxyXFxuICAgICAgICAgICAgICAgICAgbG9nKGpzb24pXFxyXFxuICAgICAgICAgICAgICAgICAgdXJsID0ganNvbi51cmxcXHJcXG4gICAgICAgICAgICAgICAgICB9IGNhdGNoIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAndG9hc3Q6Ly/mjqXlj6PlvILluLjvvIzmn6XnnIvml6Xlv5fvvIzlpoLmnpzmnInmkq3mlL7lnLDlnYDmkq3kuI3lh7rogZTns7vmiJHkv67lpI0nO1xcclxcbiAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgcmV0dXJuIHVybCArICcjaXNWaWRlbz10cnVlIydcXHJcXG4gIH0sIGpzb24sQUVTKVxcclxcbiAgICB2YXIgdGFicyA9IGpzb24udm9kX3BsYXlfbGlzdC5tYXAoZGF0YSA9PiBkYXRhLnBsYXllcl9pbmZvLnNob3cpO1xcclxcbiAgICB2YXIgbGlzdHMgPSBqc29uLnZvZF9wbGF5X2xpc3QubWFwKGRhdGEgPT4gZGF0YS51cmxzKTtcXHJcXG4gICAgYWRkTGlzdGVuZXIoJ29uQ2xvc2UnLCAkLnRvU3RyaW5nKCgpID0+IFxcclxcbiAgICBjbGVhck15VmFyKCdsaXN0cycpXFxyXFxuICAgICkpXFxyXFxuICAgIHN0b3JhZ2UwLnB1dE15VmFyKCdsaXN0cycsIGxpc3RzKTtcXHJcXG4gICAgY29uc3QgY3VycmVudExpbmUgPSBnZXRNeVZhcihNWV9VUkwsICcwJyk7XFxyXFxuICAgIHZhciBzb3J0T3JkZXIgPSBnZXRNeVZhcihNWV9VUkwgKyAn56ug6IqC5o6S5bqPJywgJyMxYWFkMTlcXFwiPuato+W6jycpO1xcclxcbiAgICB2YXIgc29ydFRpdGxlID0gJ+KAnOKAnOKAneKAnTxiPjxzcGFuIHN0eWxlPVxcXCJjb2xvcjrmjpLluo88L3NwYW4+PC9iPic7XFxyXFxuICAgIGNvbnN0IFRW5o6o6YCBID0gKHRhYnMsIGxpc3RzLCBkKSA9PiAkLnRvU3RyaW5nKCh0YWJzLCBkKSA9PiB7XFxyXFxuICAgICAgICAgIHZhciDmjqjpgIEgPSB7XFxyXFxuICAgICAgICAgICAgbmFtZTogZ2V0UGFnZVRpdGxlKCksXFxyXFxuICAgICAgICAgICAgY29udGVudDogZC5kZXNjLFxcclxcbiAgICAgICAgICAgIHBpYzogZC5pbWcgfHwgZC5waWNfdXJsLFxcclxcbiAgICAgICAgICAgIGZyb206IHRhYnMuam9pbignJCQkJyksXFxyXFxuICAgICAgICAgICAgdXJsOiBzdG9yYWdlMC5nZXRNeVZhcignbGlzdHMnKS5tYXAoKGxpKSA9PiBsaS5tYXAoKGxpMSkgPT4gcGRmaChsaTEsICdUZXh0JykgKyAnJCcgKyBwZChsaTEsICdhJiZocmVmJykpLmpvaW4oJyMnKSkuam9pbignJCQkJyksXFxyXFxuICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgcmV0dXJuICdoaWtlcjovL3BhZ2UvcHVzaD9ydWxlPVhZUeaOqOmAgSZwdXNodXJsPScgKyBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnko5o6o6YCBKSk7XFxyXFxuICAgICAgICB9LCB0YWJzLCBsaXN0cywgZCApXFxyXFxuICAgIGQucHVzaCh7XFxyXFxuICAgICAgdGl0bGU6ICfigJzigJzigJ3igJ08Yj48c3BhbiBzdHlsZT1cXFwiY29sb3I6ICcgKyBzb3J0T3JkZXIgKyAnPC9zcGFuPjwvYj4nLFxcclxcbiAgICAgIHVybDogJCgnI25vTG9hZGluZyMnKS5sYXp5UnVsZSgodGFicywgc29ydFRpdGxlLCBsYXp5LCBkLCBUVuaOqOmAgSxBRVMpID0+IHtcXHJcXG4gICAgICAgICAgZ2xvYmFsVGhpcy5BRVM9QUVTXFxyXFxuICAgICAgICAgIGNvbnN0IGxpc3RzID0gc3RvcmFnZTAuZ2V0TXlWYXIoJ2xpc3RzJyk7XFxyXFxuICAgICAgICAgIGNvbnN0IGN1cnJlbnRMaW5lID0gZ2V0TXlWYXIoTVlfVVJMLCAnMCcpO1xcclxcbiAgICAgICAgICBjb25zdCBzb3J0T3JkZXIgPSBnZXRNeVZhcihNWV9VUkwgKyAn56ug6IqC5o6S5bqPJywgJyMxYWFkMTlcXFwiPuato+W6jycpO1xcclxcbiAgICAgICAgICBjb25zdCBuZXdMYWJlbCA9IHNvcnRPcmRlciA9PSAnI0ZGMDAwMFxcXCI+5YCS5bqPJyA/ICcjMWFhZDE5XFxcIj7mraPluo8nIDogJyNGRjAwMDBcXFwiPuWAkuW6jyc7XFxyXFxuICAgICAgICAgIHVwZGF0ZUl0ZW0oe1xcclxcbiAgICAgICAgICAgIGV4dHJhOiB7XFxyXFxuICAgICAgICAgICAgICBpZDogTVlfVVJMICsgJ1/mjpLluo8nLFxcclxcbiAgICAgICAgICAgICAgbG9uZ0NsaWNrOiBbeyB0aXRsZTogJ1RWYm945o6o6YCBJywganM6IFRW5o6o6YCBKHRhYnMsIGxpc3RzLCBkKSB9XSxcXHJcXG4gICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgIHRpdGxlOiBzb3J0VGl0bGUucmVwbGFjZSgn5o6S5bqPJywgbmV3TGFiZWwpLFxcclxcbiAgICAgICAgICB9KTtcXHJcXG4gICAgICAgICAgbGV0IGNoYXB0ZXJzID0gbGlzdHNbY3VycmVudExpbmVdO1xcclxcbiAgICAgICAgICBpZiAoc29ydE9yZGVyID09ICcjMWFhZDE5XFxcIj7mraPluo8nKSB7XFxyXFxuICAgICAgICAgICAgY2hhcHRlcnMucmV2ZXJzZSgpO1xcclxcbiAgICAgICAgICB9XFxyXFxuICAgICAgICAgIGxldCBjaGFwdGVySXRlbXMgPSBjaGFwdGVycy5tYXAoKGRhdGEpID0+ICh7XFxyXFxuICAgICAgICAgICAgdGl0bGU6IGRhdGEubmFtZSxcXHJcXG4gICAgICAgICAgICB1cmw6IGxhenkoZGF0YSksXFxyXFxuICAgICAgICAgICAgY29sX3R5cGU6IGNoYXB0ZXJzLmxlbmd0aCA+IDMgPyAndGV4dF80JyA6ICd0ZXh0XzInLFxcclxcbiAgICAgICAgICAgIGV4dHJhOiB7IGNsczogTVlfVVJMICsgJ1/pgInpm4YnLCBpZDogZGF0YS5wYXJzZV9hcGlfdXJsIH0sXFxyXFxuICAgICAgICAgIH0pKTtcXHJcXG4gICAgICAgICAgZGVsZXRlSXRlbUJ5Q2xzKE1ZX1VSTCArICdf6YCJ6ZuGJyk7XFxyXFxuICAgICAgICAgIGFkZEl0ZW1CZWZvcmUoTVlfVVJMICsgJ2Zvb3RlcicsIGNoYXB0ZXJJdGVtcyk7XFxyXFxuICAgICAgICAgIHB1dE15VmFyKE1ZX1VSTCArICfnq6DoioLmjpLluo8nLCBuZXdMYWJlbCk7XFxyXFxuICAgICAgICAgIHJldHVybiAnaGlrZXI6Ly9lbXB0eSc7XFxyXFxuICAgICAgICB9LHRhYnMsc29ydFRpdGxlLGxhenksZFswXSxUVuaOqOmAgSxBRVMpLFxcclxcbiAgICAgIGNvbF90eXBlOiAnc2Nyb2xsX2J1dHRvbicsXFxyXFxuICAgICAgZXh0cmE6IHtcXHJcXG4gICAgICAgIGlkOiBNWV9VUkwgKyAnX+aOkuW6jycsXFxyXFxuICAgICAgICBsb25nQ2xpY2s6IFt7IHRpdGxlOiAnVFZib3jmjqjpgIEnLCBqczogVFbmjqjpgIEodGFicywgbGlzdHMsIGRbMF0pIH1dLFxcclxcbiAgICAgIH0sXFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0YWJzLmZvckVhY2goKHRhYk5hbWUsIGlkKSA9PiB7XFxyXFxuICAgICAgZC5wdXNoKHtcXHJcXG4gICAgICAgIHRpdGxlOiBjdXJyZW50TGluZSA9PSBpZCA/IGDigJzigJwke3RhYk5hbWV94oCd4oCdYCA6IHRhYk5hbWUsXFxyXFxuICAgICAgICB1cmw6ICQoJyNub0xvYWRpbmcjJykubGF6eVJ1bGUoKOe6v+i3r+WIl+ihqCwgbGF6eSwgaWQsQUVTKSA9PiB7XFxyXFxuICAgICAgICAgICAgZ2xvYmFsVGhpcy5BRVM9QUVTXFxyXFxuICAgICAgICAgICAgY29uc3QgbGlzdHMgPSBzdG9yYWdlMC5nZXRNeVZhcignbGlzdHMnKTtcXHJcXG4gICAgICAgICAgICDnur/ot6/liJfooaguZm9yRWFjaCgobmFtZSwgeGlkKSA9PlxcclxcbiAgICAgICAgICAgICAgdXBkYXRlSXRlbSh7XFxyXFxuICAgICAgICAgICAgICAgIHRpdGxlOiBpZCA9PSB4aWQgPyBg4oCc4oCcJHtuYW1lfeKAneKAnWAgOiBuYW1lLFxcclxcbiAgICAgICAgICAgICAgICBleHRyYTogeyBpZDogYCR7TVlfVVJMfV/nur/ot68ke3hpZH1gIH0sXFxyXFxuICAgICAgICAgICAgICB9KVxcclxcbiAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgcHV0TXlWYXIoTVlfVVJMLCBpZCk7XFxyXFxuICAgICAgICAgICAgbGV0IGNoYXB0ZXJzID0gbGlzdHNbZ2V0TXlWYXIoTVlfVVJMLCAnMCcpXTtcXHJcXG4gICAgICAgICAgICBpZiAoZ2V0TXlWYXIoTVlfVVJMICsgJ+eroOiKguaOkuW6jycsICcjMWFhZDE5XFxcIj7mraPluo8nKSA9PSAnI0ZGMDAwMFxcXCI+5YCS5bqPJykge1xcclxcbiAgICAgICAgICAgICAgY2hhcHRlcnMucmV2ZXJzZSgpO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICBsZXQgY2hhcHRlckl0ZW1zID0gY2hhcHRlcnMubWFwKGRhdGEgPT4gKHtcXHJcXG4gICAgICAgICAgICAgIHRpdGxlOiBkYXRhLm5hbWUsXFxyXFxuICAgICAgICAgICAgICB1cmw6IGxhenkoZGF0YSksXFxyXFxuICAgICAgICAgICAgICBjb2xfdHlwZTogY2hhcHRlcnMubGVuZ3RoID4gMyA/ICd0ZXh0XzQnIDogJ3RleHRfMicsXFxyXFxuICAgICAgICAgICAgICBleHRyYTogeyBjbHM6IE1ZX1VSTCArICdf6YCJ6ZuGJywgaWQ6IGRhdGEucGFyc2VfYXBpX3VybCB9LFxcclxcbiAgICAgICAgICAgIH0pKTtcXHJcXG4gICAgICAgICAgICBkZWxldGVJdGVtQnlDbHMoTVlfVVJMICsgJ1/pgInpm4YnKTtcXHJcXG4gICAgICAgICAgICBhZGRJdGVtQmVmb3JlKE1ZX1VSTCArICdmb290ZXInLCBjaGFwdGVySXRlbXMpO1xcclxcbiAgICAgICAgICAgIHJldHVybiAnaGlrZXI6Ly9lbXB0eSc7XFxyXFxuICAgICAgICAgIH0sdGFicyxsYXp5LGlkLEFFUyksXFxyXFxuICAgICAgICBjb2xfdHlwZTogJ3Njcm9sbF9idXR0b24nLFxcclxcbiAgICAgICAgZXh0cmE6IHsgaWQ6IGAke01ZX1VSTH1f57q/6LevJHtpZH1gIH0sXFxyXFxuICAgICAgfSk7XFxyXFxuICAgIH0pO1xcclxcbiAgICBsZXQgY3VycmVudENoYXB0ZXJzID0gbGlzdHNbY3VycmVudExpbmVdO1xcclxcbiAgICBpZiAoc29ydE9yZGVyID09ICcjRkYwMDAwXFxcIj7lgJLluo8nKSB7XFxyXFxuICAgICAgY3VycmVudENoYXB0ZXJzLnJldmVyc2UoKTtcXHJcXG4gICAgfVxcclxcbiAgICBjdXJyZW50Q2hhcHRlcnMuZm9yRWFjaCgoZGF0YSkgPT4ge1xcclxcbiAgICAgIGQucHVzaCh7XFxyXFxuICAgICAgICB0aXRsZTogZGF0YS5uYW1lLFxcclxcbiAgICAgICAgdXJsOiBsYXp5KGRhdGEpLFxcclxcbiAgICAgICAgY29sX3R5cGU6IGN1cnJlbnRDaGFwdGVycy5sZW5ndGggPiAzID8gJ3RleHRfNCcgOiAndGV4dF8yJyxcXHJcXG4gICAgICAgIGV4dHJhOiB7XFxyXFxuICAgICAgICAgIGNsczogTVlfVVJMICsgJ1/pgInpm4YnLFxcclxcbiAgICAgICAgICBpZDogZGF0YS5wYXJzZV9hcGlfdXJsLFxcclxcbiAgICAgICAgfSxcXHJcXG4gICAgICB9KTtcXHJcXG4gICAgfSk7XFxyXFxuICAgIHNldExhc3RDaGFwdGVyUnVsZSgnanM6JyArXFxyXFxuICAgICAgICAkLnRvU3RyaW5nKChBRVMpID0+IHtcXHJcXG4gICAgICAgICAgdmFyIGpzb24gPSBKU09OLnBhcnNlKEFFUyhKU09OLnBhcnNlKGdldFJlc0NvZGUoKSkuZGF0YSkpO1xcclxcbiAgICAgICAgICB2YXIg6YCJ6ZuGID0ganNvbi52b2RfcGxheV9saXN0Lm1hcCgoZGF0YSkgPT4gZGF0YS5wbGF5ZXJfaW5mby5zaG93KTtcXHJcXG4gICAgICAgICAgdmFyIOmAiembhuWIl+ihqCA9IGpzb24udm9kX3BsYXlfbGlzdC5tYXAoKGRhdGEpID0+IGRhdGEudXJscyk7XFxyXFxuICAgICAgICAgIHNldFJlc3VsdCgn5pu05paw6IezOiDnrKwnICsg6YCJ6ZuGLm1hcCgoZCwgaSkgPT4g6YCJ6ZuG5YiX6KGoW2ldLmxlbmd0aCkuc29ydCgoYSwgYikgPT4gYiAtIGEpWzBdICsgJ+mbhicpO1xcclxcbiAgICAgICAgfSxBRVMpXFxyXFxuICAgICk7XFxyXFxuICAgIGQucHVzaCh7XFxyXFxuICAgICAgY29sX3R5cGU6ICdiaWdfYmxhbmtfYmxvY2snLFxcclxcbiAgICAgIGV4dHJhOiB7IGlkOiBNWV9VUkwgKyAnZm9vdGVyJyB9LFxcclxcbiAgICB9KTtcXHJcXG4gICAgc2V0UmVzdWx0KGQpO1xcclxcbiAgfSxcXHJcXG4gIOaQnOe0oiA9ICgpID0+IHtcXHJcXG4gICAgbGV0IGJvZHkgPSB7XFxyXFxuICAgICAga2V5d29yZHM6IE1ZX0tFWVdPUkQsXFxyXFxuICAgICAgdHlwZV9pZDogJzAnLFxcclxcbiAgICAgIHBhZ2U6IE1ZX1BBR0UsXFxyXFxuICAgIH1cXHJcXG4gICAgTVlfVVJMID0gYnVpbGRVcmwoYCR7Y29uZmlnLmhvc3R9c2VhcmNoTGlzdGAsIGJvZHkpO1xcclxcbiAgICB2YXIganNvbiA9IEpTT04ucGFyc2UocmVxdWVzdChNWV9VUkwpKVxcclxcbiAgICB3aGlsZSAoL+mqjOivgeeggS8udGVzdChqc29uLm1zZykpIHtcXHJcXG4gICAgbGV0IGdlbmVyYXRlVVVJRCA9ICgoKSA9PiB7XFxyXFxuICAgIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uKGMpIHtcXHJcXG4gICAgICAgIGNvbnN0IHIgPSBNYXRoLnJhbmRvbSgpICogMTYgfCAwO1xcclxcbiAgICAgICAgY29uc3QgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MyB8IDB4OCk7XFxyXFxuICAgICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XFxyXFxuICAgIH0pO1xcclxcbiAgICB9KSgpXFxyXFxuICAgIGV2YWwoSlNPTi5wYXJzZShyZXF1ZXN0KCdoaWtlcjovL3BhZ2Uvanhocz9ydWxlPeaooeadv8K3UScpKS5ydWxlKTtcXHJcXG4gICAgbGV0IHZjb2RlID0gc3N5eihidWlsZFVybChgJHtjb25maWcuaG9zdH1jcmVhdGVgLnJlcGxhY2UoJ2luZGV4JywndmVyaWZ5JyksIHtcXHJcXG4gICAgICBrZXk6IGdlbmVyYXRlVVVJRFxcclxcbiAgICB9KSwgJ251bScpO1xcclxcbiAgICBib2R5LmNvZGUgPSB2Y29kZVxcclxcbiAgICBib2R5LmtleSA9IGdlbmVyYXRlVVVJRFxcclxcbiAgICBNWV9VUkwgPSBidWlsZFVybChgJHtjb25maWcuaG9zdH1zZWFyY2hMaXN0YCwgYm9keSk7XFxyXFxuICAgIGpzb24gPSBKU09OLnBhcnNlKHJlcXVlc3QoTVlfVVJMKSlcXHJcXG59XFxyXFxuICAgIHNldFJlc3VsdChcXHJcXG4gICAgICBKU09OLnBhcnNlKEFFUyhqc29uLmRhdGEpKS5zZWFyY2hfbGlzdC5tYXAoaXRlbSA9PiAoe1xcclxcbiAgICAgICAgdGl0bGU6IGl0ZW0udm9kX25hbWUsXFxyXFxuICAgICAgICBpbWc6IGl0ZW0udm9kX3BpYyxcXHJcXG4gICAgICAgIGRlc2M6IGl0ZW0udm9kX3JlbWFya3MsXFxyXFxuICAgICAgICB1cmw6IGAke2NvbmZpZy5ob3N0fXZvZERldGFpbCNpbW1lcnNpdmVUaGVtZSM/dm9kX2lkPSR7aXRlbS52b2RfaWR9YCxcXHJcXG4gICAgICB9KSlcXHJcXG4gICAgKTtcXHJcXG4gIH07XFxyXFxuJC5leHBvcnRzID0geyDkuIDnuqcsIOS6jOe6pywg5pCc57SiIH07XCJ9XSIsImljb24iOiIjZmY4YmMzNGEiLCJwcm94eSI6IiJ9